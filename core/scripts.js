function OpenSeadragon(e){return new OpenSeadragon.Viewer(e)}(function(e,i){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?i(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return i(n)}:i(e)})("undefined"!=typeof window?window:this,function(e,i){"use strict";var n=[],l=Object.getPrototypeOf,d=n.slice,s=n.flat?function(t){return n.flat.call(t)}:function(t){return n.concat.apply([],t)},o=n.push,a=n.indexOf,p={},y=p.toString,w=p.hasOwnProperty,O=w.toString,_=O.call(Object),A={},E=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},C=function(t){return null!=t&&t===t.window},D=e.document,N={type:!0,src:!0,nonce:!0,noModule:!0};function Z(t,r,u){var c,v,x=(u=u||D).createElement("script");if(x.text=t,r)for(c in N)(v=r[c]||r.getAttribute&&r.getAttribute(c))&&x.setAttribute(c,v);u.head.appendChild(x).parentNode.removeChild(x)}function X(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?p[y.call(t)]||"object":typeof t}var h=function(t,r){return new h.fn.init(t,r)};function re(t){var r=!!t&&"length"in t&&t.length,u=X(t);return!E(t)&&!C(t)&&("array"===u||0===r||"number"==typeof r&&0<r&&r-1 in t)}h.fn=h.prototype={jquery:"3.6.1",constructor:h,length:0,toArray:function(){return d.call(this)},get:function(t){return null==t?d.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var r=h.merge(this.constructor(),t);return r.prevObject=this,r},each:function(t){return h.each(this,t)},map:function(t){return this.pushStack(h.map(this,function(r,u){return t.call(r,u,r)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(h.grep(this,function(t,r){return(r+1)%2}))},odd:function(){return this.pushStack(h.grep(this,function(t,r){return r%2}))},eq:function(t){var r=this.length,u=+t+(t<0?r:0);return this.pushStack(0<=u&&u<r?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},h.extend=h.fn.extend=function(){var t,r,u,c,v,x,T=arguments[0]||{},F=1,L=arguments.length,M=!1;for("boolean"==typeof T&&(M=T,T=arguments[F]||{},F++),"object"==typeof T||E(T)||(T={}),F===L&&(T=this,F--);F<L;F++)if(null!=(t=arguments[F]))for(r in t)c=t[r],"__proto__"!==r&&T!==c&&(M&&c&&(h.isPlainObject(c)||(v=Array.isArray(c)))?(u=T[r],x=v&&!Array.isArray(u)?[]:v||h.isPlainObject(u)?u:{},v=!1,T[r]=h.extend(M,x,c)):void 0!==c&&(T[r]=c));return T},h.extend({expando:"jQuery"+("3.6.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var r,u;return!(!t||"[object Object]"!==y.call(t)||(r=l(t))&&("function"!=typeof(u=w.call(r,"constructor")&&r.constructor)||O.call(u)!==_))},isEmptyObject:function(t){var r;for(r in t)return!1;return!0},globalEval:function(t,r,u){Z(t,{nonce:r&&r.nonce},u)},each:function(t,r){var u,c=0;if(re(t))for(u=t.length;c<u&&!1!==r.call(t[c],c,t[c]);c++);else for(c in t)if(!1===r.call(t[c],c,t[c]))break;return t},makeArray:function(t,r){var u=r||[];return null!=t&&(re(Object(t))?h.merge(u,"string"==typeof t?[t]:t):o.call(u,t)),u},inArray:function(t,r,u){return null==r?-1:a.call(r,t,u)},merge:function(t,r){for(var u=+r.length,c=0,v=t.length;c<u;c++)t[v++]=r[c];return t.length=v,t},grep:function(t,r,u){for(var c=[],v=0,x=t.length,T=!u;v<x;v++)!r(t[v],v)!==T&&c.push(t[v]);return c},map:function(t,r,u){var c,v,x=0,T=[];if(re(t))for(c=t.length;x<c;x++)null!=(v=r(t[x],x,u))&&T.push(v);else for(x in t)null!=(v=r(t[x],x,u))&&T.push(v);return s(T)},guid:1,support:A}),"function"==typeof Symbol&&(h.fn[Symbol.iterator]=n[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,r){p["[object "+r+"]"]=r.toLowerCase()});var ye=function(t){var r,u,c,v,x,T,F,L,M,q,Q,U,V,ge,Se,ve,mt,Dt,ei,ot="sizzle"+1*new Date,Ae=t.document,Xt=0,Qe=0,vt=nn(),qi=nn(),$i=nn(),ti=nn(),Oi=function(S,H){return S===H&&(Q=!0),0},Li={}.hasOwnProperty,Yt=[],Fi=Yt.pop,hi=Yt.push,yt=Yt.push,ii=Yt.slice,ni=function(S,H){for(var B=0,K=S.length;B<K;B++)if(S[B]===H)return B;return-1},vi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",He="[\\x20\\t\\r\\n\\f]",it="(?:\\\\[\\da-fA-F]{1,6}"+He+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ot="\\["+He+"*("+it+")(?:"+He+"*([*^$|!~]?=)"+He+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+He+"*\\]",ri=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ot+")*)|.*)\\)|)",Pt=new RegExp(He+"+","g"),si=new RegExp("^"+He+"+|((?:^|[^\\\\])(?:\\\\.)*)"+He+"+$","g"),ki=new RegExp("^"+He+"*,"+He+"*"),en=new RegExp("^"+He+"*([>+~]|"+He+")"+He+"*"),Nn=new RegExp(He+"|>"),zn=new RegExp(ri),jn=new RegExp("^"+it+"$"),tn={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it+"|[*])"),ATTR:new RegExp("^"+Ot),PSEUDO:new RegExp("^"+ri),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+He+"*(even|odd|(([+-]|)(\\d*)n|)"+He+"*(?:([+-]|)"+He+"*(\\d+)|))"+He+"*\\)|)","i"),bool:new RegExp("^(?:"+vi+")$","i"),needsContext:new RegExp("^"+He+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+He+"*((?:-\\d)?\\d*)"+He+"*\\)|)(?=[^-]|$)","i")},Wn=/HTML$/i,Un=/^(?:input|select|textarea|button)$/i,qn=/^h\d$/i,Vi=/^[^{]+\{\s*\[native \w/,Vn=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gn=/[+~]/,Si=new RegExp("\\\\[\\da-fA-F]{1,6}"+He+"?|\\\\([^\\r\\n\\f])","g"),bi=function(S,H){var B="0x"+S.slice(1)-65536;return H||(B<0?String.fromCharCode(B+65536):String.fromCharCode(B>>10|55296,1023&B|56320))},_n=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Rn=function(S,H){return H?"\0"===S?"\ufffd":S.slice(0,-1)+"\\"+S.charCodeAt(S.length-1).toString(16)+" ":"\\"+S},Dn=function(){U()},Gn=sn(function(S){return!0===S.disabled&&"fieldset"===S.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{yt.apply(Yt=ii.call(Ae.childNodes),Ae.childNodes)}catch(S){yt={apply:Yt.length?function(H,B){hi.apply(H,ii.call(B))}:function(H,B){for(var K=H.length,j=0;H[K++]=B[j++];);H.length=K-1}}}function ut(S,H,B,K){var j,te,ne,le,de,De,Pe,_e=H&&H.ownerDocument,Ze=H?H.nodeType:9;if(B=B||[],"string"!=typeof S||!S||1!==Ze&&9!==Ze&&11!==Ze)return B;if(!K&&(U(H),H=H||V,Se)){if(11!==Ze&&(de=Vn.exec(S)))if(j=de[1]){if(9===Ze){if(!(ne=H.getElementById(j)))return B;if(ne.id===j)return B.push(ne),B}else if(_e&&(ne=_e.getElementById(j))&&ei(H,ne)&&ne.id===j)return B.push(ne),B}else{if(de[2])return yt.apply(B,H.getElementsByTagName(S)),B;if((j=de[3])&&u.getElementsByClassName&&H.getElementsByClassName)return yt.apply(B,H.getElementsByClassName(j)),B}if(u.qsa&&!ti[S+" "]&&(!ve||!ve.test(S))&&(1!==Ze||"object"!==H.nodeName.toLowerCase())){if(Pe=S,_e=H,1===Ze&&(Nn.test(S)||en.test(S))){for((_e=gn.test(S)&&vn(H.parentNode)||H)===H&&u.scope||((le=H.getAttribute("id"))?le=le.replace(_n,Rn):H.setAttribute("id",le=ot)),te=(De=T(S)).length;te--;)De[te]=(le?"#"+le:":scope")+" "+rn(De[te]);Pe=De.join(",")}try{return yt.apply(B,_e.querySelectorAll(Pe)),B}catch(bt){ti(S,!0)}finally{le===ot&&H.removeAttribute("id")}}}return L(S.replace(si,"$1"),H,B,K)}function nn(){var S=[];return function H(B,K){return S.push(B+" ")>c.cacheLength&&delete H[S.shift()],H[B+" "]=K}}function di(S){return S[ot]=!0,S}function fi(S){var H=V.createElement("fieldset");try{return!!S(H)}catch(B){return!1}finally{H.parentNode&&H.parentNode.removeChild(H),H=null}}function mn(S,H){for(var B=S.split("|"),K=B.length;K--;)c.attrHandle[B[K]]=H}function On(S,H){var B=H&&S,K=B&&1===S.nodeType&&1===H.nodeType&&S.sourceIndex-H.sourceIndex;if(K)return K;if(B)for(;B=B.nextSibling;)if(B===H)return-1;return S?1:-1}function Zn(S){return function(H){return"input"===H.nodeName.toLowerCase()&&H.type===S}}function Xn(S){return function(H){var B=H.nodeName.toLowerCase();return("input"===B||"button"===B)&&H.type===S}}function An(S){return function(H){return"form"in H?H.parentNode&&!1===H.disabled?"label"in H?"label"in H.parentNode?H.parentNode.disabled===S:H.disabled===S:H.isDisabled===S||H.isDisabled!==!S&&Gn(H)===S:H.disabled===S:"label"in H&&H.disabled===S}}function Ai(S){return di(function(H){return H=+H,di(function(B,K){for(var j,te=S([],B.length,H),ne=te.length;ne--;)B[j=te[ne]]&&(B[j]=!(K[j]=B[j]))})})}function vn(S){return S&&void 0!==S.getElementsByTagName&&S}for(r in u=ut.support={},x=ut.isXML=function(S){var B=S&&(S.ownerDocument||S).documentElement;return!Wn.test(S&&S.namespaceURI||B&&B.nodeName||"HTML")},U=ut.setDocument=function(S){var H,B,K=S?S.ownerDocument||S:Ae;return K!=V&&9===K.nodeType&&K.documentElement&&(ge=(V=K).documentElement,Se=!x(V),Ae!=V&&(B=V.defaultView)&&B.top!==B&&(B.addEventListener?B.addEventListener("unload",Dn,!1):B.attachEvent&&B.attachEvent("onunload",Dn)),u.scope=fi(function(j){return ge.appendChild(j).appendChild(V.createElement("div")),void 0!==j.querySelectorAll&&!j.querySelectorAll(":scope fieldset div").length}),u.attributes=fi(function(j){return j.className="i",!j.getAttribute("className")}),u.getElementsByTagName=fi(function(j){return j.appendChild(V.createComment("")),!j.getElementsByTagName("*").length}),u.getElementsByClassName=Vi.test(V.getElementsByClassName),u.getById=fi(function(j){return ge.appendChild(j).id=ot,!V.getElementsByName||!V.getElementsByName(ot).length}),u.getById?(c.filter.ID=function(j){var te=j.replace(Si,bi);return function(ne){return ne.getAttribute("id")===te}},c.find.ID=function(j,te){if(void 0!==te.getElementById&&Se){var ne=te.getElementById(j);return ne?[ne]:[]}}):(c.filter.ID=function(j){var te=j.replace(Si,bi);return function(ne){var le=void 0!==ne.getAttributeNode&&ne.getAttributeNode("id");return le&&le.value===te}},c.find.ID=function(j,te){if(void 0!==te.getElementById&&Se){var ne,le,de,De=te.getElementById(j);if(De){if((ne=De.getAttributeNode("id"))&&ne.value===j)return[De];for(de=te.getElementsByName(j),le=0;De=de[le++];)if((ne=De.getAttributeNode("id"))&&ne.value===j)return[De]}return[]}}),c.find.TAG=u.getElementsByTagName?function(j,te){return void 0!==te.getElementsByTagName?te.getElementsByTagName(j):u.qsa?te.querySelectorAll(j):void 0}:function(j,te){var ne,le=[],de=0,De=te.getElementsByTagName(j);if("*"===j){for(;ne=De[de++];)1===ne.nodeType&&le.push(ne);return le}return De},c.find.CLASS=u.getElementsByClassName&&function(j,te){if(void 0!==te.getElementsByClassName&&Se)return te.getElementsByClassName(j)},mt=[],ve=[],(u.qsa=Vi.test(V.querySelectorAll))&&(fi(function(j){var te;ge.appendChild(j).innerHTML="<a id='"+ot+"'></a><select id='"+ot+"-\r\\' msallowcapture=''><option selected=''></option></select>",j.querySelectorAll("[msallowcapture^='']").length&&ve.push("[*^$]="+He+"*(?:''|\"\")"),j.querySelectorAll("[selected]").length||ve.push("\\["+He+"*(?:value|"+vi+")"),j.querySelectorAll("[id~="+ot+"-]").length||ve.push("~="),(te=V.createElement("input")).setAttribute("name",""),j.appendChild(te),j.querySelectorAll("[name='']").length||ve.push("\\["+He+"*name"+He+"*="+He+"*(?:''|\"\")"),j.querySelectorAll(":checked").length||ve.push(":checked"),j.querySelectorAll("a#"+ot+"+*").length||ve.push(".#.+[+~]"),j.querySelectorAll("\\\f"),ve.push("[\\r\\n\\f]")}),fi(function(j){j.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var te=V.createElement("input");te.setAttribute("type","hidden"),j.appendChild(te).setAttribute("name","D"),j.querySelectorAll("[name=d]").length&&ve.push("name"+He+"*[*^$|!~]?="),2!==j.querySelectorAll(":enabled").length&&ve.push(":enabled",":disabled"),ge.appendChild(j).disabled=!0,2!==j.querySelectorAll(":disabled").length&&ve.push(":enabled",":disabled"),j.querySelectorAll("*,:x"),ve.push(",.*:")})),(u.matchesSelector=Vi.test(Dt=ge.matches||ge.webkitMatchesSelector||ge.mozMatchesSelector||ge.oMatchesSelector||ge.msMatchesSelector))&&fi(function(j){u.disconnectedMatch=Dt.call(j,"*"),Dt.call(j,"[s!='']:x"),mt.push("!=",ri)}),ve=ve.length&&new RegExp(ve.join("|")),mt=mt.length&&new RegExp(mt.join("|")),H=Vi.test(ge.compareDocumentPosition),ei=H||Vi.test(ge.contains)?function(j,te){var ne=9===j.nodeType?j.documentElement:j,le=te&&te.parentNode;return j===le||!(!le||1!==le.nodeType||!(ne.contains?ne.contains(le):j.compareDocumentPosition&&16&j.compareDocumentPosition(le)))}:function(j,te){if(te)for(;te=te.parentNode;)if(te===j)return!0;return!1},Oi=H?function(j,te){if(j===te)return Q=!0,0;var ne=!j.compareDocumentPosition-!te.compareDocumentPosition;return ne||(1&(ne=(j.ownerDocument||j)==(te.ownerDocument||te)?j.compareDocumentPosition(te):1)||!u.sortDetached&&te.compareDocumentPosition(j)===ne?j==V||j.ownerDocument==Ae&&ei(Ae,j)?-1:te==V||te.ownerDocument==Ae&&ei(Ae,te)?1:q?ni(q,j)-ni(q,te):0:4&ne?-1:1)}:function(j,te){if(j===te)return Q=!0,0;var ne,le=0,de=j.parentNode,De=te.parentNode,Pe=[j],_e=[te];if(!de||!De)return j==V?-1:te==V?1:de?-1:De?1:q?ni(q,j)-ni(q,te):0;if(de===De)return On(j,te);for(ne=j;ne=ne.parentNode;)Pe.unshift(ne);for(ne=te;ne=ne.parentNode;)_e.unshift(ne);for(;Pe[le]===_e[le];)le++;return le?On(Pe[le],_e[le]):Pe[le]==Ae?-1:_e[le]==Ae?1:0}),V},ut.matches=function(S,H){return ut(S,null,null,H)},ut.matchesSelector=function(S,H){if(U(S),u.matchesSelector&&Se&&!ti[H+" "]&&(!mt||!mt.test(H))&&(!ve||!ve.test(H)))try{var B=Dt.call(S,H);if(B||u.disconnectedMatch||S.document&&11!==S.document.nodeType)return B}catch(K){ti(H,!0)}return 0<ut(H,V,null,[S]).length},ut.contains=function(S,H){return(S.ownerDocument||S)!=V&&U(S),ei(S,H)},ut.attr=function(S,H){(S.ownerDocument||S)!=V&&U(S);var B=c.attrHandle[H.toLowerCase()],K=B&&Li.call(c.attrHandle,H.toLowerCase())?B(S,H,!Se):void 0;return void 0!==K?K:u.attributes||!Se?S.getAttribute(H):(K=S.getAttributeNode(H))&&K.specified?K.value:null},ut.escape=function(S){return(S+"").replace(_n,Rn)},ut.error=function(S){throw new Error("Syntax error, unrecognized expression: "+S)},ut.uniqueSort=function(S){var H,B=[],K=0,j=0;if(Q=!u.detectDuplicates,q=!u.sortStable&&S.slice(0),S.sort(Oi),Q){for(;H=S[j++];)H===S[j]&&(K=B.push(j));for(;K--;)S.splice(B[K],1)}return q=null,S},v=ut.getText=function(S){var H,B="",K=0,j=S.nodeType;if(j){if(1===j||9===j||11===j){if("string"==typeof S.textContent)return S.textContent;for(S=S.firstChild;S;S=S.nextSibling)B+=v(S)}else if(3===j||4===j)return S.nodeValue}else for(;H=S[K++];)B+=v(H);return B},(c=ut.selectors={cacheLength:50,createPseudo:di,match:tn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(S){return S[1]=S[1].replace(Si,bi),S[3]=(S[3]||S[4]||S[5]||"").replace(Si,bi),"~="===S[2]&&(S[3]=" "+S[3]+" "),S.slice(0,4)},CHILD:function(S){return S[1]=S[1].toLowerCase(),"nth"===S[1].slice(0,3)?(S[3]||ut.error(S[0]),S[4]=+(S[4]?S[5]+(S[6]||1):2*("even"===S[3]||"odd"===S[3])),S[5]=+(S[7]+S[8]||"odd"===S[3])):S[3]&&ut.error(S[0]),S},PSEUDO:function(S){var H,B=!S[6]&&S[2];return tn.CHILD.test(S[0])?null:(S[3]?S[2]=S[4]||S[5]||"":B&&zn.test(B)&&(H=T(B,!0))&&(H=B.indexOf(")",B.length-H)-B.length)&&(S[0]=S[0].slice(0,H),S[2]=B.slice(0,H)),S.slice(0,3))}},filter:{TAG:function(S){var H=S.replace(Si,bi).toLowerCase();return"*"===S?function(){return!0}:function(B){return B.nodeName&&B.nodeName.toLowerCase()===H}},CLASS:function(S){var H=vt[S+" "];return H||(H=new RegExp("(^|"+He+")"+S+"("+He+"|$)"))&&vt(S,function(B){return H.test("string"==typeof B.className&&B.className||void 0!==B.getAttribute&&B.getAttribute("class")||"")})},ATTR:function(S,H,B){return function(K){var j=ut.attr(K,S);return null==j?"!="===H:!H||(j+="","="===H?j===B:"!="===H?j!==B:"^="===H?B&&0===j.indexOf(B):"*="===H?B&&-1<j.indexOf(B):"$="===H?B&&j.slice(-B.length)===B:"~="===H?-1<(" "+j.replace(Pt," ")+" ").indexOf(B):"|="===H&&(j===B||j.slice(0,B.length+1)===B+"-"))}},CHILD:function(S,H,B,K,j){var te="nth"!==S.slice(0,3),ne="last"!==S.slice(-4),le="of-type"===H;return 1===K&&0===j?function(de){return!!de.parentNode}:function(de,De,Pe){var _e,Ze,bt,ke,At,Lt,qt=te!==ne?"nextSibling":"previousSibling",ht=de.parentNode,yi=le&&de.nodeName.toLowerCase(),Mt=!Pe&&!le,Ct=!1;if(ht){if(te){for(;qt;){for(ke=de;ke=ke[qt];)if(le?ke.nodeName.toLowerCase()===yi:1===ke.nodeType)return!1;Lt=qt="only"===S&&!Lt&&"nextSibling"}return!0}if(Lt=[ne?ht.firstChild:ht.lastChild],ne&&Mt){for(Ct=(At=(_e=(Ze=(bt=(ke=ht)[ot]||(ke[ot]={}))[ke.uniqueID]||(bt[ke.uniqueID]={}))[S]||[])[0]===Xt&&_e[1])&&_e[2],ke=At&&ht.childNodes[At];ke=++At&&ke&&ke[qt]||(Ct=At=0)||Lt.pop();)if(1===ke.nodeType&&++Ct&&ke===de){Ze[S]=[Xt,At,Ct];break}}else if(Mt&&(Ct=At=(_e=(Ze=(bt=(ke=de)[ot]||(ke[ot]={}))[ke.uniqueID]||(bt[ke.uniqueID]={}))[S]||[])[0]===Xt&&_e[1]),!1===Ct)for(;(ke=++At&&ke&&ke[qt]||(Ct=At=0)||Lt.pop())&&((le?ke.nodeName.toLowerCase()!==yi:1!==ke.nodeType)||!++Ct||(Mt&&((Ze=(bt=ke[ot]||(ke[ot]={}))[ke.uniqueID]||(bt[ke.uniqueID]={}))[S]=[Xt,Ct]),ke!==de)););return(Ct-=j)===K||Ct%K==0&&0<=Ct/K}}},PSEUDO:function(S,H){var B,K=c.pseudos[S]||c.setFilters[S.toLowerCase()]||ut.error("unsupported pseudo: "+S);return K[ot]?K(H):1<K.length?(B=[S,S,"",H],c.setFilters.hasOwnProperty(S.toLowerCase())?di(function(j,te){for(var ne,le=K(j,H),de=le.length;de--;)j[ne=ni(j,le[de])]=!(te[ne]=le[de])}):function(j){return K(j,0,B)}):K}},pseudos:{not:di(function(S){var H=[],B=[],K=F(S.replace(si,"$1"));return K[ot]?di(function(j,te,ne,le){for(var de,De=K(j,null,le,[]),Pe=j.length;Pe--;)(de=De[Pe])&&(j[Pe]=!(te[Pe]=de))}):function(j,te,ne){return H[0]=j,K(H,null,ne,B),H[0]=null,!B.pop()}}),has:di(function(S){return function(H){return 0<ut(S,H).length}}),contains:di(function(S){return S=S.replace(Si,bi),function(H){return-1<(H.textContent||v(H)).indexOf(S)}}),lang:di(function(S){return jn.test(S||"")||ut.error("unsupported lang: "+S),S=S.replace(Si,bi).toLowerCase(),function(H){var B;do{if(B=Se?H.lang:H.getAttribute("xml:lang")||H.getAttribute("lang"))return(B=B.toLowerCase())===S||0===B.indexOf(S+"-")}while((H=H.parentNode)&&1===H.nodeType);return!1}}),target:function(S){var H=t.location&&t.location.hash;return H&&H.slice(1)===S.id},root:function(S){return S===ge},focus:function(S){return S===V.activeElement&&(!V.hasFocus||V.hasFocus())&&!!(S.type||S.href||~S.tabIndex)},enabled:An(!1),disabled:An(!0),checked:function(S){var H=S.nodeName.toLowerCase();return"input"===H&&!!S.checked||"option"===H&&!!S.selected},selected:function(S){return!0===S.selected},empty:function(S){for(S=S.firstChild;S;S=S.nextSibling)if(S.nodeType<6)return!1;return!0},parent:function(S){return!c.pseudos.empty(S)},header:function(S){return qn.test(S.nodeName)},input:function(S){return Un.test(S.nodeName)},button:function(S){var H=S.nodeName.toLowerCase();return"input"===H&&"button"===S.type||"button"===H},text:function(S){var H;return"input"===S.nodeName.toLowerCase()&&"text"===S.type&&(null==(H=S.getAttribute("type"))||"text"===H.toLowerCase())},first:Ai(function(){return[0]}),last:Ai(function(S,H){return[H-1]}),eq:Ai(function(S,H,B){return[B<0?B+H:B]}),even:Ai(function(S,H){for(var B=0;B<H;B+=2)S.push(B);return S}),odd:Ai(function(S,H){for(var B=1;B<H;B+=2)S.push(B);return S}),lt:Ai(function(S,H,B){for(var K=B<0?B+H:H<B?H:B;0<=--K;)S.push(K);return S}),gt:Ai(function(S,H,B){for(var K=B<0?B+H:B;++K<H;)S.push(K);return S})}}).pseudos.nth=c.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[r]=Zn(r);for(r in{submit:!0,reset:!0})c.pseudos[r]=Xn(r);function Hn(){}function rn(S){for(var H=0,B=S.length,K="";H<B;H++)K+=S[H].value;return K}function sn(S,H,B){var K=H.dir,j=H.next,te=j||K,ne=B&&"parentNode"===te,le=Qe++;return H.first?function(de,De,Pe){for(;de=de[K];)if(1===de.nodeType||ne)return S(de,De,Pe);return!1}:function(de,De,Pe){var _e,Ze,bt,ke=[Xt,le];if(Pe){for(;de=de[K];)if((1===de.nodeType||ne)&&S(de,De,Pe))return!0}else for(;de=de[K];)if(1===de.nodeType||ne)if(Ze=(bt=de[ot]||(de[ot]={}))[de.uniqueID]||(bt[de.uniqueID]={}),j&&j===de.nodeName.toLowerCase())de=de[K]||de;else{if((_e=Ze[te])&&_e[0]===Xt&&_e[1]===le)return ke[2]=_e[2];if((Ze[te]=ke)[2]=S(de,De,Pe))return!0}return!1}}function yn(S){return 1<S.length?function(H,B,K){for(var j=S.length;j--;)if(!S[j](H,B,K))return!1;return!0}:S[0]}function on(S,H,B,K,j){for(var te,ne=[],le=0,de=S.length,De=null!=H;le<de;le++)(te=S[le])&&(B&&!B(te,K,j)||(ne.push(te),De&&H.push(le)));return ne}function wn(S,H,B,K,j,te){return K&&!K[ot]&&(K=wn(K)),j&&!j[ot]&&(j=wn(j,te)),di(function(ne,le,de,De){var Pe,_e,Ze,bt=[],ke=[],At=le.length,Lt=ne||function(yi,Mt,Ct){for(var pi=0,an=Mt.length;pi<an;pi++)ut(yi,Mt[pi],Ct);return Ct}(H||"*",de.nodeType?[de]:de,[]),qt=!S||!ne&&H?Lt:on(Lt,bt,S,de,De),ht=B?j||(ne?S:At||K)?[]:le:qt;if(B&&B(qt,ht,de,De),K)for(Pe=on(ht,ke),K(Pe,[],de,De),_e=Pe.length;_e--;)(Ze=Pe[_e])&&(ht[ke[_e]]=!(qt[ke[_e]]=Ze));if(ne){if(j||S){if(j){for(Pe=[],_e=ht.length;_e--;)(Ze=ht[_e])&&Pe.push(qt[_e]=Ze);j(null,ht=[],Pe,De)}for(_e=ht.length;_e--;)(Ze=ht[_e])&&-1<(Pe=j?ni(ne,Ze):bt[_e])&&(ne[Pe]=!(le[Pe]=Ze))}}else ht=on(ht===le?ht.splice(At,ht.length):ht),j?j(null,le,ht,De):yt.apply(le,ht)})}function xn(S){for(var H,B,K,j=S.length,te=c.relative[S[0].type],ne=te||c.relative[" "],le=te?1:0,de=sn(function(_e){return _e===H},ne,!0),De=sn(function(_e){return-1<ni(H,_e)},ne,!0),Pe=[function(_e,Ze,bt){var ke=!te&&(bt||Ze!==M)||((H=Ze).nodeType?de(_e,Ze,bt):De(_e,Ze,bt));return H=null,ke}];le<j;le++)if(B=c.relative[S[le].type])Pe=[sn(yn(Pe),B)];else{if((B=c.filter[S[le].type].apply(null,S[le].matches))[ot]){for(K=++le;K<j&&!c.relative[S[K].type];K++);return wn(1<le&&yn(Pe),1<le&&rn(S.slice(0,le-1).concat({value:" "===S[le-2].type?"*":""})).replace(si,"$1"),B,le<K&&xn(S.slice(le,K)),K<j&&xn(S=S.slice(K)),K<j&&rn(S))}Pe.push(B)}return yn(Pe)}return Hn.prototype=c.filters=c.pseudos,c.setFilters=new Hn,T=ut.tokenize=function(S,H){var B,K,j,te,ne,le,de,De=qi[S+" "];if(De)return H?0:De.slice(0);for(ne=S,le=[],de=c.preFilter;ne;){for(te in B&&!(K=ki.exec(ne))||(K&&(ne=ne.slice(K[0].length)||ne),le.push(j=[])),B=!1,(K=en.exec(ne))&&(B=K.shift(),j.push({value:B,type:K[0].replace(si," ")}),ne=ne.slice(B.length)),c.filter)!(K=tn[te].exec(ne))||de[te]&&!(K=de[te](K))||(B=K.shift(),j.push({value:B,type:te,matches:K}),ne=ne.slice(B.length));if(!B)break}return H?ne.length:ne?ut.error(S):qi(S,le).slice(0)},F=ut.compile=function(S,H){var B,K,j,te,ne,le,de=[],De=[],Pe=$i[S+" "];if(!Pe){for(H||(H=T(S)),B=H.length;B--;)(Pe=xn(H[B]))[ot]?de.push(Pe):De.push(Pe);(Pe=$i(S,(K=De,te=0<(j=de).length,ne=0<K.length,le=function(_e,Ze,bt,ke,At){var Lt,qt,ht,yi=0,Mt="0",Ct=_e&&[],pi=[],an=M,Ln=_e||ne&&c.find.TAG("*",At),Fn=Xt+=null==an?1:Math.random()||.1,Yn=Ln.length;for(At&&(M=Ze==V||Ze||At);Mt!==Yn&&null!=(Lt=Ln[Mt]);Mt++){if(ne&&Lt){for(qt=0,Ze||Lt.ownerDocument==V||(U(Lt),bt=!Se);ht=K[qt++];)if(ht(Lt,Ze||V,bt)){ke.push(Lt);break}At&&(Xt=Fn)}te&&((Lt=!ht&&Lt)&&yi--,_e&&Ct.push(Lt))}if(yi+=Mt,te&&Mt!==yi){for(qt=0;ht=j[qt++];)ht(Ct,pi,Ze,bt);if(_e){if(0<yi)for(;Mt--;)Ct[Mt]||pi[Mt]||(pi[Mt]=Fi.call(ke));pi=on(pi)}yt.apply(ke,pi),At&&!_e&&0<pi.length&&1<yi+j.length&&ut.uniqueSort(ke)}return At&&(Xt=Fn,M=an),Ct},te?di(le):le))).selector=S}return Pe},L=ut.select=function(S,H,B,K){var j,te,ne,le,de,De="function"==typeof S&&S,Pe=!K&&T(S=De.selector||S);if(B=B||[],1===Pe.length){if(2<(te=Pe[0]=Pe[0].slice(0)).length&&"ID"===(ne=te[0]).type&&9===H.nodeType&&Se&&c.relative[te[1].type]){if(!(H=(c.find.ID(ne.matches[0].replace(Si,bi),H)||[])[0]))return B;De&&(H=H.parentNode),S=S.slice(te.shift().value.length)}for(j=tn.needsContext.test(S)?0:te.length;j--&&!c.relative[le=(ne=te[j]).type];)if((de=c.find[le])&&(K=de(ne.matches[0].replace(Si,bi),gn.test(te[0].type)&&vn(H.parentNode)||H))){if(te.splice(j,1),!(S=K.length&&rn(te)))return yt.apply(B,K),B;break}}return(De||F(S,Pe))(K,H,!Se,B,!H||gn.test(S)&&vn(H.parentNode)||H),B},u.sortStable=ot.split("").sort(Oi).join("")===ot,u.detectDuplicates=!!Q,U(),u.sortDetached=fi(function(S){return 1&S.compareDocumentPosition(V.createElement("fieldset"))}),fi(function(S){return S.innerHTML="<a href='#'></a>","#"===S.firstChild.getAttribute("href")})||mn("type|href|height|width",function(S,H,B){if(!B)return S.getAttribute(H,"type"===H.toLowerCase()?1:2)}),u.attributes&&fi(function(S){return S.innerHTML="<input/>",S.firstChild.setAttribute("value",""),""===S.firstChild.getAttribute("value")})||mn("value",function(S,H,B){if(!B&&"input"===S.nodeName.toLowerCase())return S.defaultValue}),fi(function(S){return null==S.getAttribute("disabled")})||mn(vi,function(S,H,B){var K;if(!B)return!0===S[H]?H.toLowerCase():(K=S.getAttributeNode(H))&&K.specified?K.value:null}),ut}(e);h.find=ye,h.expr=ye.selectors,h.expr[":"]=h.expr.pseudos,h.uniqueSort=h.unique=ye.uniqueSort,h.text=ye.getText,h.isXMLDoc=ye.isXML,h.contains=ye.contains,h.escapeSelector=ye.escape;var Oe=function(t,r,u){for(var c=[],v=void 0!==u;(t=t[r])&&9!==t.nodeType;)if(1===t.nodeType){if(v&&h(t).is(u))break;c.push(t)}return c},Re=function(t,r){for(var u=[];t;t=t.nextSibling)1===t.nodeType&&t!==r&&u.push(t);return u},qe=h.expr.match.needsContext;function Ie(t,r){return t.nodeName&&t.nodeName.toLowerCase()===r.toLowerCase()}var nt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Nt(t,r,u){return E(r)?h.grep(t,function(c,v){return!!r.call(c,v,c)!==u}):r.nodeType?h.grep(t,function(c){return c===r!==u}):"string"!=typeof r?h.grep(t,function(c){return-1<a.call(r,c)!==u}):h.filter(r,t,u)}h.filter=function(t,r,u){var c=r[0];return u&&(t=":not("+t+")"),1===r.length&&1===c.nodeType?h.find.matchesSelector(c,t)?[c]:[]:h.find.matches(t,h.grep(r,function(v){return 1===v.nodeType}))},h.fn.extend({find:function(t){var r,u,c=this.length,v=this;if("string"!=typeof t)return this.pushStack(h(t).filter(function(){for(r=0;r<c;r++)if(h.contains(v[r],this))return!0}));for(u=this.pushStack([]),r=0;r<c;r++)h.find(t,v[r],u);return 1<c?h.uniqueSort(u):u},filter:function(t){return this.pushStack(Nt(this,t||[],!1))},not:function(t){return this.pushStack(Nt(this,t||[],!0))},is:function(t){return!!Nt(this,"string"==typeof t&&qe.test(t)?h(t):t||[],!1).length}});var wt,Ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(h.fn.init=function(t,r,u){var c,v;if(!t)return this;if(u=u||wt,"string"==typeof t){if(!(c="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:Ve.exec(t))||!c[1]&&r)return!r||r.jquery?(r||u).find(t):this.constructor(r).find(t);if(c[1]){if(h.merge(this,h.parseHTML(c[1],(r=r instanceof h?r[0]:r)&&r.nodeType?r.ownerDocument||r:D,!0)),nt.test(c[1])&&h.isPlainObject(r))for(c in r)E(this[c])?this[c](r[c]):this.attr(c,r[c]);return this}return(v=D.getElementById(c[2]))&&(this[0]=v,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):E(t)?void 0!==u.ready?u.ready(t):t(h):h.makeArray(t,this)}).prototype=h.fn,wt=h(D);var at=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};function xt(t,r){for(;(t=t[r])&&1!==t.nodeType;);return t}h.fn.extend({has:function(t){var r=h(t,this),u=r.length;return this.filter(function(){for(var c=0;c<u;c++)if(h.contains(this,r[c]))return!0})},closest:function(t,r){var u,c=0,v=this.length,x=[],T="string"!=typeof t&&h(t);if(!qe.test(t))for(;c<v;c++)for(u=this[c];u&&u!==r;u=u.parentNode)if(u.nodeType<11&&(T?-1<T.index(u):1===u.nodeType&&h.find.matchesSelector(u,t))){x.push(u);break}return this.pushStack(1<x.length?h.uniqueSort(x):x)},index:function(t){return t?"string"==typeof t?a.call(h(t),this[0]):a.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,r){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(t,r))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),h.each({parent:function(t){var r=t.parentNode;return r&&11!==r.nodeType?r:null},parents:function(t){return Oe(t,"parentNode")},parentsUntil:function(t,r,u){return Oe(t,"parentNode",u)},next:function(t){return xt(t,"nextSibling")},prev:function(t){return xt(t,"previousSibling")},nextAll:function(t){return Oe(t,"nextSibling")},prevAll:function(t){return Oe(t,"previousSibling")},nextUntil:function(t,r,u){return Oe(t,"nextSibling",u)},prevUntil:function(t,r,u){return Oe(t,"previousSibling",u)},siblings:function(t){return Re((t.parentNode||{}).firstChild,t)},children:function(t){return Re(t.firstChild)},contents:function(t){return null!=t.contentDocument&&l(t.contentDocument)?t.contentDocument:(Ie(t,"template")&&(t=t.content||t),h.merge([],t.childNodes))}},function(t,r){h.fn[t]=function(u,c){var v=h.map(this,r,u);return"Until"!==t.slice(-5)&&(c=u),c&&"string"==typeof c&&(v=h.filter(c,v)),1<this.length&&(_t[t]||h.uniqueSort(v),at.test(t)&&v.reverse()),this.pushStack(v)}});var st=/[^\x20\t\r\n\f]+/g;function zt(t){return t}function Ee(t){throw t}function jt(t,r,u,c){var v;try{t&&E(v=t.promise)?v.call(t).done(r).fail(u):t&&E(v=t.then)?v.call(t,r,u):r.apply(void 0,[t].slice(c))}catch(x){u.apply(void 0,[x])}}h.Callbacks=function(t){var u;t="string"==typeof t?(u={},h.each(t.match(st)||[],function(U,V){u[V]=!0}),u):h.extend({},t);var c,v,x,T,F=[],L=[],M=-1,q=function(){for(T=T||t.once,x=c=!0;L.length;M=-1)for(v=L.shift();++M<F.length;)!1===F[M].apply(v[0],v[1])&&t.stopOnFalse&&(M=F.length,v=!1);t.memory||(v=!1),c=!1,T&&(F=v?[]:"")},Q={add:function(){return F&&(v&&!c&&(M=F.length-1,L.push(v)),function U(V){h.each(V,function(ge,Se){E(Se)?t.unique&&Q.has(Se)||F.push(Se):Se&&Se.length&&"string"!==X(Se)&&U(Se)})}(arguments),v&&!c&&q()),this},remove:function(){return h.each(arguments,function(U,V){for(var ge;-1<(ge=h.inArray(V,F,ge));)F.splice(ge,1),ge<=M&&M--}),this},has:function(U){return U?-1<h.inArray(U,F):0<F.length},empty:function(){return F&&(F=[]),this},disable:function(){return T=L=[],F=v="",this},disabled:function(){return!F},lock:function(){return T=L=[],v||c||(F=v=""),this},locked:function(){return!!T},fireWith:function(U,V){return T||(V=[U,(V=V||[]).slice?V.slice():V],L.push(V),c||q()),this},fire:function(){return Q.fireWith(this,arguments),this},fired:function(){return!!x}};return Q},h.extend({Deferred:function(t){var r=[["notify","progress",h.Callbacks("memory"),h.Callbacks("memory"),2],["resolve","done",h.Callbacks("once memory"),h.Callbacks("once memory"),0,"resolved"],["reject","fail",h.Callbacks("once memory"),h.Callbacks("once memory"),1,"rejected"]],u="pending",c={state:function(){return u},always:function(){return v.done(arguments).fail(arguments),this},catch:function(x){return c.then(null,x)},pipe:function(){var x=arguments;return h.Deferred(function(T){h.each(r,function(F,L){var M=E(x[L[4]])&&x[L[4]];v[L[1]](function(){var q=M&&M.apply(this,arguments);q&&E(q.promise)?q.promise().progress(T.notify).done(T.resolve).fail(T.reject):T[L[0]+"With"](this,M?[q]:arguments)})}),x=null}).promise()},then:function(x,T,F){var L=0;function M(q,Q,U,V){return function(){var ge=this,Se=arguments,ve=function(){var Dt,ei;if(!(q<L)){if((Dt=U.apply(ge,Se))===Q.promise())throw new TypeError("Thenable self-resolution");E(ei=Dt&&("object"==typeof Dt||"function"==typeof Dt)&&Dt.then)?V?ei.call(Dt,M(L,Q,zt,V),M(L,Q,Ee,V)):(L++,ei.call(Dt,M(L,Q,zt,V),M(L,Q,Ee,V),M(L,Q,zt,Q.notifyWith))):(U!==zt&&(ge=void 0,Se=[Dt]),(V||Q.resolveWith)(ge,Se))}},mt=V?ve:function(){try{ve()}catch(Dt){h.Deferred.exceptionHook&&h.Deferred.exceptionHook(Dt,mt.stackTrace),L<=q+1&&(U!==Ee&&(ge=void 0,Se=[Dt]),Q.rejectWith(ge,Se))}};q?mt():(h.Deferred.getStackHook&&(mt.stackTrace=h.Deferred.getStackHook()),e.setTimeout(mt))}}return h.Deferred(function(q){r[0][3].add(M(0,q,E(F)?F:zt,q.notifyWith)),r[1][3].add(M(0,q,E(x)?x:zt)),r[2][3].add(M(0,q,E(T)?T:Ee))}).promise()},promise:function(x){return null!=x?h.extend(x,c):c}},v={};return h.each(r,function(x,T){var F=T[2],L=T[5];c[T[1]]=F.add,L&&F.add(function(){u=L},r[3-x][2].disable,r[3-x][3].disable,r[0][2].lock,r[0][3].lock),F.add(T[3].fire),v[T[0]]=function(){return v[T[0]+"With"](this===v?void 0:this,arguments),this},v[T[0]+"With"]=F.fireWith}),c.promise(v),t&&t.call(v,v),v},when:function(t){var r=arguments.length,u=r,c=Array(u),v=d.call(arguments),x=h.Deferred(),T=function(F){return function(L){c[F]=this,v[F]=1<arguments.length?d.call(arguments):L,--r||x.resolveWith(c,v)}};if(r<=1&&(jt(t,x.done(T(u)).resolve,x.reject,!r),"pending"===x.state()||E(v[u]&&v[u].then)))return x.then();for(;u--;)jt(v[u],T(u),x.reject);return x.promise()}});var Tt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;h.Deferred.exceptionHook=function(t,r){e.console&&e.console.warn&&t&&Tt.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,r)},h.readyException=function(t){e.setTimeout(function(){throw t})};var It=h.Deferred();function Rt(){D.removeEventListener("DOMContentLoaded",Rt),e.removeEventListener("load",Rt),h.ready()}h.fn.ready=function(t){return It.then(t).catch(function(r){h.readyException(r)}),this},h.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--h.readyWait:h.isReady)||(h.isReady=!0)!==t&&0<--h.readyWait||It.resolveWith(D,[h])}}),h.ready.then=It.then,"complete"===D.readyState||"loading"!==D.readyState&&!D.documentElement.doScroll?e.setTimeout(h.ready):(D.addEventListener("DOMContentLoaded",Rt),e.addEventListener("load",Rt));var Et=function(t,r,u,c,v,x,T){var F=0,L=t.length,M=null==u;if("object"===X(u))for(F in v=!0,u)Et(t,r,F,u[F],!0,x,T);else if(void 0!==c&&(v=!0,E(c)||(T=!0),M&&(T?(r.call(t,c),r=null):(M=r,r=function(q,Q,U){return M.call(h(q),U)})),r))for(;F<L;F++)r(t[F],u,T?c:c.call(t[F],F,r(t[F],u)));return v?t:M?r.call(t):L?r(t[0],u):x},oi=/^-ms-/,Ft=/-([a-z])/g;function ai(t,r){return r.toUpperCase()}function St(t){return t.replace(oi,"ms-").replace(Ft,ai)}var li=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Kt(){this.expando=h.expando+Kt.uid++}Kt.uid=1,Kt.prototype={cache:function(t){var r=t[this.expando];return r||(r={},li(t)&&(t.nodeType?t[this.expando]=r:Object.defineProperty(t,this.expando,{value:r,configurable:!0}))),r},set:function(t,r,u){var c,v=this.cache(t);if("string"==typeof r)v[St(r)]=u;else for(c in r)v[St(c)]=r[c];return v},get:function(t,r){return void 0===r?this.cache(t):t[this.expando]&&t[this.expando][St(r)]},access:function(t,r,u){return void 0===r||r&&"string"==typeof r&&void 0===u?this.get(t,r):(this.set(t,r,u),void 0!==u?u:r)},remove:function(t,r){var u,c=t[this.expando];if(void 0!==c){if(void 0!==r)for((u=(r=Array.isArray(r)?r.map(St):(r=St(r))in c?[r]:r.match(st)||[]).length);u--;)delete c[r[u]];(void 0===r||h.isEmptyObject(c))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var r=t[this.expando];return void 0!==r&&!h.isEmptyObject(r)}};var we=new Kt,pt=new Kt,f=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,R=/[A-Z]/g;function z(t,r,u){var c,v;if(void 0===u&&1===t.nodeType)if(c="data-"+r.replace(R,"-$&").toLowerCase(),"string"==typeof(u=t.getAttribute(c))){try{u="true"===(v=u)||"false"!==v&&("null"===v?null:v===+v+""?+v:f.test(v)?JSON.parse(v):v)}catch(x){}pt.set(t,r,u)}else u=void 0;return u}h.extend({hasData:function(t){return pt.hasData(t)||we.hasData(t)},data:function(t,r,u){return pt.access(t,r,u)},removeData:function(t,r){pt.remove(t,r)},_data:function(t,r,u){return we.access(t,r,u)},_removeData:function(t,r){we.remove(t,r)}}),h.fn.extend({data:function(t,r){var u,c,v,x=this[0],T=x&&x.attributes;if(void 0===t){if(this.length&&(v=pt.get(x),1===x.nodeType&&!we.get(x,"hasDataAttrs"))){for(u=T.length;u--;)T[u]&&0===(c=T[u].name).indexOf("data-")&&(c=St(c.slice(5)),z(x,c,v[c]));we.set(x,"hasDataAttrs",!0)}return v}return"object"==typeof t?this.each(function(){pt.set(this,t)}):Et(this,function(F){var L;if(x&&void 0===F)return void 0!==(L=pt.get(x,t))||void 0!==(L=z(x,t))?L:void 0;this.each(function(){pt.set(this,t,F)})},null,r,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){pt.remove(this,t)})}}),h.extend({queue:function(t,r,u){var c;if(t)return c=we.get(t,r=(r||"fx")+"queue"),u&&(!c||Array.isArray(u)?c=we.access(t,r,h.makeArray(u)):c.push(u)),c||[]},dequeue:function(t,r){var u=h.queue(t,r=r||"fx"),c=u.length,v=u.shift(),x=h._queueHooks(t,r);"inprogress"===v&&(v=u.shift(),c--),v&&("fx"===r&&u.unshift("inprogress"),delete x.stop,v.call(t,function(){h.dequeue(t,r)},x)),!c&&x&&x.empty.fire()},_queueHooks:function(t,r){var u=r+"queueHooks";return we.get(t,u)||we.access(t,u,{empty:h.Callbacks("once memory").add(function(){we.remove(t,[r+"queue",u])})})}}),h.fn.extend({queue:function(t,r){var u=2;return"string"!=typeof t&&(r=t,t="fx",u--),arguments.length<u?h.queue(this[0],t):void 0===r?this:this.each(function(){var c=h.queue(this,t,r);h._queueHooks(this,t),"fx"===t&&"inprogress"!==c[0]&&h.dequeue(this,t)})},dequeue:function(t){return this.each(function(){h.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,r){var u,c=1,v=h.Deferred(),x=this,T=this.length,F=function(){--c||v.resolveWith(x,[x])};for("string"!=typeof t&&(r=t,t=void 0),t=t||"fx";T--;)(u=we.get(x[T],t+"queueHooks"))&&u.empty&&(c++,u.empty.add(F));return F(),v.promise(r)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),me=["Top","Right","Bottom","Left"],ae=D.documentElement,Ne=function(t){return h.contains(t.ownerDocument,t)},Ye={composed:!0};ae.getRootNode&&(Ne=function(t){return h.contains(t.ownerDocument,t)||t.getRootNode(Ye)===t.ownerDocument});var Ke=function(t,r){return"none"===(t=r||t).style.display||""===t.style.display&&Ne(t)&&"none"===h.css(t,"display")};function Ce(t,r,u,c){var v,x,T=20,F=c?function(){return c.cur()}:function(){return h.css(t,r,"")},L=F(),M=u&&u[3]||(h.cssNumber[r]?"":"px"),q=t.nodeType&&(h.cssNumber[r]||"px"!==M&&+L)&&$.exec(h.css(t,r));if(q&&q[3]!==M){for(M=M||q[3],q=+(L/=2)||1;T--;)h.style(t,r,q+M),(1-x)*(1-(x=F()/L||.5))<=0&&(T=0),q/=x;h.style(t,r,(q*=2)+M),u=u||[]}return u&&(q=+q||+L||0,v=u[1]?q+(u[1]+1)*u[2]:+u[2],c&&(c.unit=M,c.start=q,c.end=v)),v}var rt={};function Be(t,r){for(var u,c,v,x,T,F,L,M=[],q=0,Q=t.length;q<Q;q++)(c=t[q]).style&&(u=c.style.display,r?("none"===u&&(M[q]=we.get(c,"display")||null,M[q]||(c.style.display="")),""===c.style.display&&Ke(c)&&(M[q]=(L=T=x=void 0,T=(v=c).ownerDocument,(L=rt[F=v.nodeName])||(x=T.body.appendChild(T.createElement(F)),L=h.css(x,"display"),x.parentNode.removeChild(x),"none"===L&&(L="block"),rt[F]=L)))):"none"!==u&&(M[q]="none",we.set(c,"display",u)));for(q=0;q<Q;q++)null!=M[q]&&(t[q].style.display=M[q]);return t}h.fn.extend({show:function(){return Be(this,!0)},hide:function(){return Be(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ke(this)?h(this).show():h(this).hide()})}});var m,g,b=/^(?:checkbox|radio)$/i,P=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,G=/^$|^module$|\/(?:java|ecma)script/i;m=D.createDocumentFragment().appendChild(D.createElement("div")),(g=D.createElement("input")).setAttribute("type","radio"),g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),A.checkClone=m.cloneNode(!0).cloneNode(!0).lastChild.checked,m.innerHTML="<textarea>x</textarea>",A.noCloneChecked=!!m.cloneNode(!0).lastChild.defaultValue,m.innerHTML="<option></option>",A.option=!!m.lastChild;var J={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(t,r){var u;return u=void 0!==t.getElementsByTagName?t.getElementsByTagName(r||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(r||"*"):[],void 0===r||r&&Ie(t,r)?h.merge([t],u):u}function Ue(t,r){for(var u=0,c=t.length;u<c;u++)we.set(t[u],"globalEval",!r||we.get(r[u],"globalEval"))}J.tbody=J.tfoot=J.colgroup=J.caption=J.thead,J.th=J.td,A.option||(J.optgroup=J.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function Ht(t,r,u,c,v){for(var x,T,F,L,M,q,Q=r.createDocumentFragment(),U=[],V=0,ge=t.length;V<ge;V++)if((x=t[V])||0===x)if("object"===X(x))h.merge(U,x.nodeType?[x]:x);else if(be.test(x)){for(T=T||Q.appendChild(r.createElement("div")),F=(P.exec(x)||["",""])[1].toLowerCase(),T.innerHTML=(L=J[F]||J._default)[1]+h.htmlPrefilter(x)+L[2],q=L[0];q--;)T=T.lastChild;h.merge(U,T.childNodes),(T=Q.firstChild).textContent=""}else U.push(r.createTextNode(x));for(Q.textContent="",V=0;x=U[V++];)if(c&&-1<h.inArray(x,c))v&&v.push(x);else if(M=Ne(x),T=pe(Q.appendChild(x),"script"),M&&Ue(T),u)for(q=0;x=T[q++];)G.test(x.type||"")&&u.push(x);return Q}var ft=/^([^.]*)(?:\.(.+)|)/;function Wt(){return!0}function k(){return!1}function I(t,r){return t===function(){try{return D.activeElement}catch(u){}}()==("focus"===r)}function W(t,r,u,c,v,x){var T,F;if("object"==typeof r){for(F in"string"!=typeof u&&(c=c||u,u=void 0),r)W(t,F,u,c,r[F],x);return t}if(null==c&&null==v?(v=u,c=u=void 0):null==v&&("string"==typeof u?(v=c,c=void 0):(v=c,c=u,u=void 0)),!1===v)v=k;else if(!v)return t;return 1===x&&(T=v,(v=function(L){return h().off(L),T.apply(this,arguments)}).guid=T.guid||(T.guid=h.guid++)),t.each(function(){h.event.add(this,r,v,c,u)})}function Y(t,r,u){u?(we.set(t,r,!1),h.event.add(t,r,{namespace:!1,handler:function(c){var v,x,T=we.get(this,r);if(1&c.isTrigger&&this[r]){if(T.length)(h.event.special[r]||{}).delegateType&&c.stopPropagation();else if(T=d.call(arguments),we.set(this,r,T),v=u(this,r),this[r](),T!==(x=we.get(this,r))||v?we.set(this,r,!1):x={},T!==x)return c.stopImmediatePropagation(),c.preventDefault(),x&&x.value}else T.length&&(we.set(this,r,{value:h.event.trigger(h.extend(T[0],h.Event.prototype),T.slice(1),this)}),c.stopImmediatePropagation())}})):void 0===we.get(t,r)&&h.event.add(t,r,Wt)}h.event={global:{},add:function(t,r,u,c,v){var x,T,F,L,M,q,Q,U,V,ge,Se,ve=we.get(t);if(li(t))for(u.handler&&(u=(x=u).handler,v=x.selector),v&&h.find.matchesSelector(ae,v),u.guid||(u.guid=h.guid++),(L=ve.events)||(L=ve.events=Object.create(null)),(T=ve.handle)||(T=ve.handle=function(mt){return void 0!==h&&h.event.triggered!==mt.type?h.event.dispatch.apply(t,arguments):void 0}),M=(r=(r||"").match(st)||[""]).length;M--;)V=Se=(F=ft.exec(r[M])||[])[1],ge=(F[2]||"").split(".").sort(),V&&(Q=h.event.special[V]||{},Q=h.event.special[V=(v?Q.delegateType:Q.bindType)||V]||{},q=h.extend({type:V,origType:Se,data:c,handler:u,guid:u.guid,selector:v,needsContext:v&&h.expr.match.needsContext.test(v),namespace:ge.join(".")},x),(U=L[V])||((U=L[V]=[]).delegateCount=0,Q.setup&&!1!==Q.setup.call(t,c,ge,T)||t.addEventListener&&t.addEventListener(V,T)),Q.add&&(Q.add.call(t,q),q.handler.guid||(q.handler.guid=u.guid)),v?U.splice(U.delegateCount++,0,q):U.push(q),h.event.global[V]=!0)},remove:function(t,r,u,c,v){var x,T,F,L,M,q,Q,U,V,ge,Se,ve=we.hasData(t)&&we.get(t);if(ve&&(L=ve.events)){for(M=(r=(r||"").match(st)||[""]).length;M--;)if(V=Se=(F=ft.exec(r[M])||[])[1],ge=(F[2]||"").split(".").sort(),V){for(Q=h.event.special[V]||{},U=L[V=(c?Q.delegateType:Q.bindType)||V]||[],F=F[2]&&new RegExp("(^|\\.)"+ge.join("\\.(?:.*\\.|)")+"(\\.|$)"),T=x=U.length;x--;)q=U[x],!v&&Se!==q.origType||u&&u.guid!==q.guid||F&&!F.test(q.namespace)||c&&c!==q.selector&&("**"!==c||!q.selector)||(U.splice(x,1),q.selector&&U.delegateCount--,Q.remove&&Q.remove.call(t,q));T&&!U.length&&(Q.teardown&&!1!==Q.teardown.call(t,ge,ve.handle)||h.removeEvent(t,V,ve.handle),delete L[V])}else for(V in L)h.event.remove(t,V+r[M],u,c,!0);h.isEmptyObject(L)&&we.remove(t,"handle events")}},dispatch:function(t){var r,u,c,v,x,T,F=new Array(arguments.length),L=h.event.fix(t),M=(we.get(this,"events")||Object.create(null))[L.type]||[],q=h.event.special[L.type]||{};for(F[0]=L,r=1;r<arguments.length;r++)F[r]=arguments[r];if(L.delegateTarget=this,!q.preDispatch||!1!==q.preDispatch.call(this,L)){for(T=h.event.handlers.call(this,L,M),r=0;(v=T[r++])&&!L.isPropagationStopped();)for(L.currentTarget=v.elem,u=0;(x=v.handlers[u++])&&!L.isImmediatePropagationStopped();)L.rnamespace&&!1!==x.namespace&&!L.rnamespace.test(x.namespace)||(L.handleObj=x,L.data=x.data,void 0!==(c=((h.event.special[x.origType]||{}).handle||x.handler).apply(v.elem,F))&&!1===(L.result=c)&&(L.preventDefault(),L.stopPropagation()));return q.postDispatch&&q.postDispatch.call(this,L),L.result}},handlers:function(t,r){var u,c,v,x,T,F=[],L=r.delegateCount,M=t.target;if(L&&M.nodeType&&!("click"===t.type&&1<=t.button))for(;M!==this;M=M.parentNode||this)if(1===M.nodeType&&("click"!==t.type||!0!==M.disabled)){for(x=[],T={},u=0;u<L;u++)void 0===T[v=(c=r[u]).selector+" "]&&(T[v]=c.needsContext?-1<h(v,this).index(M):h.find(v,this,null,[M]).length),T[v]&&x.push(c);x.length&&F.push({elem:M,handlers:x})}return M=this,L<r.length&&F.push({elem:M,handlers:r.slice(L)}),F},addProp:function(t,r){Object.defineProperty(h.Event.prototype,t,{enumerable:!0,configurable:!0,get:E(r)?function(){if(this.originalEvent)return r(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(u){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(t){return t[h.expando]?t:new h.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var r=this||t;return b.test(r.type)&&r.click&&Ie(r,"input")&&Y(r,"click",Wt),!1},trigger:function(t){var r=this||t;return b.test(r.type)&&r.click&&Ie(r,"input")&&Y(r,"click"),!0},_default:function(t){var r=t.target;return b.test(r.type)&&r.click&&Ie(r,"input")&&we.get(r,"click")||Ie(r,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},h.removeEvent=function(t,r,u){t.removeEventListener&&t.removeEventListener(r,u)},h.Event=function(t,r){if(!(this instanceof h.Event))return new h.Event(t,r);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Wt:k,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,r&&h.extend(this,r),this.timeStamp=t&&t.timeStamp||Date.now(),this[h.expando]=!0},h.Event.prototype={constructor:h.Event,isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},h.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},h.event.addProp),h.each({focus:"focusin",blur:"focusout"},function(t,r){h.event.special[t]={setup:function(){return Y(this,t,I),!1},trigger:function(){return Y(this,t),!0},_default:function(u){return we.get(u.target,t)},delegateType:r}}),h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,r){h.event.special[t]={delegateType:r,bindType:r,handle:function(u){var c,v=u.relatedTarget,x=u.handleObj;return v&&(v===this||h.contains(this,v))||(u.type=x.origType,c=x.handler.apply(this,arguments),u.type=r),c}}}),h.fn.extend({on:function(t,r,u,c){return W(this,t,r,u,c)},one:function(t,r,u,c){return W(this,t,r,u,c,1)},off:function(t,r,u){var c,v;if(t&&t.preventDefault&&t.handleObj)return c=t.handleObj,h(t.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if("object"==typeof t){for(v in t)this.off(v,r,t[v]);return this}return!1!==r&&"function"!=typeof r||(u=r,r=void 0),!1===u&&(u=k),this.each(function(){h.event.remove(this,t,u,r)})}});var he=/<script|<style|<link/i,ie=/checked\s*(?:[^=]|=\s*.checked.)/i,ce=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function oe(t,r){return Ie(t,"table")&&Ie(11!==r.nodeType?r:r.firstChild,"tr")&&h(t).children("tbody")[0]||t}function ue(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Te(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function xe(t,r){var u,c,v,x,T,F;if(1===r.nodeType){if(we.hasData(t)&&(F=we.get(t).events))for(v in we.remove(r,"handle events"),F)for(u=0,c=F[v].length;u<c;u++)h.event.add(r,v,F[v][u]);pt.hasData(t)&&(x=pt.access(t),T=h.extend({},x),pt.set(r,T))}}function fe(t,r,u,c){r=s(r);var v,x,T,F,L,M,q=0,Q=t.length,U=Q-1,V=r[0],ge=E(V);if(ge||1<Q&&"string"==typeof V&&!A.checkClone&&ie.test(V))return t.each(function(Se){var ve=t.eq(Se);ge&&(r[0]=V.call(this,Se,ve.html())),fe(ve,r,u,c)});if(Q&&(x=(v=Ht(r,t[0].ownerDocument,!1,t,c)).firstChild,1===v.childNodes.length&&(v=x),x||c)){for(F=(T=h.map(pe(v,"script"),ue)).length;q<Q;q++)L=v,q!==U&&(L=h.clone(L,!0,!0),F&&h.merge(T,pe(L,"script"))),u.call(t[q],L,q);if(F)for(M=T[T.length-1].ownerDocument,h.map(T,Te),q=0;q<F;q++)G.test((L=T[q]).type||"")&&!we.access(L,"globalEval")&&h.contains(M,L)&&(L.src&&"module"!==(L.type||"").toLowerCase()?h._evalUrl&&!L.noModule&&h._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},M):Z(L.textContent.replace(ce,""),L,M))}return t}function Xe(t,r,u){for(var c,v=r?h.filter(r,t):t,x=0;null!=(c=v[x]);x++)u||1!==c.nodeType||h.cleanData(pe(c)),c.parentNode&&(u&&Ne(c)&&Ue(pe(c,"script")),c.parentNode.removeChild(c));return t}h.extend({htmlPrefilter:function(t){return t},clone:function(t,r,u){var c,v,x,T,F,L,M,q=t.cloneNode(!0),Q=Ne(t);if(!(A.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||h.isXMLDoc(t)))for(T=pe(q),c=0,v=(x=pe(t)).length;c<v;c++)F=x[c],"input"===(M=(L=T[c]).nodeName.toLowerCase())&&b.test(F.type)?L.checked=F.checked:"input"!==M&&"textarea"!==M||(L.defaultValue=F.defaultValue);if(r)if(u)for(x=x||pe(t),T=T||pe(q),c=0,v=x.length;c<v;c++)xe(x[c],T[c]);else xe(t,q);return 0<(T=pe(q,"script")).length&&Ue(T,!Q&&pe(t,"script")),q},cleanData:function(t){for(var r,u,c,v=h.event.special,x=0;void 0!==(u=t[x]);x++)if(li(u)){if(r=u[we.expando]){if(r.events)for(c in r.events)v[c]?h.event.remove(u,c):h.removeEvent(u,c,r.handle);u[we.expando]=void 0}u[pt.expando]&&(u[pt.expando]=void 0)}}}),h.fn.extend({detach:function(t){return Xe(this,t,!0)},remove:function(t){return Xe(this,t)},text:function(t){return Et(this,function(r){return void 0===r?h.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=r)})},null,t,arguments.length)},append:function(){return fe(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||oe(this,t).appendChild(t)})},prepend:function(){return fe(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var r=oe(this,t);r.insertBefore(t,r.firstChild)}})},before:function(){return fe(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return fe(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,r=0;null!=(t=this[r]);r++)1===t.nodeType&&(h.cleanData(pe(t,!1)),t.textContent="");return this},clone:function(t,r){return t=null!=t&&t,r=null==r?t:r,this.map(function(){return h.clone(this,t,r)})},html:function(t){return Et(this,function(r){var u=this[0]||{},c=0,v=this.length;if(void 0===r&&1===u.nodeType)return u.innerHTML;if("string"==typeof r&&!he.test(r)&&!J[(P.exec(r)||["",""])[1].toLowerCase()]){r=h.htmlPrefilter(r);try{for(;c<v;c++)1===(u=this[c]||{}).nodeType&&(h.cleanData(pe(u,!1)),u.innerHTML=r);u=0}catch(x){}}u&&this.empty().append(r)},null,t,arguments.length)},replaceWith:function(){var t=[];return fe(this,arguments,function(r){var u=this.parentNode;h.inArray(this,t)<0&&(h.cleanData(pe(this)),u&&u.replaceChild(r,this))},t)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,r){h.fn[t]=function(u){for(var c,v=[],x=h(u),T=x.length-1,F=0;F<=T;F++)c=F===T?this:this.clone(!0),h(x[F])[r](c),o.apply(v,c.get());return this.pushStack(v)}});var Le=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),ze=/^--/,We=function(t){var r=t.ownerDocument.defaultView;return r&&r.opener||(r=e),r.getComputedStyle(t)},Me=function(t,r,u){var c,v,x={};for(v in r)x[v]=t.style[v],t.style[v]=r[v];for(v in c=u.call(t),r)t.style[v]=x[v];return c},dt=new RegExp(me.join("|"),"i"),lt="[\\x20\\t\\r\\n\\f]",$e=new RegExp("^"+lt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+lt+"+$","g");function Ge(t,r,u){var c,v,x,T,F=ze.test(r),L=t.style;return(u=u||We(t))&&(T=u.getPropertyValue(r)||u[r],F&&(T=T.replace($e,"$1")),""!==T||Ne(t)||(T=h.style(t,r)),!A.pixelBoxStyles()&&Le.test(T)&&dt.test(r)&&(c=L.width,v=L.minWidth,x=L.maxWidth,L.minWidth=L.maxWidth=L.width=T,T=u.width,L.width=c,L.minWidth=v,L.maxWidth=x)),void 0!==T?T+"":T}function Fe(t,r){return{get:function(){if(!t())return(this.get=r).apply(this,arguments);delete this.get}}}!function(){function t(){if(M){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",M.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(L).appendChild(M);var q=e.getComputedStyle(M);u="1%"!==q.top,F=12===r(q.marginLeft),M.style.right="60%",x=36===r(q.right),c=36===r(q.width),M.style.position="absolute",v=12===r(M.offsetWidth/3),ae.removeChild(L),M=null}}function r(q){return Math.round(parseFloat(q))}var u,c,v,x,T,F,L=D.createElement("div"),M=D.createElement("div");M.style&&(M.style.backgroundClip="content-box",M.cloneNode(!0).style.backgroundClip="",A.clearCloneStyle="content-box"===M.style.backgroundClip,h.extend(A,{boxSizingReliable:function(){return t(),c},pixelBoxStyles:function(){return t(),x},pixelPosition:function(){return t(),u},reliableMarginLeft:function(){return t(),F},scrollboxSize:function(){return t(),v},reliableTrDimensions:function(){var q,Q,U,V;return null==T&&(q=D.createElement("table"),Q=D.createElement("tr"),U=D.createElement("div"),q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Q.style.cssText="border:1px solid",Q.style.height="1px",U.style.height="9px",U.style.display="block",ae.appendChild(q).appendChild(Q).appendChild(U),V=e.getComputedStyle(Q),T=parseInt(V.height,10)+parseInt(V.borderTopWidth,10)+parseInt(V.borderBottomWidth,10)===Q.offsetHeight,ae.removeChild(q)),T}}))}();var je=["Webkit","Moz","ms"],et=D.createElement("div").style,tt={};function Je(t){return h.cssProps[t]||tt[t]||(t in et?t:tt[t]=function(u){for(var c=u[0].toUpperCase()+u.slice(1),v=je.length;v--;)if((u=je[v]+c)in et)return u}(t)||t)}var gt=/^(none|table(?!-c[ea]).+)/,kt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"};function Gt(t,r,u){var c=$.exec(r);return c?Math.max(0,c[2]-(u||0))+(c[3]||"px"):r}function Jt(t,r,u,c,v,x){var T="width"===r?1:0,F=0,L=0;if(u===(c?"border":"content"))return 0;for(;T<4;T+=2)"margin"===u&&(L+=h.css(t,u+me[T],!0,v)),c?("content"===u&&(L-=h.css(t,"padding"+me[T],!0,v)),"margin"!==u&&(L-=h.css(t,"border"+me[T]+"Width",!0,v))):(L+=h.css(t,"padding"+me[T],!0,v),"padding"!==u?L+=h.css(t,"border"+me[T]+"Width",!0,v):F+=h.css(t,"border"+me[T]+"Width",!0,v));return!c&&0<=x&&(L+=Math.max(0,Math.ceil(t["offset"+r[0].toUpperCase()+r.slice(1)]-x-L-F-.5))||0),L}function Bt(t,r,u){var c=We(t),v=(!A.boxSizingReliable()||u)&&"border-box"===h.css(t,"boxSizing",!1,c),x=v,T=Ge(t,r,c),F="offset"+r[0].toUpperCase()+r.slice(1);if(Le.test(T)){if(!u)return T;T="auto"}return(!A.boxSizingReliable()&&v||!A.reliableTrDimensions()&&Ie(t,"tr")||"auto"===T||!parseFloat(T)&&"inline"===h.css(t,"display",!1,c))&&t.getClientRects().length&&(v="border-box"===h.css(t,"boxSizing",!1,c),(x=F in t)&&(T=t[F])),(T=parseFloat(T)||0)+Jt(t,r,u||(v?"border":"content"),x,c,T)+"px"}function ct(t,r,u,c,v){return new ct.prototype.init(t,r,u,c,v)}h.extend({cssHooks:{opacity:{get:function(t,r){if(r){var u=Ge(t,"opacity");return""===u?"1":u}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,r,u,c){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var v,x,T,F=St(r),L=ze.test(r),M=t.style;if(L||(r=Je(F)),T=h.cssHooks[r]||h.cssHooks[F],void 0===u)return T&&"get"in T&&void 0!==(v=T.get(t,!1,c))?v:M[r];"string"==(x=typeof u)&&(v=$.exec(u))&&v[1]&&(u=Ce(t,r,v),x="number"),null!=u&&u==u&&("number"!==x||L||(u+=v&&v[3]||(h.cssNumber[F]?"":"px")),A.clearCloneStyle||""!==u||0!==r.indexOf("background")||(M[r]="inherit"),T&&"set"in T&&void 0===(u=T.set(t,u,c))||(L?M.setProperty(r,u):M[r]=u))}},css:function(t,r,u,c){var v,x,T,F=St(r);return ze.test(r)||(r=Je(F)),(T=h.cssHooks[r]||h.cssHooks[F])&&"get"in T&&(v=T.get(t,!0,u)),void 0===v&&(v=Ge(t,r,c)),"normal"===v&&r in Vt&&(v=Vt[r]),""===u||u?(x=parseFloat(v),!0===u||isFinite(x)?x||0:v):v}}),h.each(["height","width"],function(t,r){h.cssHooks[r]={get:function(u,c,v){if(c)return!gt.test(h.css(u,"display"))||u.getClientRects().length&&u.getBoundingClientRect().width?Bt(u,r,v):Me(u,kt,function(){return Bt(u,r,v)})},set:function(u,c,v){var x,T=We(u),F=!A.scrollboxSize()&&"absolute"===T.position,L=(F||v)&&"border-box"===h.css(u,"boxSizing",!1,T),M=v?Jt(u,r,v,L,T):0;return L&&F&&(M-=Math.ceil(u["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(T[r])-Jt(u,r,"border",!1,T)-.5)),M&&(x=$.exec(c))&&"px"!==(x[3]||"px")&&(u.style[r]=c,c=h.css(u,r)),Gt(0,c,M)}}}),h.cssHooks.marginLeft=Fe(A.reliableMarginLeft,function(t,r){if(r)return(parseFloat(Ge(t,"marginLeft"))||t.getBoundingClientRect().left-Me(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),h.each({margin:"",padding:"",border:"Width"},function(t,r){h.cssHooks[t+r]={expand:function(u){for(var c=0,v={},x="string"==typeof u?u.split(" "):[u];c<4;c++)v[t+me[c]+r]=x[c]||x[c-2]||x[0];return v}},"margin"!==t&&(h.cssHooks[t+r].set=Gt)}),h.fn.extend({css:function(t,r){return Et(this,function(u,c,v){var x,T,F={},L=0;if(Array.isArray(c)){for(x=We(u),T=c.length;L<T;L++)F[c[L]]=h.css(u,c[L],!1,x);return F}return void 0!==v?h.style(u,c,v):h.css(u,c)},t,r,1<arguments.length)}}),((h.Tween=ct).prototype={constructor:ct,init:function(t,r,u,c,v,x){this.elem=t,this.prop=u,this.easing=v||h.easing._default,this.options=r,this.start=this.now=this.cur(),this.end=c,this.unit=x||(h.cssNumber[u]?"":"px")},cur:function(){var t=ct.propHooks[this.prop];return t&&t.get?t.get(this):ct.propHooks._default.get(this)},run:function(t){var r,u=ct.propHooks[this.prop];return this.pos=r=this.options.duration?h.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):ct.propHooks._default.set(this),this}}).init.prototype=ct.prototype,(ct.propHooks={_default:{get:function(t){var r;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(r=h.css(t.elem,t.prop,""))&&"auto"!==r?r:0},set:function(t){h.fx.step[t.prop]?h.fx.step[t.prop](t):1!==t.elem.nodeType||!h.cssHooks[t.prop]&&null==t.elem.style[Je(t.prop)]?t.elem[t.prop]=t.now:h.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=ct.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},h.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},h.fx=ct.prototype.init,h.fx.step={};var Ut,ui,ci,wi,Qt=/^(?:toggle|show|hide)$/,$t=/queueHooks$/;function Ei(){ui&&(!1===D.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(Ei):e.setTimeout(Ei,h.fx.interval),h.fx.tick())}function Ci(){return e.setTimeout(function(){Ut=void 0}),Ut=Date.now()}function xi(t,r){var u,c=0,v={height:t};for(r=r?1:0;c<4;c+=2-r)v["margin"+(u=me[c])]=v["padding"+u]=t;return r&&(v.opacity=v.width=t),v}function Ii(t,r,u){for(var c,v=(Zt.tweeners[r]||[]).concat(Zt.tweeners["*"]),x=0,T=v.length;x<T;x++)if(c=v[x].call(u,r,t))return c}function Zt(t,r,u){var c,v,x=0,T=Zt.prefilters.length,F=h.Deferred().always(function(){delete L.elem}),L=function(){if(v)return!1;for(var Q=Ut||Ci(),U=Math.max(0,M.startTime+M.duration-Q),V=1-(U/M.duration||0),ge=0,Se=M.tweens.length;ge<Se;ge++)M.tweens[ge].run(V);return F.notifyWith(t,[M,V,U]),V<1&&Se?U:(Se||F.notifyWith(t,[M,1,0]),F.resolveWith(t,[M]),!1)},M=F.promise({elem:t,props:h.extend({},r),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},u),originalProperties:r,originalOptions:u,startTime:Ut||Ci(),duration:u.duration,tweens:[],createTween:function(Q,U){var V=h.Tween(t,M.opts,Q,U,M.opts.specialEasing[Q]||M.opts.easing);return M.tweens.push(V),V},stop:function(Q){var U=0,V=Q?M.tweens.length:0;if(v)return this;for(v=!0;U<V;U++)M.tweens[U].run(1);return Q?(F.notifyWith(t,[M,1,0]),F.resolveWith(t,[M,Q])):F.rejectWith(t,[M,Q]),this}}),q=M.props;for(function(Q,U){var V,ge,Se,ve,mt;for(V in Q)if(Se=U[ge=St(V)],ve=Q[V],Array.isArray(ve)&&(Se=ve[1],ve=Q[V]=ve[0]),V!==ge&&(Q[ge]=ve,delete Q[V]),(mt=h.cssHooks[ge])&&"expand"in mt)for(V in ve=mt.expand(ve),delete Q[ge],ve)V in Q||(Q[V]=ve[V],U[V]=Se);else U[ge]=Se}(q,M.opts.specialEasing);x<T;x++)if(c=Zt.prefilters[x].call(M,t,q,M.opts))return E(c.stop)&&(h._queueHooks(M.elem,M.opts.queue).stop=c.stop.bind(c)),c;return h.map(q,Ii,M),E(M.opts.start)&&M.opts.start.call(t,M),M.progress(M.opts.progress).done(M.opts.done,M.opts.complete).fail(M.opts.fail).always(M.opts.always),h.fx.timer(h.extend(L,{elem:t,anim:M,queue:M.opts.queue})),M}h.Animation=h.extend(Zt,{tweeners:{"*":[function(t,r){var u=this.createTween(t,r);return Ce(u.elem,t,$.exec(r),u),u}]},tweener:function(t,r){E(t)?(r=t,t=["*"]):t=t.match(st);for(var u,c=0,v=t.length;c<v;c++)(Zt.tweeners[u=t[c]]=Zt.tweeners[u]||[]).unshift(r)},prefilters:[function(t,r,u){var c,v,x,T,F,L,M,q,Q="width"in r||"height"in r,U=this,V={},ge=t.style,Se=t.nodeType&&Ke(t),ve=we.get(t,"fxshow");for(c in u.queue||(null==(T=h._queueHooks(t,"fx")).unqueued&&(T.unqueued=0,F=T.empty.fire,T.empty.fire=function(){T.unqueued||F()}),T.unqueued++,U.always(function(){U.always(function(){T.unqueued--,h.queue(t,"fx").length||T.empty.fire()})})),r)if(Qt.test(v=r[c])){if(delete r[c],x=x||"toggle"===v,v===(Se?"hide":"show")){if("show"!==v||!ve||void 0===ve[c])continue;Se=!0}V[c]=ve&&ve[c]||h.style(t,c)}if((L=!h.isEmptyObject(r))||!h.isEmptyObject(V))for(c in Q&&1===t.nodeType&&(u.overflow=[ge.overflow,ge.overflowX,ge.overflowY],null==(M=ve&&ve.display)&&(M=we.get(t,"display")),"none"===(q=h.css(t,"display"))&&(M?q=M:(Be([t],!0),M=t.style.display||M,q=h.css(t,"display"),Be([t]))),("inline"===q||"inline-block"===q&&null!=M)&&"none"===h.css(t,"float")&&(L||(U.done(function(){ge.display=M}),null==M&&(M="none"===(q=ge.display)?"":q)),ge.display="inline-block")),u.overflow&&(ge.overflow="hidden",U.always(function(){ge.overflow=u.overflow[0],ge.overflowX=u.overflow[1],ge.overflowY=u.overflow[2]})),L=!1,V)L||(ve?"hidden"in ve&&(Se=ve.hidden):ve=we.access(t,"fxshow",{display:M}),x&&(ve.hidden=!Se),Se&&Be([t],!0),U.done(function(){for(c in Se||Be([t]),we.remove(t,"fxshow"),V)h.style(t,c,V[c])})),L=Ii(Se?ve[c]:0,c,U),c in ve||(ve[c]=L.start,Se&&(L.end=L.start,L.start=0))}],prefilter:function(t,r){r?Zt.prefilters.unshift(t):Zt.prefilters.push(t)}}),h.speed=function(t,r,u){var c=t&&"object"==typeof t?h.extend({},t):{complete:u||!u&&r||E(t)&&t,duration:t,easing:u&&r||r&&!E(r)&&r};return h.fx.off?c.duration=0:"number"!=typeof c.duration&&(c.duration=c.duration in h.fx.speeds?h.fx.speeds[c.duration]:h.fx.speeds._default),null!=c.queue&&!0!==c.queue||(c.queue="fx"),c.old=c.complete,c.complete=function(){E(c.old)&&c.old.call(this),c.queue&&h.dequeue(this,c.queue)},c},h.fn.extend({fadeTo:function(t,r,u,c){return this.filter(Ke).css("opacity",0).show().end().animate({opacity:r},t,u,c)},animate:function(t,r,u,c){var v=h.isEmptyObject(t),x=h.speed(r,u,c),T=function(){var F=Zt(this,h.extend({},t),x);(v||we.get(this,"finish"))&&F.stop(!0)};return T.finish=T,v||!1===x.queue?this.each(T):this.queue(x.queue,T)},stop:function(t,r,u){var c=function(v){var x=v.stop;delete v.stop,x(u)};return"string"!=typeof t&&(u=r,r=t,t=void 0),r&&this.queue(t||"fx",[]),this.each(function(){var v=!0,x=null!=t&&t+"queueHooks",T=h.timers,F=we.get(this);if(x)F[x]&&F[x].stop&&c(F[x]);else for(x in F)F[x]&&F[x].stop&&$t.test(x)&&c(F[x]);for(x=T.length;x--;)T[x].elem!==this||null!=t&&T[x].queue!==t||(T[x].anim.stop(u),v=!1,T.splice(x,1));!v&&u||h.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var r,u=we.get(this),c=u[t+"queue"],v=u[t+"queueHooks"],x=h.timers,T=c?c.length:0;for(u.finish=!0,h.queue(this,t,[]),v&&v.stop&&v.stop.call(this,!0),r=x.length;r--;)x[r].elem===this&&x[r].queue===t&&(x[r].anim.stop(!0),x.splice(r,1));for(r=0;r<T;r++)c[r]&&c[r].finish&&c[r].finish.call(this);delete u.finish})}}),h.each(["toggle","show","hide"],function(t,r){var u=h.fn[r];h.fn[r]=function(c,v,x){return null==c||"boolean"==typeof c?u.apply(this,arguments):this.animate(xi(r,!0),c,v,x)}}),h.each({slideDown:xi("show"),slideUp:xi("hide"),slideToggle:xi("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){h.fn[t]=function(u,c,v){return this.animate(r,u,c,v)}}),h.timers=[],h.fx.tick=function(){var t,r=0,u=h.timers;for(Ut=Date.now();r<u.length;r++)(t=u[r])()||u[r]!==t||u.splice(r--,1);u.length||h.fx.stop(),Ut=void 0},h.fx.timer=function(t){h.timers.push(t),h.fx.start()},h.fx.interval=13,h.fx.start=function(){ui||(ui=!0,Ei())},h.fx.stop=function(){ui=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(t,r){return t=h.fx&&h.fx.speeds[t]||t,this.queue(r=r||"fx",function(u,c){var v=e.setTimeout(u,t);c.stop=function(){e.clearTimeout(v)}})},ci=D.createElement("input"),wi=D.createElement("select").appendChild(D.createElement("option")),ci.type="checkbox",A.checkOn=""!==ci.value,A.optSelected=wi.selected,(ci=D.createElement("input")).value="t",ci.type="radio",A.radioValue="t"===ci.value;var _i,Ri=h.expr.attrHandle;h.fn.extend({attr:function(t,r){return Et(this,h.attr,t,r,1<arguments.length)},removeAttr:function(t){return this.each(function(){h.removeAttr(this,t)})}}),h.extend({attr:function(t,r,u){var c,v,x=t.nodeType;if(3!==x&&8!==x&&2!==x)return void 0===t.getAttribute?h.prop(t,r,u):(1===x&&h.isXMLDoc(t)||(v=h.attrHooks[r.toLowerCase()]||(h.expr.match.bool.test(r)?_i:void 0)),void 0!==u?null===u?void h.removeAttr(t,r):v&&"set"in v&&void 0!==(c=v.set(t,u,r))?c:(t.setAttribute(r,u+""),u):v&&"get"in v&&null!==(c=v.get(t,r))?c:null==(c=h.find.attr(t,r))?void 0:c)},attrHooks:{type:{set:function(t,r){if(!A.radioValue&&"radio"===r&&Ie(t,"input")){var u=t.value;return t.setAttribute("type",r),u&&(t.value=u),r}}}},removeAttr:function(t,r){var u,c=0,v=r&&r.match(st);if(v&&1===t.nodeType)for(;u=v[c++];)t.removeAttribute(u)}}),_i={set:function(t,r,u){return!1===r?h.removeAttr(t,u):t.setAttribute(u,u),u}},h.each(h.expr.match.bool.source.match(/\w+/g),function(t,r){var u=Ri[r]||h.find.attr;Ri[r]=function(c,v,x){var T,F,L=v.toLowerCase();return x||(F=Ri[L],Ri[L]=T,T=null!=u(c,v,x)?L:null,Ri[L]=F),T}});var ln=/^(?:input|select|textarea|button)$/i,Bi=/^(?:a|area)$/i;function Ti(t){return(t.match(st)||[]).join(" ")}function gi(t){return t.getAttribute&&t.getAttribute("class")||""}function Mi(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(st)||[]}h.fn.extend({prop:function(t,r){return Et(this,h.prop,t,r,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[h.propFix[t]||t]})}}),h.extend({prop:function(t,r,u){var c,v,x=t.nodeType;if(3!==x&&8!==x&&2!==x)return 1===x&&h.isXMLDoc(t)||(v=h.propHooks[r=h.propFix[r]||r]),void 0!==u?v&&"set"in v&&void 0!==(c=v.set(t,u,r))?c:t[r]=u:v&&"get"in v&&null!==(c=v.get(t,r))?c:t[r]},propHooks:{tabIndex:{get:function(t){var r=h.find.attr(t,"tabindex");return r?parseInt(r,10):ln.test(t.nodeName)||Bi.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),A.optSelected||(h.propHooks.selected={get:function(t){return null},set:function(t){}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this}),h.fn.extend({addClass:function(t){var r,u,c,v,x,T;return E(t)?this.each(function(F){h(this).addClass(t.call(this,F,gi(this)))}):(r=Mi(t)).length?this.each(function(){if(c=gi(this),u=1===this.nodeType&&" "+Ti(c)+" "){for(x=0;x<r.length;x++)u.indexOf(" "+(v=r[x])+" ")<0&&(u+=v+" ");T=Ti(u),c!==T&&this.setAttribute("class",T)}}):this},removeClass:function(t){var r,u,c,v,x,T;return E(t)?this.each(function(F){h(this).removeClass(t.call(this,F,gi(this)))}):arguments.length?(r=Mi(t)).length?this.each(function(){if(c=gi(this),u=1===this.nodeType&&" "+Ti(c)+" "){for(x=0;x<r.length;x++)for(v=r[x];-1<u.indexOf(" "+v+" ");)u=u.replace(" "+v+" "," ");T=Ti(u),c!==T&&this.setAttribute("class",T)}}):this:this.attr("class","")},toggleClass:function(t,r){var u,c,v,x,T=typeof t,F="string"===T||Array.isArray(t);return E(t)?this.each(function(L){h(this).toggleClass(t.call(this,L,gi(this),r),r)}):"boolean"==typeof r&&F?r?this.addClass(t):this.removeClass(t):(u=Mi(t),this.each(function(){if(F)for(x=h(this),v=0;v<u.length;v++)x.hasClass(c=u[v])?x.removeClass(c):x.addClass(c);else void 0!==t&&"boolean"!==T||((c=gi(this))&&we.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===t?"":we.get(this,"__className__")||""))}))},hasClass:function(t){var r,u,c=0;for(r=" "+t+" ";u=this[c++];)if(1===u.nodeType&&-1<(" "+Ti(gi(u))+" ").indexOf(r))return!0;return!1}});var Gi=/\r/g;h.fn.extend({val:function(t){var r,u,c,v=this[0];return arguments.length?(c=E(t),this.each(function(x){var T;1===this.nodeType&&(null==(T=c?t.call(this,x,h(this).val()):t)?T="":"number"==typeof T?T+="":Array.isArray(T)&&(T=h.map(T,function(F){return null==F?"":F+""})),(r=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,T,"value")||(this.value=T))})):v?(r=h.valHooks[v.type]||h.valHooks[v.nodeName.toLowerCase()])&&"get"in r&&void 0!==(u=r.get(v,"value"))?u:"string"==typeof(u=v.value)?u.replace(Gi,""):null==u?"":u:void 0}}),h.extend({valHooks:{option:{get:function(t){var r=h.find.attr(t,"value");return null!=r?r:Ti(h.text(t))}},select:{get:function(t){var r,u,c,v=t.options,x=t.selectedIndex,T="select-one"===t.type,F=T?null:[],L=T?x+1:v.length;for(c=x<0?L:T?x:0;c<L;c++)if(((u=v[c]).selected||c===x)&&!u.disabled&&(!u.parentNode.disabled||!Ie(u.parentNode,"optgroup"))){if(r=h(u).val(),T)return r;F.push(r)}return F},set:function(t,r){for(var u,c,v=t.options,x=h.makeArray(r),T=v.length;T--;)((c=v[T]).selected=-1<h.inArray(h.valHooks.option.get(c),x))&&(u=!0);return u||(t.selectedIndex=-1),x}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(t,r){if(Array.isArray(r))return t.checked=-1<h.inArray(h(t).val(),r)}},A.checkOn||(h.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),A.focusin="onfocusin"in e;var Ni=/^(?:focusinfocus|focusoutblur)$/,Zi=function(t){t.stopPropagation()};h.extend(h.event,{trigger:function(t,r,u,c){var v,x,T,F,L,M,q,Q,U=[u||D],V=w.call(t,"type")?t.type:t,ge=w.call(t,"namespace")?t.namespace.split("."):[];if(x=Q=T=u=u||D,3!==u.nodeType&&8!==u.nodeType&&!Ni.test(V+h.event.triggered)&&(-1<V.indexOf(".")&&(V=(ge=V.split(".")).shift(),ge.sort()),L=V.indexOf(":")<0&&"on"+V,(t=t[h.expando]?t:new h.Event(V,"object"==typeof t&&t)).isTrigger=c?2:3,t.namespace=ge.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+ge.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=u),r=null==r?[t]:h.makeArray(r,[t]),q=h.event.special[V]||{},c||!q.trigger||!1!==q.trigger.apply(u,r))){if(!c&&!q.noBubble&&!C(u)){for(Ni.test((F=q.delegateType||V)+V)||(x=x.parentNode);x;x=x.parentNode)U.push(x),T=x;T===(u.ownerDocument||D)&&U.push(T.defaultView||T.parentWindow||e)}for(v=0;(x=U[v++])&&!t.isPropagationStopped();)Q=x,t.type=1<v?F:q.bindType||V,(M=(we.get(x,"events")||Object.create(null))[t.type]&&we.get(x,"handle"))&&M.apply(x,r),(M=L&&x[L])&&M.apply&&li(x)&&(t.result=M.apply(x,r),!1===t.result&&t.preventDefault());return t.type=V,c||t.isDefaultPrevented()||q._default&&!1!==q._default.apply(U.pop(),r)||!li(u)||L&&E(u[V])&&!C(u)&&((T=u[L])&&(u[L]=null),h.event.triggered=V,t.isPropagationStopped()&&Q.addEventListener(V,Zi),u[V](),t.isPropagationStopped()&&Q.removeEventListener(V,Zi),h.event.triggered=void 0,T&&(u[L]=T)),t.result}},simulate:function(t,r,u){var c=h.extend(new h.Event,u,{type:t,isSimulated:!0});h.event.trigger(c,null,r)}}),h.fn.extend({trigger:function(t,r){return this.each(function(){h.event.trigger(t,r,this)})},triggerHandler:function(t,r){var u=this[0];if(u)return h.event.trigger(t,r,u,!0)}}),A.focusin||h.each({focus:"focusin",blur:"focusout"},function(t,r){var u=function(c){h.event.simulate(r,c.target,h.event.fix(c))};h.event.special[r]={setup:function(){var c=this.ownerDocument||this.document||this,v=we.access(c,r);v||c.addEventListener(t,u,!0),we.access(c,r,(v||0)+1)},teardown:function(){var c=this.ownerDocument||this.document||this,v=we.access(c,r)-1;v?we.access(c,r,v):(c.removeEventListener(t,u,!0),we.remove(c,r))}}});var Di=e.location,mi={guid:Date.now()},Pi=/\?/;h.parseXML=function(t){var r,u;if(!t||"string"!=typeof t)return null;try{r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(c){}return u=r&&r.getElementsByTagName("parsererror")[0],r&&!u||h.error("Invalid XML: "+(u?h.map(u.childNodes,function(c){return c.textContent}).join("\n"):t)),r};var Xi=/\[\]$/,zi=/\r?\n/g,ji=/^(?:submit|button|image|reset|file)$/i,Yi=/^(?:input|select|textarea|keygen)/i;function Hi(t,r,u,c){var v;if(Array.isArray(r))h.each(r,function(x,T){u||Xi.test(t)?c(t,T):Hi(t+"["+("object"==typeof T&&null!=T?x:"")+"]",T,u,c)});else if(u||"object"!==X(r))c(t,r);else for(v in r)Hi(t+"["+v+"]",r[v],u,c)}h.param=function(t,r){var u,c=[],v=function(x,T){var F=E(T)?T():T;c[c.length]=encodeURIComponent(x)+"="+encodeURIComponent(null==F?"":F)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!h.isPlainObject(t))h.each(t,function(){v(this.name,this.value)});else for(u in t)Hi(u,t[u],r,v);return c.join("&")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=h.prop(this,"elements");return t?h.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!h(this).is(":disabled")&&Yi.test(this.nodeName)&&!ji.test(t)&&(this.checked||!b.test(t))}).map(function(t,r){var u=h(this).val();return null==u?null:Array.isArray(u)?h.map(u,function(c){return{name:r.name,value:c.replace(zi,"\r\n")}}):{name:r.name,value:u.replace(zi,"\r\n")}}).get()}});var Ki=/%20/g,Ji=/#.*$/,un=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wi=/^(?:GET|HEAD)$/,Qi=/^\/\//,Tn={},cn={},Sn="*/".concat("*"),dn=D.createElement("a");function bn(t){return function(r,u){"string"!=typeof r&&(u=r,r="*");var c,v=0,x=r.toLowerCase().match(st)||[];if(E(u))for(;c=x[v++];)"+"===c[0]?(c=c.slice(1)||"*",(t[c]=t[c]||[]).unshift(u)):(t[c]=t[c]||[]).push(u)}}function En(t,r,u,c){var v={},x=t===cn;function T(F){var L;return v[F]=!0,h.each(t[F]||[],function(M,q){var Q=q(r,u,c);return"string"!=typeof Q||x||v[Q]?x?!(L=Q):void 0:(r.dataTypes.unshift(Q),T(Q),!1)}),L}return T(r.dataTypes[0])||!v["*"]&&T("*")}function fn(t,r){var u,c,v=h.ajaxSettings.flatOptions||{};for(u in r)void 0!==r[u]&&((v[u]?t:c||(c={}))[u]=r[u]);return c&&h.extend(!0,t,c),t}dn.href=Di.href,h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Di.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Di.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,r){return r?fn(fn(t,h.ajaxSettings),r):fn(h.ajaxSettings,t)},ajaxPrefilter:bn(Tn),ajaxTransport:bn(cn),ajax:function(t,r){"object"==typeof t&&(r=t,t=void 0);var u,c,v,x,T,F,L,M,q,Q,U=h.ajaxSetup({},r=r||{}),V=U.context||U,ge=U.context&&(V.nodeType||V.jquery)?h(V):h.event,Se=h.Deferred(),ve=h.Callbacks("once memory"),mt=U.statusCode||{},Dt={},ei={},ot="canceled",Ae={readyState:0,getResponseHeader:function(Qe){var vt;if(L){if(!x)for(x={};vt=hn.exec(v);)x[vt[1].toLowerCase()+" "]=(x[vt[1].toLowerCase()+" "]||[]).concat(vt[2]);vt=x[Qe.toLowerCase()+" "]}return null==vt?null:vt.join(", ")},getAllResponseHeaders:function(){return L?v:null},setRequestHeader:function(Qe,vt){return null==L&&(Qe=ei[Qe.toLowerCase()]=ei[Qe.toLowerCase()]||Qe,Dt[Qe]=vt),this},overrideMimeType:function(Qe){return null==L&&(U.mimeType=Qe),this},statusCode:function(Qe){var vt;if(Qe)if(L)Ae.always(Qe[Ae.status]);else for(vt in Qe)mt[vt]=[mt[vt],Qe[vt]];return this},abort:function(Qe){var vt=Qe||ot;return u&&u.abort(vt),Xt(0,vt),this}};if(Se.promise(Ae),U.url=((t||U.url||Di.href)+"").replace(Qi,Di.protocol+"//"),U.type=r.method||r.type||U.method||U.type,U.dataTypes=(U.dataType||"*").toLowerCase().match(st)||[""],null==U.crossDomain){F=D.createElement("a");try{F.href=U.url,F.href=F.href,U.crossDomain=dn.protocol+"//"+dn.host!=F.protocol+"//"+F.host}catch(Qe){U.crossDomain=!0}}if(U.data&&U.processData&&"string"!=typeof U.data&&(U.data=h.param(U.data,U.traditional)),En(Tn,U,r,Ae),L)return Ae;for(q in(M=h.event&&U.global)&&0==h.active++&&h.event.trigger("ajaxStart"),U.type=U.type.toUpperCase(),U.hasContent=!Wi.test(U.type),c=U.url.replace(Ji,""),U.hasContent?U.data&&U.processData&&0===(U.contentType||"").indexOf("application/x-www-form-urlencoded")&&(U.data=U.data.replace(Ki,"+")):(Q=U.url.slice(c.length),U.data&&(U.processData||"string"==typeof U.data)&&(c+=(Pi.test(c)?"&":"?")+U.data,delete U.data),!1===U.cache&&(c=c.replace(un,"$1"),Q=(Pi.test(c)?"&":"?")+"_="+mi.guid+++Q),U.url=c+Q),U.ifModified&&(h.lastModified[c]&&Ae.setRequestHeader("If-Modified-Since",h.lastModified[c]),h.etag[c]&&Ae.setRequestHeader("If-None-Match",h.etag[c])),(U.data&&U.hasContent&&!1!==U.contentType||r.contentType)&&Ae.setRequestHeader("Content-Type",U.contentType),Ae.setRequestHeader("Accept",U.dataTypes[0]&&U.accepts[U.dataTypes[0]]?U.accepts[U.dataTypes[0]]+("*"!==U.dataTypes[0]?", "+Sn+"; q=0.01":""):U.accepts["*"]),U.headers)Ae.setRequestHeader(q,U.headers[q]);if(U.beforeSend&&(!1===U.beforeSend.call(V,Ae,U)||L))return Ae.abort();if(ot="abort",ve.add(U.complete),Ae.done(U.success),Ae.fail(U.error),u=En(cn,U,r,Ae)){if(Ae.readyState=1,M&&ge.trigger("ajaxSend",[Ae,U]),L)return Ae;U.async&&0<U.timeout&&(T=e.setTimeout(function(){Ae.abort("timeout")},U.timeout));try{L=!1,u.send(Dt,Xt)}catch(Qe){if(L)throw Qe;Xt(-1,Qe)}}else Xt(-1,"No Transport");function Xt(Qe,vt,qi,$i){var ti,Oi,Li,Yt,Fi,hi=vt;L||(L=!0,T&&e.clearTimeout(T),u=void 0,v=$i||"",Ae.readyState=0<Qe?4:0,ti=200<=Qe&&Qe<300||304===Qe,qi&&(Yt=function(yt,ii,ni){for(var vi,He,it,Ot,ri=yt.contents,Pt=yt.dataTypes;"*"===Pt[0];)Pt.shift(),void 0===vi&&(vi=yt.mimeType||ii.getResponseHeader("Content-Type"));if(vi)for(He in ri)if(ri[He]&&ri[He].test(vi)){Pt.unshift(He);break}if(Pt[0]in ni)it=Pt[0];else{for(He in ni){if(!Pt[0]||yt.converters[He+" "+Pt[0]]){it=He;break}Ot||(Ot=He)}it=it||Ot}if(it)return it!==Pt[0]&&Pt.unshift(it),ni[it]}(U,Ae,qi)),!ti&&-1<h.inArray("script",U.dataTypes)&&h.inArray("json",U.dataTypes)<0&&(U.converters["text script"]=function(){}),Yt=function(yt,ii,ni,vi){var He,it,Ot,ri,Pt,si={},ki=yt.dataTypes.slice();if(ki[1])for(Ot in yt.converters)si[Ot.toLowerCase()]=yt.converters[Ot];for(it=ki.shift();it;)if(yt.responseFields[it]&&(ni[yt.responseFields[it]]=ii),!Pt&&vi&&yt.dataFilter&&(ii=yt.dataFilter(ii,yt.dataType)),Pt=it,it=ki.shift())if("*"===it)it=Pt;else if("*"!==Pt&&Pt!==it){if(!(Ot=si[Pt+" "+it]||si["* "+it]))for(He in si)if((ri=He.split(" "))[1]===it&&(Ot=si[Pt+" "+ri[0]]||si["* "+ri[0]])){!0===Ot?Ot=si[He]:!0!==si[He]&&(it=ri[0],ki.unshift(ri[1]));break}if(!0!==Ot)if(Ot&&yt.throws)ii=Ot(ii);else try{ii=Ot(ii)}catch(en){return{state:"parsererror",error:Ot?en:"No conversion from "+Pt+" to "+it}}}return{state:"success",data:ii}}(U,Yt,Ae,ti),ti?(U.ifModified&&((Fi=Ae.getResponseHeader("Last-Modified"))&&(h.lastModified[c]=Fi),(Fi=Ae.getResponseHeader("etag"))&&(h.etag[c]=Fi)),204===Qe||"HEAD"===U.type?hi="nocontent":304===Qe?hi="notmodified":(hi=Yt.state,Oi=Yt.data,ti=!(Li=Yt.error))):(Li=hi,!Qe&&hi||(hi="error",Qe<0&&(Qe=0))),Ae.status=Qe,Ae.statusText=(vt||hi)+"",ti?Se.resolveWith(V,[Oi,hi,Ae]):Se.rejectWith(V,[Ae,hi,Li]),Ae.statusCode(mt),mt=void 0,M&&ge.trigger(ti?"ajaxSuccess":"ajaxError",[Ae,U,ti?Oi:Li]),ve.fireWith(V,[Ae,hi]),M&&(ge.trigger("ajaxComplete",[Ae,U]),--h.active||h.event.trigger("ajaxStop")))}return Ae},getJSON:function(t,r,u){return h.get(t,r,u,"json")},getScript:function(t,r){return h.get(t,void 0,r,"script")}}),h.each(["get","post"],function(t,r){h[r]=function(u,c,v,x){return E(c)&&(x=x||v,v=c,c=void 0),h.ajax(h.extend({url:u,type:r,dataType:x,data:c,success:v},h.isPlainObject(u)&&u))}}),h.ajaxPrefilter(function(t){var r;for(r in t.headers)"content-type"===r.toLowerCase()&&(t.contentType=t.headers[r]||"")}),h._evalUrl=function(t,r,u){return h.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(c){h.globalEval(c,r,u)}})},h.fn.extend({wrapAll:function(t){var r;return this[0]&&(E(t)&&(t=t.call(this[0])),r=h(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&r.insertBefore(this[0]),r.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(t){return E(t)?this.each(function(r){h(this).wrapInner(t.call(this,r))}):this.each(function(){var r=h(this),u=r.contents();u.length?u.wrapAll(t):r.append(t)})},wrap:function(t){var r=E(t);return this.each(function(u){h(this).wrapAll(r?t.call(this,u):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){h(this).replaceWith(this.childNodes)}),this}}),h.expr.pseudos.hidden=function(t){return!h.expr.pseudos.visible(t)},h.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},h.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var kn={0:200,1223:204},Ui=h.ajaxSettings.xhr();A.cors=!!Ui&&"withCredentials"in Ui,A.ajax=Ui=!!Ui,h.ajaxTransport(function(t){var r,u;if(A.cors||Ui&&!t.crossDomain)return{send:function(c,v){var x,T=t.xhr();if(T.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(x in t.xhrFields)T[x]=t.xhrFields[x];for(x in t.mimeType&&T.overrideMimeType&&T.overrideMimeType(t.mimeType),t.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),c)T.setRequestHeader(x,c[x]);r=function(F){return function(){r&&(r=u=T.onload=T.onerror=T.onabort=T.ontimeout=T.onreadystatechange=null,"abort"===F?T.abort():"error"===F?"number"!=typeof T.status?v(0,"error"):v(T.status,T.statusText):v(kn[T.status]||T.status,T.statusText,"text"!==(T.responseType||"text")||"string"!=typeof T.responseText?{binary:T.response}:{text:T.responseText},T.getAllResponseHeaders()))}},T.onload=r(),u=T.onerror=T.ontimeout=r("error"),void 0!==T.onabort?T.onabort=u:T.onreadystatechange=function(){4===T.readyState&&e.setTimeout(function(){r&&u()})},r=r("abort");try{T.send(t.hasContent&&t.data||null)}catch(F){if(r)throw F}},abort:function(){r&&r()}}}),h.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return h.globalEval(t),t}}}),h.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),h.ajaxTransport("script",function(t){var r,u;if(t.crossDomain||t.scriptAttrs)return{send:function(c,v){r=h("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",u=function(x){r.remove(),u=null,x&&v("error"===x.type?404:200,x.type)}),D.head.appendChild(r[0])},abort:function(){u&&u()}}});var Pn,Cn=[],pn=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Cn.pop()||h.expando+"_"+mi.guid++;return this[t]=!0,t}}),h.ajaxPrefilter("json jsonp",function(t,r,u){var c,v,x,T=!1!==t.jsonp&&(pn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&pn.test(t.data)&&"data");if(T||"jsonp"===t.dataTypes[0])return c=t.jsonpCallback=E(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,T?t[T]=t[T].replace(pn,"$1"+c):!1!==t.jsonp&&(t.url+=(Pi.test(t.url)?"&":"?")+t.jsonp+"="+c),t.converters["script json"]=function(){return x||h.error(c+" was not called"),x[0]},t.dataTypes[0]="json",v=e[c],e[c]=function(){x=arguments},u.always(function(){void 0===v?h(e).removeProp(c):e[c]=v,t[c]&&(t.jsonpCallback=r.jsonpCallback,Cn.push(c)),x&&E(v)&&v(x[0]),x=v=void 0}),"script"}),A.createHTMLDocument=((Pn=D.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Pn.childNodes.length),h.parseHTML=function(t,r,u){return"string"!=typeof t?[]:("boolean"==typeof r&&(u=r,r=!1),r||(A.createHTMLDocument?((c=(r=D.implementation.createHTMLDocument("")).createElement("base")).href=D.location.href,r.head.appendChild(c)):r=D),x=!u&&[],(v=nt.exec(t))?[r.createElement(v[1])]:(v=Ht([t],r,x),x&&x.length&&h(x).remove(),h.merge([],v.childNodes)));var c,v,x},h.fn.load=function(t,r,u){var c,v,x,T=this,F=t.indexOf(" ");return-1<F&&(c=Ti(t.slice(F)),t=t.slice(0,F)),E(r)?(u=r,r=void 0):r&&"object"==typeof r&&(v="POST"),0<T.length&&h.ajax({url:t,type:v||"GET",dataType:"html",data:r}).done(function(L){x=arguments,T.html(c?h("<div>").append(h.parseHTML(L)).find(c):L)}).always(u&&function(L,M){T.each(function(){u.apply(this,x||[L.responseText,M,L])})}),this},h.expr.pseudos.animated=function(t){return h.grep(h.timers,function(r){return t===r.elem}).length},h.offset={setOffset:function(t,r,u){var c,v,x,T,F,L,M=h.css(t,"position"),q=h(t),Q={};"static"===M&&(t.style.position="relative"),F=q.offset(),x=h.css(t,"top"),L=h.css(t,"left"),("absolute"===M||"fixed"===M)&&-1<(x+L).indexOf("auto")?(T=(c=q.position()).top,v=c.left):(T=parseFloat(x)||0,v=parseFloat(L)||0),E(r)&&(r=r.call(t,u,h.extend({},F))),null!=r.top&&(Q.top=r.top-F.top+T),null!=r.left&&(Q.left=r.left-F.left+v),"using"in r?r.using.call(t,Q):q.css(Q)}},h.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(v){h.offset.setOffset(this,t,v)});var r,u,c=this[0];return c?c.getClientRects().length?{top:(r=c.getBoundingClientRect()).top+(u=c.ownerDocument.defaultView).pageYOffset,left:r.left+u.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,r,u,c=this[0],v={top:0,left:0};if("fixed"===h.css(c,"position"))r=c.getBoundingClientRect();else{for(r=this.offset(),u=c.ownerDocument,t=c.offsetParent||u.documentElement;t&&(t===u.body||t===u.documentElement)&&"static"===h.css(t,"position");)t=t.parentNode;t&&t!==c&&1===t.nodeType&&((v=h(t).offset()).top+=h.css(t,"borderTopWidth",!0),v.left+=h.css(t,"borderLeftWidth",!0))}return{top:r.top-v.top-h.css(c,"marginTop",!0),left:r.left-v.left-h.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===h.css(t,"position");)t=t.offsetParent;return t||ae})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var u="pageYOffset"===r;h.fn[t]=function(c){return Et(this,function(v,x,T){var F;if(C(v)?F=v:9===v.nodeType&&(F=v.defaultView),void 0===T)return F?F[r]:v[x];F?F.scrollTo(u?F.pageXOffset:T,u?T:F.pageYOffset):v[x]=T},t,c,arguments.length)}}),h.each(["top","left"],function(t,r){h.cssHooks[r]=Fe(A.pixelPosition,function(u,c){if(c)return c=Ge(u,r),Le.test(c)?h(u).position()[r]+"px":c})}),h.each({Height:"height",Width:"width"},function(t,r){h.each({padding:"inner"+t,content:r,"":"outer"+t},function(u,c){h.fn[c]=function(v,x){var T=arguments.length&&(u||"boolean"!=typeof v),F=u||(!0===v||!0===x?"margin":"border");return Et(this,function(L,M,q){var Q;return C(L)?0===c.indexOf("outer")?L["inner"+t]:L.document.documentElement["client"+t]:9===L.nodeType?(Q=L.documentElement,Math.max(L.body["scroll"+t],Q["scroll"+t],L.body["offset"+t],Q["offset"+t],Q["client"+t])):void 0===q?h.css(L,M,F):h.style(L,M,q,F)},r,T?v:void 0,T)}})}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,r){h.fn[r]=function(u){return this.on(r,u)}}),h.fn.extend({bind:function(t,r,u){return this.on(t,null,r,u)},unbind:function(t,r){return this.off(t,null,r)},delegate:function(t,r,u,c){return this.on(r,t,u,c)},undelegate:function(t,r,u){return 1===arguments.length?this.off(t,"**"):this.off(r,t||"**",u)},hover:function(t,r){return this.mouseenter(t).mouseleave(r||t)}}),h.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,r){h.fn[r]=function(u,c){return 0<arguments.length?this.on(r,null,u,c):this.trigger(r)}});var In=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;h.proxy=function(t,r){var u,c,v;if("string"==typeof r&&(u=t[r],r=t,t=u),E(t))return c=d.call(arguments,2),(v=function(){return t.apply(r||this,c.concat(d.call(arguments)))}).guid=t.guid=t.guid||h.guid++,v},h.holdReady=function(t){t?h.readyWait++:h.ready(!0)},h.isArray=Array.isArray,h.parseJSON=JSON.parse,h.nodeName=Ie,h.isFunction=E,h.isWindow=C,h.camelCase=St,h.type=X,h.now=Date.now,h.isNumeric=function(t){var r=h.type(t);return("number"===r||"string"===r)&&!isNaN(t-parseFloat(t))},h.trim=function(t){return null==t?"":(t+"").replace(In,"$1")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Bn=e.jQuery,Mn=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Mn),t&&e.jQuery===h&&(e.jQuery=Bn),h},void 0===i&&(e.jQuery=e.$=h),h}),function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,function(e){"use strict";function i(k){if(null==k)return window;if("[object Window]"!==k.toString()){var I=k.ownerDocument;return I&&I.defaultView||window}return k}function n(k){return k instanceof i(k).Element||k instanceof Element}function l(k){return k instanceof i(k).HTMLElement||k instanceof HTMLElement}function d(k){return"undefined"!=typeof ShadowRoot&&(k instanceof i(k).ShadowRoot||k instanceof ShadowRoot)}var s=Math.max,o=Math.min,a=Math.round;function p(){var k=navigator.userAgentData;return null!=k&&k.brands?k.brands.map(function(I){return I.brand+"/"+I.version}).join(" "):navigator.userAgent}function y(){return!/^((?!chrome|android).)*safari/i.test(p())}function w(k,I,W){void 0===I&&(I=!1),void 0===W&&(W=!1);var Y=k.getBoundingClientRect(),he=1,ie=1;I&&l(k)&&(he=k.offsetWidth>0&&a(Y.width)/k.offsetWidth||1,ie=k.offsetHeight>0&&a(Y.height)/k.offsetHeight||1);var ce=(n(k)?i(k):window).visualViewport,oe=!y()&&W,ue=(Y.left+(oe&&ce?ce.offsetLeft:0))/he,Te=(Y.top+(oe&&ce?ce.offsetTop:0))/ie,xe=Y.width/he,fe=Y.height/ie;return{width:xe,height:fe,top:Te,right:ue+xe,bottom:Te+fe,left:ue,x:ue,y:Te}}function O(k){var I=i(k);return{scrollLeft:I.pageXOffset,scrollTop:I.pageYOffset}}function _(k){return k?(k.nodeName||"").toLowerCase():null}function A(k){return((n(k)?k.ownerDocument:k.document)||window.document).documentElement}function E(k){return w(A(k)).left+O(k).scrollLeft}function C(k){return i(k).getComputedStyle(k)}function D(k){var I=C(k);return/auto|scroll|overlay|hidden/.test(I.overflow+I.overflowY+I.overflowX)}function N(k,I,W){void 0===W&&(W=!1);var Y,he,fe,Xe,Le,ze,ie=l(I),ce=l(I)&&(Xe=(fe=I).getBoundingClientRect(),Le=a(Xe.width)/fe.offsetWidth||1,ze=a(Xe.height)/fe.offsetHeight||1,1!==Le||1!==ze),oe=A(I),ue=w(k,ce,W),Te={scrollLeft:0,scrollTop:0},xe={x:0,y:0};return(ie||!ie&&!W)&&(("body"!==_(I)||D(oe))&&(Te=(Y=I)!==i(Y)&&l(Y)?{scrollLeft:(he=Y).scrollLeft,scrollTop:he.scrollTop}:O(Y)),l(I)?((xe=w(I,!0)).x+=I.clientLeft,xe.y+=I.clientTop):oe&&(xe.x=E(oe))),{x:ue.left+Te.scrollLeft-xe.x,y:ue.top+Te.scrollTop-xe.y,width:ue.width,height:ue.height}}function Z(k){var I=w(k),W=k.offsetWidth,Y=k.offsetHeight;return Math.abs(I.width-W)<=1&&(W=I.width),Math.abs(I.height-Y)<=1&&(Y=I.height),{x:k.offsetLeft,y:k.offsetTop,width:W,height:Y}}function X(k){return"html"===_(k)?k:k.assignedSlot||k.parentNode||(d(k)?k.host:null)||A(k)}function se(k){return["html","body","#document"].indexOf(_(k))>=0?k.ownerDocument.body:l(k)&&D(k)?k:se(X(k))}function h(k,I){var W;void 0===I&&(I=[]);var Y=se(k),he=Y===(null==(W=k.ownerDocument)?void 0:W.body),ie=i(Y),ce=he?[ie].concat(ie.visualViewport||[],D(Y)?Y:[]):Y,oe=I.concat(ce);return he?oe:oe.concat(h(X(ce)))}function re(k){return["table","td","th"].indexOf(_(k))>=0}function ye(k){return l(k)&&"fixed"!==C(k).position?k.offsetParent:null}function Oe(k){for(var I=i(k),W=ye(k);W&&re(W)&&"static"===C(W).position;)W=ye(W);return W&&("html"===_(W)||"body"===_(W)&&"static"===C(W).position)?I:W||function(Y){var he=/firefox/i.test(p());if(/Trident/i.test(p())&&l(Y)&&"fixed"===C(Y).position)return null;var ie=X(Y);for(d(ie)&&(ie=ie.host);l(ie)&&["html","body"].indexOf(_(ie))<0;){var ce=C(ie);if("none"!==ce.transform||"none"!==ce.perspective||"paint"===ce.contain||-1!==["transform","perspective"].indexOf(ce.willChange)||he&&"filter"===ce.willChange||he&&ce.filter&&"none"!==ce.filter)return ie;ie=ie.parentNode}return null}(k)||I}var Re="top",qe="bottom",Ie="right",nt="left",Nt="auto",wt=[Re,qe,Ie,nt],Ve="start",at="end",_t="viewport",xt="popper",st=wt.reduce(function(k,I){return k.concat([I+"-"+Ve,I+"-"+at])},[]),zt=[].concat(wt,[Nt]).reduce(function(k,I){return k.concat([I,I+"-"+Ve,I+"-"+at])},[]),Ee=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function jt(k){var I=new Map,W=new Set,Y=[];function he(ie){W.add(ie.name),[].concat(ie.requires||[],ie.requiresIfExists||[]).forEach(function(ce){if(!W.has(ce)){var oe=I.get(ce);oe&&he(oe)}}),Y.push(ie)}return k.forEach(function(ie){I.set(ie.name,ie)}),k.forEach(function(ie){W.has(ie.name)||he(ie)}),Y}function Tt(k){return k.split("-")[0]}function It(k,I){var W=I.getRootNode&&I.getRootNode();if(k.contains(I))return!0;if(W&&d(W)){var Y=I;do{if(Y&&k.isSameNode(Y))return!0;Y=Y.parentNode||Y.host}while(Y)}return!1}function Rt(k){return Object.assign({},k,{left:k.x,top:k.y,right:k.x+k.width,bottom:k.y+k.height})}function Et(k,I,W){return I===_t?Rt(function(Y,he){var ie=i(Y),ce=A(Y),oe=ie.visualViewport,ue=ce.clientWidth,Te=ce.clientHeight,xe=0,fe=0;if(oe){ue=oe.width,Te=oe.height;var Xe=y();(Xe||!Xe&&"fixed"===he)&&(xe=oe.offsetLeft,fe=oe.offsetTop)}return{width:ue,height:Te,x:xe+E(Y),y:fe}}(k,W)):n(I)?((ie=w(Y=I,!1,"fixed"===W)).top=ie.top+Y.clientTop,ie.left=ie.left+Y.clientLeft,ie.bottom=ie.top+Y.clientHeight,ie.right=ie.left+Y.clientWidth,ie.width=Y.clientWidth,ie.height=Y.clientHeight,ie.x=ie.left,ie.y=ie.top,ie):Rt(function(Y){var he,ie=A(Y),ce=O(Y),oe=null==(he=Y.ownerDocument)?void 0:he.body,ue=s(ie.scrollWidth,ie.clientWidth,oe?oe.scrollWidth:0,oe?oe.clientWidth:0),Te=s(ie.scrollHeight,ie.clientHeight,oe?oe.scrollHeight:0,oe?oe.clientHeight:0),xe=-ce.scrollLeft+E(Y),fe=-ce.scrollTop;return"rtl"===C(oe||ie).direction&&(xe+=s(ie.clientWidth,oe?oe.clientWidth:0)-ue),{width:ue,height:Te,x:xe,y:fe}}(A(k)));var Y,ie}function Ft(k){return k.split("-")[1]}function ai(k){return["top","bottom"].indexOf(k)>=0?"x":"y"}function St(k){var I,W=k.reference,Y=k.element,he=k.placement,ie=he?Tt(he):null,ce=he?Ft(he):null,oe=W.x+W.width/2-Y.width/2,ue=W.y+W.height/2-Y.height/2;switch(ie){case Re:I={x:oe,y:W.y-Y.height};break;case qe:I={x:oe,y:W.y+W.height};break;case Ie:I={x:W.x+W.width,y:ue};break;case nt:I={x:W.x-Y.width,y:ue};break;default:I={x:W.x,y:W.y}}var Te=ie?ai(ie):null;if(null!=Te){var xe="y"===Te?"height":"width";switch(ce){case Ve:I[Te]=I[Te]-(W[xe]/2-Y[xe]/2);break;case at:I[Te]=I[Te]+(W[xe]/2-Y[xe]/2)}}return I}function li(k){return Object.assign({},{top:0,right:0,bottom:0,left:0},k)}function Kt(k,I){return I.reduce(function(W,Y){return W[Y]=k,W},{})}function we(k,I){void 0===I&&(I={});var Y=I.placement,he=void 0===Y?k.placement:Y,ie=I.strategy,ce=void 0===ie?k.strategy:ie,oe=I.boundary,ue=void 0===oe?"clippingParents":oe,Te=I.rootBoundary,xe=void 0===Te?_t:Te,fe=I.elementContext,Xe=void 0===fe?xt:fe,Le=I.altBoundary,ze=void 0!==Le&&Le,We=I.padding,Me=void 0===We?0:We,dt=li("number"!=typeof Me?Me:Kt(Me,wt)),$e=k.rects.popper,Ge=k.elements[ze?Xe===xt?"reference":xt:Xe],Fe=function oi(k,I,W,Y){var ue,Te,xe,he="clippingParents"===I?(Te=h(X(ue=k)),n(xe=["absolute","fixed"].indexOf(C(ue).position)>=0&&l(ue)?Oe(ue):ue)?Te.filter(function(fe){return n(fe)&&It(fe,xe)&&"body"!==_(fe)}):[]):[].concat(I),ie=[].concat(he,[W]),oe=ie.reduce(function(ue,Te){var xe=Et(k,Te,Y);return ue.top=s(xe.top,ue.top),ue.right=o(xe.right,ue.right),ue.bottom=o(xe.bottom,ue.bottom),ue.left=s(xe.left,ue.left),ue},Et(k,ie[0],Y));return oe.width=oe.right-oe.left,oe.height=oe.bottom-oe.top,oe.x=oe.left,oe.y=oe.top,oe}(n(Ge)?Ge:Ge.contextElement||A(k.elements.popper),ue,xe,ce),je=w(k.elements.reference),et=St({reference:je,element:$e,strategy:"absolute",placement:he}),tt=Rt(Object.assign({},$e,et)),Je=Xe===xt?tt:je,gt={top:Fe.top-Je.top+dt.top,bottom:Je.bottom-Fe.bottom+dt.bottom,left:Fe.left-Je.left+dt.left,right:Je.right-Fe.right+dt.right},kt=k.modifiersData.offset;if(Xe===xt&&kt){var Vt=kt[he];Object.keys(gt).forEach(function(Gt){var Jt=[Ie,qe].indexOf(Gt)>=0?1:-1,Bt=[Re,qe].indexOf(Gt)>=0?"y":"x";gt[Gt]+=Vt[Bt]*Jt})}return gt}var pt={placement:"bottom",modifiers:[],strategy:"absolute"};function f(){for(var k=arguments.length,I=new Array(k),W=0;W<k;W++)I[W]=arguments[W];return!I.some(function(Y){return!(Y&&"function"==typeof Y.getBoundingClientRect)})}function R(k){void 0===k&&(k={});var W=k.defaultModifiers,Y=void 0===W?[]:W,he=k.defaultOptions,ie=void 0===he?pt:he;return function(ce,oe,ue){void 0===ue&&(ue=ie);var Te,xe,fe={placement:"bottom",orderedModifiers:[],options:Object.assign({},pt,ie),modifiersData:{},elements:{reference:ce,popper:oe},attributes:{},styles:{}},Xe=[],Le=!1,ze={state:fe,setOptions:function(Me){var dt="function"==typeof Me?Me(fe.options):Me;We(),fe.options=Object.assign({},ie,fe.options,dt),fe.scrollParents={reference:n(ce)?h(ce):ce.contextElement?h(ce.contextElement):[],popper:h(oe)};var lt,$e,Fe,je,Ge=(lt=[].concat(Y,fe.options.modifiers),$e=lt.reduce(function(Fe,je){var et=Fe[je.name];return Fe[je.name]=et?Object.assign({},et,je,{options:Object.assign({},et.options,je.options),data:Object.assign({},et.data,je.data)}):je,Fe},{}),Fe=Object.keys($e).map(function(Fe){return $e[Fe]}),je=jt(Fe),Ee.reduce(function(et,tt){return et.concat(je.filter(function(Je){return Je.phase===tt}))},[]));return fe.orderedModifiers=Ge.filter(function(Fe){return Fe.enabled}),fe.orderedModifiers.forEach(function(Fe){var et=Fe.options,Je=Fe.effect;if("function"==typeof Je){var gt=Je({state:fe,name:Fe.name,instance:ze,options:void 0===et?{}:et});Xe.push(gt||function(){})}}),ze.update()},forceUpdate:function(){if(!Le){var Me=fe.elements,dt=Me.reference,lt=Me.popper;if(f(dt,lt)){fe.rects={reference:N(dt,Oe(lt),"fixed"===fe.options.strategy),popper:Z(lt)},fe.reset=!1,fe.placement=fe.options.placement,fe.orderedModifiers.forEach(function(Je){return fe.modifiersData[Je.name]=Object.assign({},Je.data)});for(var $e=0;$e<fe.orderedModifiers.length;$e++)if(!0!==fe.reset){var Ge=fe.orderedModifiers[$e],Fe=Ge.fn,je=Ge.options;"function"==typeof Fe&&(fe=Fe({state:fe,options:void 0===je?{}:je,name:Ge.name,instance:ze})||fe)}else fe.reset=!1,$e=-1}}},update:(Te=function(){return new Promise(function(Me){ze.forceUpdate(),Me(fe)})},function(){return xe||(xe=new Promise(function(Me){Promise.resolve().then(function(){xe=void 0,Me(Te())})})),xe}),destroy:function(){We(),Le=!0}};if(!f(ce,oe))return ze;function We(){Xe.forEach(function(Me){return Me()}),Xe=[]}return ze.setOptions(ue).then(function(Me){!Le&&ue.onFirstUpdate&&ue.onFirstUpdate(Me)}),ze}}var z={passive:!0},ee={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(k){var I=k.state,W=k.instance,Y=k.options,he=Y.scroll,ie=void 0===he||he,ce=Y.resize,oe=void 0===ce||ce,ue=i(I.elements.popper),Te=[].concat(I.scrollParents.reference,I.scrollParents.popper);return ie&&Te.forEach(function(xe){xe.addEventListener("scroll",W.update,z)}),oe&&ue.addEventListener("resize",W.update,z),function(){ie&&Te.forEach(function(xe){xe.removeEventListener("scroll",W.update,z)}),oe&&ue.removeEventListener("resize",W.update,z)}},data:{}},$={name:"popperOffsets",enabled:!0,phase:"read",fn:function(k){var I=k.state;I.modifiersData[k.name]=St({reference:I.rects.reference,element:I.rects.popper,strategy:"absolute",placement:I.placement})},data:{}},me={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ae(k){var I,W=k.popper,Y=k.popperRect,he=k.placement,ie=k.variation,ce=k.offsets,oe=k.position,ue=k.gpuAcceleration,Te=k.adaptive,xe=k.roundOffsets,fe=k.isFixed,Xe=ce.x,Le=void 0===Xe?0:Xe,ze=ce.y,We=void 0===ze?0:ze,Me="function"==typeof xe?xe({x:Le,y:We}):{x:Le,y:We};Le=Me.x,We=Me.y;var dt=ce.hasOwnProperty("x"),lt=ce.hasOwnProperty("y"),$e=nt,Ge=Re,Fe=window;if(Te){var je=Oe(W),et="clientHeight",tt="clientWidth";je===i(W)&&"static"!==C(je=A(W)).position&&"absolute"===oe&&(et="scrollHeight",tt="scrollWidth"),(he===Re||(he===nt||he===Ie)&&ie===at)&&(Ge=qe,We-=(fe&&je===Fe&&Fe.visualViewport?Fe.visualViewport.height:je[et])-Y.height,We*=ue?1:-1),(he===nt||(he===Re||he===qe)&&ie===at)&&($e=Ie,Le-=(fe&&je===Fe&&Fe.visualViewport?Fe.visualViewport.width:je[tt])-Y.width,Le*=ue?1:-1)}var Je,Vt,Jt,Bt,gt=Object.assign({position:oe},Te&&me),kt=!0===xe?(Jt=(Vt={x:Le,y:We}).y,Bt=window.devicePixelRatio||1,{x:a(Vt.x*Bt)/Bt||0,y:a(Jt*Bt)/Bt||0}):{x:Le,y:We};return Le=kt.x,We=kt.y,Object.assign({},gt,ue?((Je={})[Ge]=lt?"0":"",Je[$e]=dt?"0":"",Je.transform=(Fe.devicePixelRatio||1)<=1?"translate("+Le+"px, "+We+"px)":"translate3d("+Le+"px, "+We+"px, 0)",Je):((I={})[Ge]=lt?We+"px":"",I[$e]=dt?Le+"px":"",I.transform="",I))}var Ne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(k){var I=k.state,W=k.options,Y=W.gpuAcceleration,he=void 0===Y||Y,ie=W.adaptive,ce=void 0===ie||ie,oe=W.roundOffsets,ue=void 0===oe||oe,Te={placement:Tt(I.placement),variation:Ft(I.placement),popper:I.elements.popper,popperRect:I.rects.popper,gpuAcceleration:he,isFixed:"fixed"===I.options.strategy};null!=I.modifiersData.popperOffsets&&(I.styles.popper=Object.assign({},I.styles.popper,ae(Object.assign({},Te,{offsets:I.modifiersData.popperOffsets,position:I.options.strategy,adaptive:ce,roundOffsets:ue})))),null!=I.modifiersData.arrow&&(I.styles.arrow=Object.assign({},I.styles.arrow,ae(Object.assign({},Te,{offsets:I.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ue})))),I.attributes.popper=Object.assign({},I.attributes.popper,{"data-popper-placement":I.placement})},data:{}},Ye={name:"applyStyles",enabled:!0,phase:"write",fn:function(k){var I=k.state;Object.keys(I.elements).forEach(function(W){var Y=I.styles[W]||{},he=I.attributes[W]||{},ie=I.elements[W];l(ie)&&_(ie)&&(Object.assign(ie.style,Y),Object.keys(he).forEach(function(ce){var oe=he[ce];!1===oe?ie.removeAttribute(ce):ie.setAttribute(ce,!0===oe?"":oe)}))})},effect:function(k){var I=k.state,W={popper:{position:I.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(I.elements.popper.style,W.popper),I.styles=W,I.elements.arrow&&Object.assign(I.elements.arrow.style,W.arrow),function(){Object.keys(I.elements).forEach(function(Y){var he=I.elements[Y],ie=I.attributes[Y]||{},ce=Object.keys(I.styles.hasOwnProperty(Y)?I.styles[Y]:W[Y]).reduce(function(oe,ue){return oe[ue]="",oe},{});l(he)&&_(he)&&(Object.assign(he.style,ce),Object.keys(ie).forEach(function(oe){he.removeAttribute(oe)}))})}},requires:["computeStyles"]},Ke={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(k){var I=k.state,Y=k.name,he=k.options.offset,ie=void 0===he?[0,0]:he,ce=zt.reduce(function(xe,fe){return xe[fe]=(Le=I.rects,ze=ie,We=Tt(Xe=fe),Me=[nt,Re].indexOf(We)>=0?-1:1,lt=(lt=(dt="function"==typeof ze?ze(Object.assign({},Le,{placement:Xe})):ze)[0])||0,$e=(($e=dt[1])||0)*Me,[nt,Ie].indexOf(We)>=0?{x:$e,y:lt}:{x:lt,y:$e}),xe;var Xe,Le,ze,We,Me,dt,lt,$e},{}),oe=ce[I.placement],Te=oe.y;null!=I.modifiersData.popperOffsets&&(I.modifiersData.popperOffsets.x+=oe.x,I.modifiersData.popperOffsets.y+=Te),I.modifiersData[Y]=ce}},Ce={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(k){return k.replace(/left|right|bottom|top/g,function(I){return Ce[I]})}var Be={start:"end",end:"start"};function m(k){return k.replace(/start|end/g,function(I){return Be[I]})}var b={name:"flip",enabled:!0,phase:"main",fn:function(k){var I=k.state,W=k.options,Y=k.name;if(!I.modifiersData[Y]._skip){for(var he=W.mainAxis,ie=void 0===he||he,ce=W.altAxis,oe=void 0===ce||ce,ue=W.fallbackPlacements,Te=W.padding,xe=W.boundary,fe=W.rootBoundary,Xe=W.altBoundary,Le=W.flipVariations,ze=void 0===Le||Le,We=W.allowedAutoPlacements,Me=I.options.placement,dt=Tt(Me),lt=ue||(dt!==Me&&ze?function(Qt){if(Tt(Qt)===Nt)return[];var $t=rt(Qt);return[m(Qt),$t,m($t)]}(Me):[rt(Me)]),$e=[Me].concat(lt).reduce(function(Qt,$t){return Qt.concat(Tt($t)===Nt?function g(k,I){void 0===I&&(I={});var he=I.boundary,ie=I.rootBoundary,ce=I.padding,oe=I.flipVariations,ue=I.allowedAutoPlacements,Te=void 0===ue?zt:ue,xe=Ft(I.placement),fe=xe?oe?st:st.filter(function(ze){return Ft(ze)===xe}):wt,Xe=fe.filter(function(ze){return Te.indexOf(ze)>=0});0===Xe.length&&(Xe=fe);var Le=Xe.reduce(function(ze,We){return ze[We]=we(k,{placement:We,boundary:he,rootBoundary:ie,padding:ce})[Tt(We)],ze},{});return Object.keys(Le).sort(function(ze,We){return Le[ze]-Le[We]})}(I,{placement:$t,boundary:xe,rootBoundary:fe,padding:Te,flipVariations:ze,allowedAutoPlacements:We}):$t)},[]),Ge=I.rects.reference,Fe=I.rects.popper,je=new Map,et=!0,tt=$e[0],Je=0;Je<$e.length;Je++){var gt=$e[Je],kt=Tt(gt),Vt=Ft(gt)===Ve,Gt=[Re,qe].indexOf(kt)>=0,Jt=Gt?"width":"height",Bt=we(I,{placement:gt,boundary:xe,rootBoundary:fe,altBoundary:Xe,padding:Te}),ct=Gt?Vt?Ie:nt:Vt?qe:Re;Ge[Jt]>Fe[Jt]&&(ct=rt(ct));var Ut=rt(ct),ui=[];if(ie&&ui.push(Bt[kt]<=0),oe&&ui.push(Bt[ct]<=0,Bt[Ut]<=0),ui.every(function(Qt){return Qt})){tt=gt,et=!1;break}je.set(gt,ui)}if(et)for(var ci=function(Qt){var $t=$e.find(function(Ei){var Ci=je.get(Ei);if(Ci)return Ci.slice(0,Qt).every(function(xi){return xi})});if($t)return tt=$t,"break"},wi=ze?3:1;wi>0&&"break"!==ci(wi);wi--);I.placement!==tt&&(I.modifiersData[Y]._skip=!0,I.placement=tt,I.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function P(k,I,W){return s(k,o(I,W))}var G={name:"preventOverflow",enabled:!0,phase:"main",fn:function(k){var Wi,Qi,I=k.state,W=k.options,Y=k.name,he=W.mainAxis,ie=void 0===he||he,ce=W.altAxis,oe=void 0!==ce&&ce,Xe=W.tether,Le=void 0===Xe||Xe,ze=W.tetherOffset,We=void 0===ze?0:ze,Me=we(I,{boundary:W.boundary,rootBoundary:W.rootBoundary,padding:W.padding,altBoundary:W.altBoundary}),dt=Tt(I.placement),lt=Ft(I.placement),$e=!lt,Ge=ai(dt),Fe="x"===Ge?"y":"x",je=I.modifiersData.popperOffsets,et=I.rects.reference,tt=I.rects.popper,Je="function"==typeof We?We(Object.assign({},I.rects,{placement:I.placement})):We,gt="number"==typeof Je?{mainAxis:Je,altAxis:Je}:Object.assign({mainAxis:0,altAxis:0},Je),kt=I.modifiersData.offset?I.modifiersData.offset[I.placement]:null,Vt={x:0,y:0};if(je){if(ie){var Gt,Jt="y"===Ge?Re:nt,Bt="y"===Ge?qe:Ie,ct="y"===Ge?"height":"width",Ut=je[Ge],ui=Ut+Me[Jt],ci=Ut-Me[Bt],wi=Le?-tt[ct]/2:0,Qt=lt===Ve?et[ct]:tt[ct],$t=lt===Ve?-tt[ct]:-et[ct],Ei=I.elements.arrow,Ci=Le&&Ei?Z(Ei):{width:0,height:0},xi=I.modifiersData["arrow#persistent"]?I.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ii=xi[Jt],Zt=xi[Bt],_i=P(0,et[ct],Ci[ct]),Ri=$e?et[ct]/2-wi-_i-Ii-gt.mainAxis:Qt-_i-Ii-gt.mainAxis,ln=$e?-et[ct]/2+wi+_i+Zt+gt.mainAxis:$t+_i+Zt+gt.mainAxis,Bi=I.elements.arrow&&Oe(I.elements.arrow),gi=null!=(Gt=null==kt?void 0:kt[Ge])?Gt:0,Mi=Ut+ln-gi,Gi=P(Le?o(ui,Ut+Ri-gi-(Bi?"y"===Ge?Bi.clientTop||0:Bi.clientLeft||0:0)):ui,Ut,Le?s(ci,Mi):ci);je[Ge]=Gi,Vt[Ge]=Gi-Ut}if(oe){var Ni,mi=je[Fe],Pi="y"===Fe?"height":"width",Xi=mi+Me["x"===Ge?Re:nt],zi=mi-Me["x"===Ge?qe:Ie],ji=-1!==[Re,nt].indexOf(dt),Yi=null!=(Ni=null==kt?void 0:kt[Fe])?Ni:0,Hi=ji?Xi:mi-et[Pi]-tt[Pi]-Yi+gt.altAxis,Ki=ji?mi+et[Pi]+tt[Pi]-Yi-gt.altAxis:zi,Ji=Le&&ji?(Qi=P(Hi,mi,Wi=Ki))>Wi?Wi:Qi:P(Le?Hi:Xi,mi,Le?Ki:zi);je[Fe]=Ji,Vt[Fe]=Ji-mi}I.modifiersData[Y]=Vt}},requiresIfExists:["offset"]},J={name:"arrow",enabled:!0,phase:"main",fn:function(k){var I,tt,Je,W=k.state,Y=k.name,he=k.options,ie=W.elements.arrow,ce=W.modifiersData.popperOffsets,oe=Tt(W.placement),ue=ai(oe),Te=[nt,Ie].indexOf(oe)>=0?"height":"width";if(ie&&ce){var xe=(Je=W,li("number"!=typeof(tt="function"==typeof(tt=he.padding)?tt(Object.assign({},Je.rects,{placement:Je.placement})):tt)?tt:Kt(tt,wt))),fe=Z(ie),Xe="y"===ue?Re:nt,Le="y"===ue?qe:Ie,ze=W.rects.reference[Te]+W.rects.reference[ue]-ce[ue]-W.rects.popper[Te],We=ce[ue]-W.rects.reference[ue],Me=Oe(ie),dt=Me?"y"===ue?Me.clientHeight||0:Me.clientWidth||0:0,Fe=dt/2-fe[Te]/2+(ze/2-We/2),je=P(xe[Xe],Fe,dt-fe[Te]-xe[Le]);W.modifiersData[Y]=((I={})[ue]=je,I.centerOffset=je-Fe,I)}},effect:function(k){var I=k.state,W=k.options.element,Y=void 0===W?"[data-popper-arrow]":W;null!=Y&&("string"!=typeof Y||(Y=I.elements.popper.querySelector(Y)))&&It(I.elements.popper,Y)&&(I.elements.arrow=Y)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pe(k,I,W){return void 0===W&&(W={x:0,y:0}),{top:k.top-I.height-W.y,right:k.right-I.width+W.x,bottom:k.bottom-I.height+W.y,left:k.left-I.width-W.x}}function Ue(k){return[Re,Ie,qe,nt].some(function(I){return k[I]>=0})}var be={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(k){var I=k.state,W=k.name,Y=I.rects.reference,he=I.rects.popper,ie=I.modifiersData.preventOverflow,ce=we(I,{elementContext:"reference"}),oe=we(I,{altBoundary:!0}),ue=pe(ce,Y),Te=pe(oe,he,ie),xe=Ue(ue),fe=Ue(Te);I.modifiersData[W]={referenceClippingOffsets:ue,popperEscapeOffsets:Te,isReferenceHidden:xe,hasPopperEscaped:fe},I.attributes.popper=Object.assign({},I.attributes.popper,{"data-popper-reference-hidden":xe,"data-popper-escaped":fe})}},Ht=R({defaultModifiers:[ee,$,Ne,Ye]}),ft=[ee,$,Ne,Ye,Ke,b,G,J,be],Wt=R({defaultModifiers:ft});e.applyStyles=Ye,e.arrow=J,e.computeStyles=Ne,e.createPopper=Wt,e.createPopperLite=Ht,e.defaultModifiers=ft,e.detectOverflow=we,e.eventListeners=ee,e.flip=b,e.hide=be,e.offset=Ke,e.popperGenerator=R,e.popperOffsets=$,e.preventOverflow=G,Object.defineProperty(e,"__esModule",{value:!0})}),function(e){e.version={versionStr:"4.1.0",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("0",10)};var d,i={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,l=Object.prototype.hasOwnProperty;e.isFunction=function(d){return"function"===e.type(d)},e.isArray=Array.isArray||function(d){return"array"===e.type(d)},e.isWindow=function(d){return d&&"object"==typeof d&&"setInterval"in d},e.type=function(d){return null==d?String(d):i[n.call(d)]||"object"},e.isPlainObject=function(d){if(!d||"object"!==OpenSeadragon.type(d)||d.nodeType||e.isWindow(d)||d.constructor&&!l.call(d,"constructor")&&!l.call(d.constructor.prototype,"isPrototypeOf"))return!1;var s;for(var o in d)s=o;return void 0===s||l.call(d,s)},e.isEmptyObject=function(d){for(var s in d)return!1;return!0},e.freezeObject=function(d){return e.freezeObject=Object.freeze?Object.freeze:function(s){return s},e.freezeObject(d)},e.supportsCanvas=(d=document.createElement("canvas"),!(!e.isFunction(d.getContext)||!d.getContext("2d"))),e.isCanvasTainted=function(d){var s=!1;try{d.getContext("2d").getImageData(0,0,1,1)}catch(o){s=!0}return s},e.supportsAddEventListener=!(!document.documentElement.addEventListener||!document.addEventListener),e.supportsRemoveEventListener=!(!document.documentElement.removeEventListener||!document.removeEventListener),e.supportsEventListenerOptions=function(){var d=0;if(e.supportsAddEventListener)try{var s={get capture(){return d++,!1},get once(){return d++,!1},get passive(){return d++,!1}};window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch(o){d=0}return d>=3}(),e.getCurrentPixelDensityRatio=function(){if(e.supportsCanvas){var d=document.createElement("canvas").getContext("2d"),s=window.devicePixelRatio||1,o=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1;return Math.max(s,1)/o}return 1},e.pixelDensityRatio=e.getCurrentPixelDensityRatio()}(OpenSeadragon),function(e){e.extend=function(){var o,a,p,y,w,O,_=arguments[0]||{},A=arguments.length,E=!1,C=1;for("boolean"==typeof _&&(E=_,_=arguments[1]||{},C=2),"object"!=typeof _&&!OpenSeadragon.isFunction(_)&&(_={}),A===C&&(_=this,--C);C<A;C++)if(null!==(o=arguments[C])||void 0!==o)for(a in o){var D=Object.getOwnPropertyDescriptor(o,a);void 0!==D?D.get||D.set?Object.defineProperty(_,a,D):_!==(y=D.value)&&(E&&y&&(OpenSeadragon.isPlainObject(y)||(w=OpenSeadragon.isArray(y)))?(p=_[a],w?(w=!1,O=p&&OpenSeadragon.isArray(p)?p:[]):O=p&&OpenSeadragon.isPlainObject(p)?p:{},_[a]=OpenSeadragon.extend(E,O,y)):void 0!==y&&(_[a]=y)):e.console.warn('Could not copy inherited property "'+a+'".')}return _},e.extend(e,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:function(){if("object"!=typeof navigator)return!1;var o=navigator.userAgent;return"string"==typeof o&&(-1!==o.indexOf("iPhone")||-1!==o.indexOf("iPad")||-1!==o.indexOf("iPod"))}(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(o,a){return function(){var p=arguments;return void 0===p&&(p=[]),a.apply(o,p)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(o){return e._viewers.get(this.getElement(o))},getElement:function(o){return"string"==typeof o&&(o=document.getElementById(o)),o},getElementPosition:function(o){var p,y,a=new e.Point;for(y=s(o=e.getElement(o),p="fixed"===e.getElementStyle(o).position);y;)a.x+=o.offsetLeft,a.y+=o.offsetTop,p&&(a=a.plus(e.getPageScroll())),y=s(o=y,p="fixed"===e.getElementStyle(o).position);return a},getElementOffset:function(o){var p,y,a=(o=e.getElement(o))&&o.ownerDocument,w={top:0,left:0};return a?(p=a.documentElement,void 0!==o.getBoundingClientRect&&(w=o.getBoundingClientRect()),new e.Point(w.left+((y=a===a.window?a:9===a.nodeType&&(a.defaultView||a.parentWindow)).pageXOffset||p.scrollLeft)-(p.clientLeft||0),w.top+(y.pageYOffset||p.scrollTop)-(p.clientTop||0))):new e.Point},getElementSize:function(o){return o=e.getElement(o),new e.Point(o.clientWidth,o.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(o){return(o=e.getElement(o)).currentStyle}:function(o){return o=e.getElement(o),window.getComputedStyle(o,"")},getCssPropertyWithVendorPrefix:function(o){var a={};return e.getCssPropertyWithVendorPrefix=function(p){if(void 0!==a[p])return a[p];var y=document.createElement("div").style,w=null;if(void 0!==y[p])w=p;else for(var O=["Webkit","Moz","MS","O","webkit","moz","ms","o"],_=e.capitalizeFirstLetter(p),A=0;A<O.length;A++){var E=O[A]+_;if(void 0!==y[E]){w=E;break}}return a[p]=w,w},e.getCssPropertyWithVendorPrefix(o)},capitalizeFirstLetter:function(o){return o.charAt(0).toUpperCase()+o.slice(1)},positiveModulo:function(o,a){var p=o%a;return p<0&&(p+=a),p},pointInElement:function(o,a){o=e.getElement(o);var p=e.getElementOffset(o),y=e.getElementSize(o);return a.x>=p.x&&a.x<p.x+y.x&&a.y<p.y+y.y&&a.y>=p.y},getMousePosition:function(o){if("number"==typeof o.pageX)e.getMousePosition=function(a){var p=new e.Point;return p.x=a.pageX,p.y=a.pageY,p};else{if("number"!=typeof o.clientX)throw new Error("Unknown event mouse position, no known technique.");e.getMousePosition=function(a){var p=new e.Point;return p.x=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,p.y=a.clientY+document.body.scrollTop+document.documentElement.scrollTop,p}}return e.getMousePosition(o)},getPageScroll:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.pageXOffset)e.getPageScroll=function(){return new e.Point(window.pageXOffset,window.pageYOffset)};else if(a.scrollLeft||a.scrollTop)e.getPageScroll=function(){return new e.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!o.scrollLeft&&!o.scrollTop)return new e.Point(0,0);e.getPageScroll=function(){return new e.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return e.getPageScroll()},setPageScroll:function(o){if(void 0!==window.scrollTo)e.setPageScroll=function(y){window.scrollTo(y.x,y.y)};else{var a=e.getPageScroll();if(a.x===o.x&&a.y===o.y)return;document.body.scrollLeft=o.x,document.body.scrollTop=o.y;var p=e.getPageScroll();if(p.x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(y){document.body.scrollLeft=y.x,document.body.scrollTop=y.y});if(document.documentElement.scrollLeft=o.x,document.documentElement.scrollTop=o.y,(p=e.getPageScroll()).x!==a.x&&p.y!==a.y)return void(e.setPageScroll=function(y){document.documentElement.scrollLeft=y.x,document.documentElement.scrollTop=y.y});e.setPageScroll=function(y){}}e.setPageScroll(o)},getWindowSize:function(){var o=document.documentElement||{},a=document.body||{};if("number"==typeof window.innerWidth)e.getWindowSize=function(){return new e.Point(window.innerWidth,window.innerHeight)};else if(o.clientWidth||o.clientHeight)e.getWindowSize=function(){return new e.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!a.clientWidth&&!a.clientHeight)throw new Error("Unknown window size, no known technique.");e.getWindowSize=function(){return new e.Point(document.body.clientWidth,document.body.clientHeight)}}return e.getWindowSize()},makeCenteredNode:function(o){o=e.getElement(o);var a=[e.makeNeutralElement("div"),e.makeNeutralElement("div"),e.makeNeutralElement("div")];return e.extend(a[0].style,{display:"table",height:"100%",width:"100%"}),e.extend(a[1].style,{display:"table-row"}),e.extend(a[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),a[0].appendChild(a[1]),a[1].appendChild(a[2]),a[2].appendChild(o),a[0]},makeNeutralElement:function(o){var a=document.createElement(o),p=a.style;return p.background="transparent none",p.border="none",p.margin="0px",p.padding="0px",p.position="static",a},now:function(){return e.now=Date.now?Date.now:function(){return(new Date).getTime()},e.now()},makeTransparentImage:function(o){var a=e.makeNeutralElement("img");return a.src=o,a},setElementOpacity:function(o,a,p){var y;o=e.getElement(o),p&&!e.Browser.alpha&&(a=Math.round(a)),e.Browser.opacity?o.style.opacity=a<1?a:"":a<1?(y=Math.round(100*a),o.style.filter="alpha(opacity="+y+")"):o.style.filter=""},setElementTouchActionNone:function(o){void 0!==(o=e.getElement(o)).style.touchAction?o.style.touchAction="none":void 0!==o.style.msTouchAction&&(o.style.msTouchAction="none")},setElementPointerEvents:function(o,a){void 0!==(o=e.getElement(o)).style&&void 0!==o.style.pointerEvents&&(o.style.pointerEvents=a)},setElementPointerEventsNone:function(o){e.setElementPointerEvents(o,"none")},addClass:function(o,a){(o=e.getElement(o)).className?-1===(" "+o.className+" ").indexOf(" "+a+" ")&&(o.className+=" "+a):o.className=a},indexOf:function(o,a,p){return this.indexOf=Array.prototype.indexOf?function(y,w,O){return y.indexOf(w,O)}:function(y,w,O){var _,E,A=O||0;if(!y)throw new TypeError;if(0===(E=y.length)||A>=E)return-1;for(A<0&&(A=E-Math.abs(A)),_=A;_<E;_++)if(y[_]===w)return _;return-1},this.indexOf(o,a,p)},removeClass:function(o,a){var p,w,y=[];for(p=(o=e.getElement(o)).className.split(/\s+/),w=0;w<p.length;w++)p[w]&&p[w]!==a&&y.push(p[w]);o.className=y.join(" ")},normalizeEventListenerOptions:function(o){return void 0!==o?"boolean"==typeof o?e.supportsEventListenerOptions?{capture:o}:o:e.supportsEventListenerOptions?o:void 0!==o.capture&&o.capture:!!e.supportsEventListenerOptions&&{capture:!1}},addEvent:function(){if(e.supportsAddEventListener)return function(o,a,p,y){y=e.normalizeEventListenerOptions(y),(o=e.getElement(o)).addEventListener(a,p,y)};if(document.documentElement.attachEvent&&document.attachEvent)return function(o,a,p){(o=e.getElement(o)).attachEvent("on"+a,p)};throw new Error("No known event model.")}(),removeEvent:function(){if(e.supportsRemoveEventListener)return function(o,a,p,y){y=e.normalizeEventListenerOptions(y),(o=e.getElement(o)).removeEventListener(a,p,y)};if(document.documentElement.detachEvent&&document.detachEvent)return function(o,a,p){(o=e.getElement(o)).detachEvent("on"+a,p)};throw new Error("No known event model.")}(),cancelEvent:function(o){o.preventDefault()},eventIsCanceled:function(o){return o.defaultPrevented},stopEvent:function(o){o.stopPropagation()},createCallback:function(o,a){var y,p=[];for(y=2;y<arguments.length;y++)p.push(arguments[y]);return function(){var O,w=p.concat([]);for(O=0;O<arguments.length;O++)w.push(arguments[O]);return a.apply(o,w)}},getUrlParameter:function(o){return d[o]||null},getUrlProtocol:function(o){var a=o.match(/^([a-z]+:)\/\//i);return null===a?window.location.protocol:a[1].toLowerCase()},createAjaxRequest:function(o){var a;try{a=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(p){a=!1}if(a)e.createAjaxRequest=window.XMLHttpRequest?function(p){return p?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw new Error("Browser doesn't support XMLHttpRequest.");e.createAjaxRequest=function(){return new XMLHttpRequest}}return e.createAjaxRequest(o)},makeAjaxRequest:function(o,a,p){var y,w,O,_;e.isPlainObject(o)&&(a=o.success,p=o.error,y=o.withCredentials,w=o.headers,O=o.responseType||null,_=o.postData||null,o=o.url);var A=e.getUrlProtocol(o),E=e.createAjaxRequest("file:"===A);if(!e.isFunction(a))throw new Error("makeAjaxRequest requires a success callback");E.onreadystatechange=function(){4===E.readyState&&(E.onreadystatechange=function(){},E.status>=200&&E.status<300||0===E.status&&"http:"!==A&&"https:"!==A?a(E):e.isFunction(p)?p(E):e.console.error("AJAX request returned %d: %s",E.status,o))};var C=_?"POST":"GET";try{if(E.open(C,o,!0),O&&(E.responseType=O),w)for(var D in w)Object.prototype.hasOwnProperty.call(w,D)&&w[D]&&E.setRequestHeader(D,w[D]);y&&(E.withCredentials=!0),E.send(_)}catch(N){e.console.error("%s while making AJAX request: %s",N.name,N.message),E.onreadystatechange=function(){},e.isFunction(p)&&p(E,N)}return E},jsonp:function(o){var a,p=o.url,y=document.head||document.getElementsByTagName("head")[0]||document.documentElement,w=o.callbackName||"openseadragon"+e.now(),O=window[w],A=o.param||"callback",E=o.callback;p=p.replace(/(=)\?(&|$)|\?\?/i,"$1"+w+"$2"),p+=(/\?/.test(p)?"&":"?")+A+"="+w,window[w]=function(C){if(O)window[w]=O;else try{delete window[w]}catch(D){}E&&e.isFunction(E)&&E(C)},a=document.createElement("script"),(void 0!==o.async||!1!==o.async)&&(a.async="async"),o.scriptCharset&&(a.charset=o.scriptCharset),a.src=p,a.onload=a.onreadystatechange=function(C,D){(D||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,y&&a.parentNode&&y.removeChild(a),a=void 0)},y.insertBefore(a,y.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(o){if(window.DOMParser)e.parseXml=function(a){return(new DOMParser).parseFromString(a,"text/xml")};else{if(!window.ActiveXObject)throw new Error("Browser doesn't support XML DOM.");e.parseXml=function(a){var p=null;return(p=new ActiveXObject("Microsoft.XMLDOM")).async=!1,p.loadXML(a),p}}return e.parseXml(o)},parseJSON:function(o){return e.parseJSON=window.JSON.parse,e.parseJSON(o)},imageFormatSupported:function(o){return!!l[(o=o||"").toLowerCase()]},setImageFormatsSupported:function(o){e.extend(l,o)}});var n=function(o){};e.console=window.console||{log:n,debug:n,info:n,warn:n,error:n,assert:n},e.Browser={vendor:e.BROWSERS.UNKNOWN,version:0,alpha:!0};var l={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},d={};function s(o,a){return a&&o!==document.body?document.body:o.offsetParent}(function(){var o=navigator.appVersion,a=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(a.substring(a.indexOf("MSIE")+5,a.indexOf(";",a.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(a.indexOf("Edge")>=0?(e.Browser.vendor=e.BROWSERS.EDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edge")+5))):a.indexOf("Edg")>=0?(e.Browser.vendor=e.BROWSERS.CHROMEEDGE,e.Browser.version=parseFloat(a.substring(a.indexOf("Edg")+4))):a.indexOf("Firefox")>=0?(e.Browser.vendor=e.BROWSERS.FIREFOX,e.Browser.version=parseFloat(a.substring(a.indexOf("Firefox")+8))):a.indexOf("Safari")>=0?(e.Browser.vendor=a.indexOf("Chrome")>=0?e.BROWSERS.CHROME:e.BROWSERS.SAFARI,e.Browser.version=parseFloat(a.substring(a.substring(0,a.indexOf("Safari")).lastIndexOf("/")+1,a.indexOf("Safari")))):null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(a)&&(e.Browser.vendor=e.BROWSERS.IE,e.Browser.version=parseFloat(RegExp.$1)));break;case"Opera":e.Browser.vendor=e.BROWSERS.OPERA,e.Browser.version=parseFloat(o)}var O,_,A,w=window.location.search.substring(1).split("&");for(A=0;A<w.length;A++)if((_=(O=w[A]).indexOf("="))>0){var E=O.substring(0,_),C=O.substring(_+1);try{d[E]=decodeURIComponent(C)}catch(D){e.console.error("Ignoring malformed URL parameter: %s=%s",E,C)}}e.Browser.alpha=!(e.Browser.vendor===e.BROWSERS.CHROME&&e.Browser.version<2),e.Browser.opacity=!0,e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version<11&&e.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(o){var a=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,p=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame;if(a&&p)e.requestAnimationFrame=function(){return a.apply(o,arguments)},e.cancelAnimationFrame=function(){return p.apply(o,arguments)};else{var _,y=[],w=[],O=0;e.requestAnimationFrame=function(A){return y.push([++O,A]),_||(_=setInterval(function(){if(y.length){var E=e.now(),C=w;for(w=y,y=C;w.length;)w.shift()[1](E)}else clearInterval(_),_=void 0},20)),O},e.cancelAnimationFrame=function(A){var E,C;for(E=0,C=y.length;E<C;E+=1)if(y[E][0]===A)return void y.splice(E,1);for(E=0,C=w.length;E<C;E+=1)if(w[E][0]===A)return void w.splice(E,1)}}}(window)}(OpenSeadragon),function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof module&&module.exports?module.exports=i():e.OpenSeadragon=i()}(this,function(){return OpenSeadragon}),function(e){var i={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.fullscreenElement},i.requestFullScreen=function(n){return n.requestFullscreen()},i.exitFullScreen=function(){document.exitFullscreen()},i.fullScreenEventName="fullscreenchange",i.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.msFullscreenElement},i.requestFullScreen=function(n){return n.msRequestFullscreen()},i.exitFullScreen=function(){document.msExitFullscreen()},i.fullScreenEventName="MSFullscreenChange",i.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitFullscreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullscreen()},i.exitFullScreen=function(){document.webkitExitFullscreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},i.requestFullScreen=function(n){return n.webkitRequestFullScreen()},i.exitFullScreen=function(){document.webkitCancelFullScreen()},i.fullScreenEventName="webkitfullscreenchange",i.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(i.supportsFullScreen=!0,i.getFullScreenElement=function(){return document.mozFullScreenElement},i.requestFullScreen=function(n){return n.mozRequestFullScreen()},i.exitFullScreen=function(){document.mozCancelFullScreen()},i.fullScreenEventName="mozfullscreenchange",i.fullScreenErrorEventName="mozfullscreenerror"),i.isFullScreen=function(){return null!==i.getFullScreenElement()},i.cancelFullScreen=function(){e.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),i.exitFullScreen()},e.extend(e,i)}(OpenSeadragon),function(e){e.EventSource=function(){this.events={}},e.EventSource.prototype={addOnceHandler:function(i,n,l,d,s){var o=this;d=d||1;var a=0,p=function(y){return++a===d&&o.removeHandler(i,p),n(y)};this.addHandler(i,p,l,s)},addHandler:function(i,n,l,d){var s=this.events[i];if(s||(this.events[i]=s=[]),n&&e.isFunction(n)){var o=s.length,a={handler:n,userData:l||null,priority:d||0};for(s[o]=a;o>0&&s[o-1].priority<s[o].priority;)s[o]=s[o-1],s[o-1]=a,o--}},removeHandler:function(i,n){var s,l=this.events[i],d=[];if(l&&e.isArray(l)){for(s=0;s<l.length;s++)l[s].handler!==n&&d.push(l[s]);this.events[i]=d}},numberOfHandlers:function(i){var n=this.events[i];return n?n.length:0},removeAllHandlers:function(i){if(i)this.events[i]=[];else for(var n in this.events)this.events[n]=[]},getHandler:function(i){var n=this.events[i];return n&&n.length?(n=1===n.length?[n[0]]:Array.apply(null,n),function(l,d){var s,o=n.length;for(s=0;s<o;s++)n[s]&&(d.eventSource=l,d.userData=n[s].userData,n[s].handler(d))}):null},raiseEvent:function(i,n){var l=this.getHandler(i);if(l)return l(this,n||{})}}}(OpenSeadragon),function(e){var i=[],n={};e.MouseTracker=function(m){i.push(this);var g=arguments;e.isPlainObject(m)||(m={element:g[0],clickTimeThreshold:g[1],clickDistThreshold:g[2]}),this.hash=Math.random(),this.element=e.getElement(m.element),this.clickTimeThreshold=m.clickTimeThreshold||e.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=m.clickDistThreshold||e.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=m.dblClickTimeThreshold||e.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=m.dblClickDistThreshold||e.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=m.userData||null,this.stopDelay=m.stopDelay||50,this.preProcessEventHandler=m.preProcessEventHandler||null,this.contextMenuHandler=m.contextMenuHandler||null,this.enterHandler=m.enterHandler||null,this.leaveHandler=m.leaveHandler||null,this.exitHandler=m.exitHandler||null,this.overHandler=m.overHandler||null,this.outHandler=m.outHandler||null,this.pressHandler=m.pressHandler||null,this.nonPrimaryPressHandler=m.nonPrimaryPressHandler||null,this.releaseHandler=m.releaseHandler||null,this.nonPrimaryReleaseHandler=m.nonPrimaryReleaseHandler||null,this.moveHandler=m.moveHandler||null,this.scrollHandler=m.scrollHandler||null,this.clickHandler=m.clickHandler||null,this.dblClickHandler=m.dblClickHandler||null,this.dragHandler=m.dragHandler||null,this.dragEndHandler=m.dragEndHandler||null,this.pinchHandler=m.pinchHandler||null,this.stopHandler=m.stopHandler||null,this.keyDownHandler=m.keyDownHandler||null,this.keyUpHandler=m.keyUpHandler||null,this.keyHandler=m.keyHandler||null,this.focusHandler=m.focusHandler||null,this.blurHandler=m.blurHandler||null;var b=this;n[this.hash]={click:function(P){Z(b,P)},dblclick:function(P){X(b,P)},keydown:function(P){se(b,P)},keyup:function(P){h(b,P)},keypress:function(P){re(b,P)},focus:function(P){ye(b,P)},blur:function(P){Oe(b,P)},contextmenu:function(P){Re(b,P)},wheel:function(P){qe(b,P)},mousewheel:function(P){Ie(b,P)},DOMMouseScroll:function(P){Ie(b,P)},MozMousePixelScroll:function(P){Ie(b,P)},losecapture:function(P){Nt(b,P)},mouseenter:function(P){jt(b,P)},mouseleave:function(P){Tt(b,P)},mouseover:function(P){It(b,P)},mouseout:function(P){Rt(b,P)},mousedown:function(P){Et(b,P)},mouseup:function(P){oi(b,P)},mousemove:function(P){St(b,P)},touchstart:function(P){wt(b,P)},touchend:function(P){Ve(b,P)},touchmove:function(P){at(b,P)},touchcancel:function(P){_t(b,P)},gesturestart:function(P){xt(0,P)},gesturechange:function(P){st(0,P)},gotpointercapture:function(P){zt(b,P)},lostpointercapture:function(P){Ee(b,P)},pointerenter:function(P){jt(b,P)},pointerleave:function(P){Tt(b,P)},pointerover:function(P){It(b,P)},pointerout:function(P){Rt(b,P)},pointerdown:function(P){Et(b,P)},pointerup:function(P){oi(b,P)},pointermove:function(P){St(b,P)},pointercancel:function(P){we(b,P)},pointerupcaptured:function(P){Ft(b,P)},pointermovecaptured:function(P){li(b,P)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,e.MouseTracker.havePointerEvents&&e.setElementPointerEvents(this.element,"auto"),this.exitHandler&&e.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),m.startDisabled||this.setTracking(!0)},e.MouseTracker.prototype={destroy:function(){var m;for(a(this),this.element=null,m=0;m<i.length;m++)if(i[m]===this){i.splice(m,1);break}n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(m){return m?function o(m){var b,P,g=n[m.hash];if(!g.tracking){for(P=0;P<e.MouseTracker.subscribeEvents.length;P++)e.addEvent(m.element,b=e.MouseTracker.subscribeEvents[P],g[b],b===e.MouseTracker.wheelEventName&&{passive:!1,capture:!1});s(m),g.tracking=!0}}(this):a(this),this},getActivePointersListByType:function(m){var b,G,g=n[this.hash],P=g.activePointersLists.length;for(b=0;b<P;b++)if(g.activePointersLists[b].type===m)return g.activePointersLists[b];return G=new e.MouseTracker.GesturePointList(m),g.activePointersLists.push(G),G},getActivePointerCount:function(){var g,m=n[this.hash],b=m.activePointersLists.length,P=0;for(g=0;g<b;g++)P+=m.activePointersLists[g].getLength();return P},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var m,g,b,P,G,l=function(){try{return window.self!==window.top}catch(m){return!0}}();function d(m){try{return m.addEventListener&&m.removeEventListener}catch(g){return!1}}function s(m){var b,P,G,J,pe,g=n[m.hash],Ue=g.activePointersLists.length;for(b=0;b<Ue;b++)if((G=g.activePointersLists[b]).getLength()>0){for(pe=[],J=G.asArray(),P=0;P<J.length;P++)pe.push(J[P]);for(P=0;P<pe.length;P++)f(m,G,pe[P])}for(b=0;b<Ue;b++)g.activePointersLists.pop();g.sentDragEvent=!1}function a(m){var b,P,g=n[m.hash];if(g.tracking){for(P=0;P<e.MouseTracker.subscribeEvents.length;P++)e.removeEvent(m.element,b=e.MouseTracker.subscribeEvents[P],g[b],!1);s(m),g.tracking=!1}}function p(m,g){var b=n[m.hash];if("pointerevent"===g)return{upName:"pointerup",upHandler:b.pointerupcaptured,moveName:"pointermove",moveHandler:b.pointermovecaptured};if("mouse"===g)return{upName:"pointerup",upHandler:b.pointerupcaptured,moveName:"pointermove",moveHandler:b.pointermovecaptured};if("touch"===g)return{upName:"touchend",upHandler:b.touchendcaptured,moveName:"touchmove",moveHandler:b.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function w(m,g){var b,G;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents){if(!(G=m.getActivePointersListByType(g.type).getById(g.id))||!G.captured)return;try{m.element.releasePointerCapture(g.id)}catch(J){}}else m.element.releaseCapture();else b=p(m,e.MouseTracker.havePointerEvents?"pointerevent":g.type),l&&d(window.top)&&e.removeEvent(window.top,b.upName,b.upHandler,!0),e.removeEvent(e.MouseTracker.captureElement,b.moveName,b.moveHandler,!0),e.removeEvent(e.MouseTracker.captureElement,b.upName,b.upHandler,!0);ee(m,g,!1)}function O(m){return e.MouseTracker.havePointerEvents?m.pointerId:e.MouseTracker.mousePointerId}function _(m){return e.MouseTracker.havePointerEvents?m.pointerType||(e.Browser.vendor===e.BROWSERS.IE?"mouse":""):"mouse"}function A(m){return!e.MouseTracker.havePointerEvents||m.isPrimary}function E(m){return e.getMousePosition(m)}function C(m,g){return D(E(m),g)}function D(m,g){var b=e.getElementOffset(g);return m.minus(b)}function N(m,g){return new e.Point((m.x+g.x)/2,(m.y+g.y)/2)}function Z(m,g){var b={originalEvent:g,eventType:"click",pointerType:"mouse",isEmulated:!1};z(m,b),b.preventDefault&&!b.defaultPrevented&&e.cancelEvent(g),b.stopPropagation&&e.stopEvent(g)}function X(m,g){var b={originalEvent:g,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};z(m,b),b.preventDefault&&!b.defaultPrevented&&e.cancelEvent(g),b.stopPropagation&&e.stopEvent(g)}function se(m,g){var b=null,P={originalEvent:g,eventType:"keydown",pointerType:"",isEmulated:!1};z(m,P),m.keyDownHandler&&!P.preventGesture&&!P.defaultPrevented&&m.keyDownHandler(b={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:m.userData}),(b&&b.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function h(m,g){var b=null,P={originalEvent:g,eventType:"keyup",pointerType:"",isEmulated:!1};z(m,P),m.keyUpHandler&&!P.preventGesture&&!P.defaultPrevented&&m.keyUpHandler(b={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:m.userData}),(b&&b.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function re(m,g){var b=null,P={originalEvent:g,eventType:"keypress",pointerType:"",isEmulated:!1};z(m,P),m.keyHandler&&!P.preventGesture&&!P.defaultPrevented&&m.keyHandler(b={eventSource:m,keyCode:g.keyCode?g.keyCode:g.charCode,ctrl:g.ctrlKey,shift:g.shiftKey,alt:g.altKey,meta:g.metaKey,originalEvent:g,preventDefault:P.preventDefault||P.defaultPrevented,userData:m.userData}),(b&&b.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function ye(m,g){var b={originalEvent:g,eventType:"focus",pointerType:"",isEmulated:!1};z(m,b),m.focusHandler&&!b.preventGesture&&m.focusHandler({eventSource:m,originalEvent:g,userData:m.userData})}function Oe(m,g){var b={originalEvent:g,eventType:"blur",pointerType:"",isEmulated:!1};z(m,b),m.blurHandler&&!b.preventGesture&&m.blurHandler({eventSource:m,originalEvent:g,userData:m.userData})}function Re(m,g){var b=null,P={originalEvent:g,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};z(m,P),m.contextMenuHandler&&!P.preventGesture&&!P.defaultPrevented&&(b={eventSource:m,position:D(E(g),m.element),originalEvent:P.originalEvent,preventDefault:P.preventDefault||P.defaultPrevented,userData:m.userData},m.contextMenuHandler(b)),(b&&b.preventDefault||P.preventDefault&&!P.defaultPrevented)&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function qe(m,g){nt(m,g,g)}function Ie(m,g){var b={target:g.target||g.srcElement,type:"wheel",shiftKey:g.shiftKey||!1,clientX:g.clientX,clientY:g.clientY,pageX:g.pageX?g.pageX:g.clientX,pageY:g.pageY?g.pageY:g.clientY,deltaMode:"MozMousePixelScroll"===g.type?0:1,deltaX:0,deltaZ:0};b.deltaY="mousewheel"===e.MouseTracker.wheelEventName?-g.wheelDelta/e.DEFAULT_SETTINGS.pixelsPerWheelLine:g.detail,nt(m,b,g)}function nt(m,g,b){var P,G,J=null;P=g.deltaY<0?1:-1,z(m,G={originalEvent:g,eventType:"wheel",pointerType:"mouse",isEmulated:g!==b}),m.scrollHandler&&!G.preventGesture&&!G.defaultPrevented&&(J={eventSource:m,pointerType:"mouse",position:C(g,m.element),scroll:P,shift:g.shiftKey,isTouchEvent:!1,originalEvent:b,preventDefault:G.preventDefault||G.defaultPrevented,userData:m.userData},m.scrollHandler(J)),G.stopPropagation&&e.stopEvent(b),(J&&J.preventDefault||G.preventDefault&&!G.defaultPrevented)&&e.cancelEvent(b)}function Nt(m,g){var b={id:e.MouseTracker.mousePointerId,type:"mouse"},P={originalEvent:g,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};z(m,P),g.target===m.element&&ee(m,b,!1),P.stopPropagation&&e.stopEvent(g)}function wt(m,g){var b,P,J,G=g.changedTouches.length,pe=m.getActivePointersListByType("touch");b=e.now(),pe.getLength()>g.touches.length-G&&e.console.warn("Tracked touch contact count doesn't match event.touches.length");var Ue={originalEvent:g,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(z(m,Ue),P=0;P<G;P++)$(m,Ue,J={id:g.changedTouches[P].identifier,type:"touch",isPrimary:0===pe.getLength(),currentPos:E(g.changedTouches[P]),currentTime:b}),Ye(m,Ue,J,0),ee(m,J,!0);Ue.preventDefault&&!Ue.defaultPrevented&&e.cancelEvent(g),Ue.stopPropagation&&e.stopEvent(g)}function Ve(m,g){var b,P,J,G=g.changedTouches.length;b=e.now();var pe={originalEvent:g,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(z(m,pe),P=0;P<G;P++)Ke(m,pe,J={id:g.changedTouches[P].identifier,type:"touch",currentPos:E(g.changedTouches[P]),currentTime:b},0),ee(m,J,!1),me(m,pe,J);pe.preventDefault&&!pe.defaultPrevented&&e.cancelEvent(g),pe.stopPropagation&&e.stopEvent(g)}function at(m,g){var b,P,G=g.changedTouches.length;b=e.now();var pe={originalEvent:g,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(z(m,pe),P=0;P<G;P++)Ce(m,pe,{id:g.changedTouches[P].identifier,type:"touch",currentPos:E(g.changedTouches[P]),currentTime:b});pe.preventDefault&&!pe.defaultPrevented&&e.cancelEvent(g),pe.stopPropagation&&e.stopEvent(g)}function _t(m,g){var P,b=g.changedTouches.length,J={originalEvent:g,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(z(m,J),P=0;P<b;P++)rt(m,0,{id:g.changedTouches[P].identifier,type:"touch"});J.stopPropagation&&e.stopEvent(g)}function xt(m,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function st(m,g){return e.eventIsCanceled(g)||g.preventDefault(),!1}function zt(m,g){var b={originalEvent:g,eventType:"gotpointercapture",pointerType:_(g),isEmulated:!1};z(m,b),g.target===m.element&&ee(m,{id:g.pointerId,type:_(g)},!0),b.stopPropagation&&e.stopEvent(g)}function Ee(m,g){var b={originalEvent:g,eventType:"lostpointercapture",pointerType:_(g),isEmulated:!1};z(m,b),g.target===m.element&&ee(m,{id:g.pointerId,type:_(g)},!1),b.stopPropagation&&e.stopEvent(g)}function jt(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerenter",pointerType:b.type,isEmulated:!1};z(m,P),$(m,P,b)}function Tt(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerleave",pointerType:b.type,isEmulated:!1};z(m,P),me(m,P,b)}function It(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerover",pointerType:b.type,isEmulated:!1};z(m,P),function ae(m,g,b){var P,G;(G=(P=m.getActivePointersListByType(b.type)).getById(b.id))?b=G:(b.captured=!1,b.insideElementPressed=!1),m.overHandler&&m.overHandler({eventSource:m,pointerType:b.type,position:D(b.currentPos,m.element),buttons:P.buttons,pointers:m.getActivePointerCount(),insideElementPressed:b.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData})}(m,P,b),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function Rt(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointerout",pointerType:b.type,isEmulated:!1};z(m,P),function Ne(m,g,b){var P,G;(G=(P=m.getActivePointersListByType(b.type)).getById(b.id))?b=G:(b.captured=!1,b.insideElementPressed=!1),m.outHandler&&m.outHandler({eventSource:m,pointerType:b.type,position:b.currentPos&&D(b.currentPos,m.element),buttons:P.buttons,pointers:m.getActivePointerCount(),insideElementPressed:b.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData})}(m,P,b),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function Et(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P=e.MouseTracker.havePointerEvents&&"touch"===b.type&&e.Browser.vendor!==e.BROWSERS.IE,G={originalEvent:g,eventType:"pointerdown",pointerType:b.type,isEmulated:!1};z(m,G),Ye(m,G,b,g.button),G.preventDefault&&!G.defaultPrevented&&e.cancelEvent(g),G.stopPropagation&&e.stopEvent(g),G.shouldCapture&&(P?ee(m,b,!0):function y(m,g){var b;if(e.MouseTracker.havePointerCapture)if(e.MouseTracker.havePointerEvents)try{m.element.setPointerCapture(g.id)}catch(P){return void e.console.warn("setPointerCapture() called on invalid pointer ID")}else m.element.setCapture(!0);else b=p(m,e.MouseTracker.havePointerEvents?"pointerevent":g.type),l&&d(window.top)&&e.addEvent(window.top,b.upName,b.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,b.upName,b.upHandler,!0),e.addEvent(e.MouseTracker.captureElement,b.moveName,b.moveHandler,!0);ee(m,g,!0)}(m,b))}function oi(m,g){ai(m,g)}function Ft(m,g){m.getActivePointersListByType(_(g)).getById(g.pointerId)&&ai(m,g),e.stopEvent(g)}function ai(m,g){var b,P={originalEvent:g,eventType:"pointerup",pointerType:(b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()}).type,isEmulated:!1};z(m,P),Ke(m,P,b,g.button),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g),P.shouldReleaseCapture&&(g.target===m.element?w(m,b):ee(m,b,!1))}function St(m,g){Kt(m,g)}function li(m,g){m.getActivePointersListByType(_(g)).getById(g.pointerId)&&Kt(m,g),e.stopEvent(g)}function Kt(m,g){var b={id:O(g),type:_(g),isPrimary:A(g),currentPos:E(g),currentTime:e.now()},P={originalEvent:g,eventType:"pointermove",pointerType:b.type,isEmulated:!1};z(m,P),Ce(m,P,b),P.preventDefault&&!P.defaultPrevented&&e.cancelEvent(g),P.stopPropagation&&e.stopEvent(g)}function we(m,g){var b={id:g.pointerId,type:_(g)},P={originalEvent:g,eventType:"pointercancel",pointerType:b.type,isEmulated:!1};z(m,P),rt(m,0,b),P.stopPropagation&&e.stopEvent(g)}function pt(m,g){return g.speed=0,g.direction=0,g.contactPos=g.currentPos,g.contactTime=g.currentTime,g.lastPos=g.currentPos,g.lastTime=g.currentTime,m.add(g)}function f(m,g,b){var P,G=g.getById(b.id);return G?(G.captured&&(e.console.warn("stopTrackingPointer() called on captured pointer"),w(m,G)),g.removeContact(),P=g.removeById(b.id)):P=g.getLength(),P}function z(m,g){g.eventSource=m,g.eventPhase=g.originalEvent&&void 0!==g.originalEvent.eventPhase?g.originalEvent.eventPhase:0,g.defaultPrevented=e.eventIsCanceled(g.originalEvent),g.shouldCapture=!1,g.shouldReleaseCapture=!1,g.userData=m.userData,function R(m,g){switch(g.eventType){case"pointermove":case"pointerdown":case"pointerup":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasGestureHandlers,g.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"wheel":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!1,g.preventGesture=!m.hasScrollHandler,g.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":g.isStoppable=!0,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1;break;case"click":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!m.clickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;case"dblclick":g.isStoppable=!0,g.isCancelable=!0,g.preventDefault=!!m.dblClickHandler,g.preventGesture=!1,g.stopPropagation=!1;break;default:g.isStoppable=!1,g.isCancelable=!1,g.preventDefault=!1,g.preventGesture=!1,g.stopPropagation=!1}}(m,g),m.preProcessEventHandler&&m.preProcessEventHandler(g)}function ee(m,g,b){var P=m.getActivePointersListByType(g.type),G=P.getById(g.id);G?b&&!G.captured?(G.captured=!0,P.captureCount++):!b&&G.captured&&(G.captured=!1,P.captureCount--,P.captureCount<0&&(P.captureCount=0,e.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):e.console.warn("updatePointerCaptured() called on untracked pointer")}function $(m,g,b){var G,P=m.getActivePointersListByType(b.type);(G=P.getById(b.id))?(G.insideElement=!0,G.lastPos=G.currentPos,G.lastTime=G.currentTime,G.currentPos=b.currentPos,G.currentTime=b.currentTime,b=G):(b.captured=!1,b.insideElementPressed=!1,b.insideElement=!0,pt(P,b)),m.enterHandler&&m.enterHandler({eventSource:m,pointerType:b.type,position:D(b.currentPos,m.element),buttons:P.buttons,pointers:m.getActivePointerCount(),insideElementPressed:b.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData})}function me(m,g,b){var G,J,P=m.getActivePointersListByType(b.type);(G=P.getById(b.id))?(G.captured?(G.insideElement=!1,G.lastPos=G.currentPos,G.lastTime=G.currentTime,G.currentPos=b.currentPos,G.currentTime=b.currentTime):f(m,P,G),b=G):(b.captured=!1,b.insideElementPressed=!1),(m.leaveHandler||m.exitHandler)&&(J={eventSource:m,pointerType:b.type,position:b.currentPos&&D(b.currentPos,m.element),buttons:P.buttons,pointers:m.getActivePointerCount(),insideElementPressed:b.insideElementPressed,buttonDownAny:0!==P.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData},m.leaveHandler&&m.leaveHandler(J),m.exitHandler&&m.exitHandler(J))}function Ye(m,g,b,P){var pe,G=n[m.hash],J=m.getActivePointersListByType(b.type);if(void 0!==g.originalEvent.buttons?J.buttons=g.originalEvent.buttons:0===P?J.buttons|=1:1===P?J.buttons|=4:2===P?J.buttons|=2:3===P?J.buttons|=8:4===P?J.buttons|=16:5===P&&(J.buttons|=32),0!==P)return g.shouldCapture=!1,g.shouldReleaseCapture=!1,void(m.nonPrimaryPressHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,m.nonPrimaryPressHandler({eventSource:m,pointerType:b.type,position:D(b.currentPos,m.element),button:P,buttons:J.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData})));(pe=J.getById(b.id))?(pe.insideElementPressed=!0,pe.insideElement=!0,pe.originalTarget=g.originalEvent.target,pe.contactPos=b.currentPos,pe.contactTime=b.currentTime,pe.lastPos=pe.currentPos,pe.lastTime=pe.currentTime,pe.currentPos=b.currentPos,pe.currentTime=b.currentTime,b=pe):(b.captured=!1,b.insideElementPressed=!0,b.insideElement=!0,b.originalTarget=g.originalEvent.target,pt(J,b)),J.addContact(),g.preventGesture||g.defaultPrevented?(g.shouldCapture=!1,g.shouldReleaseCapture=!1):(g.shouldCapture=!0,g.shouldReleaseCapture=!1,g.preventDefault=!0,(m.dragHandler||m.dragEndHandler||m.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.addPoint(m,b),1===J.contacts?m.pressHandler&&!g.preventGesture&&m.pressHandler({eventSource:m,pointerType:b.type,position:D(b.contactPos,m.element),buttons:J.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData}):2===J.contacts&&m.pinchHandler&&"touch"===b.type&&(G.pinchGPoints=J.asArray(),G.lastPinchDist=G.currentPinchDist=G.pinchGPoints[0].currentPos.distanceTo(G.pinchGPoints[1].currentPos),G.lastPinchCenter=G.currentPinchCenter=N(G.pinchGPoints[0].currentPos,G.pinchGPoints[1].currentPos)))}function Ke(m,g,b,P){var pe,Ue,be,ft,G=n[m.hash],J=m.getActivePointersListByType(b.type),Ht=!1;if(void 0!==g.originalEvent.buttons?J.buttons=g.originalEvent.buttons:0===P?J.buttons^=-2:1===P?J.buttons^=-5:2===P?J.buttons^=-3:3===P?J.buttons^=-9:4===P?J.buttons^=-17:5===P&&(J.buttons^=-33),g.shouldCapture=!1,0!==P)return g.shouldReleaseCapture=!1,void(m.nonPrimaryReleaseHandler&&!g.preventGesture&&!g.defaultPrevented&&(g.preventDefault=!0,m.nonPrimaryReleaseHandler({eventSource:m,pointerType:b.type,position:D(b.currentPos,m.element),button:P,buttons:J.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData})));(be=J.getById(b.id))?(J.removeContact(),be.captured&&(Ht=!0),be.lastPos=be.currentPos,be.lastTime=be.currentTime,be.currentPos=b.currentPos,be.currentTime=b.currentTime,be.insideElement||f(m,J,be),pe=be.currentPos,Ue=be.currentTime):(b.captured=!1,b.insideElementPressed=!1,b.insideElement=!0,pt(J,b),be=b),!g.preventGesture&&!g.defaultPrevented&&(Ht?(g.shouldReleaseCapture=!0,g.preventDefault=!0,(m.dragHandler||m.dragEndHandler||m.pinchHandler)&&e.MouseTracker.gesturePointVelocityTracker.removePoint(m,be),0===J.contacts?(m.releaseHandler&&pe&&m.releaseHandler({eventSource:m,pointerType:be.type,position:D(pe,m.element),buttons:J.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:m.userData}),m.dragEndHandler&&G.sentDragEvent&&m.dragEndHandler({eventSource:m,pointerType:be.type,position:D(be.currentPos,m.element),speed:be.speed,direction:be.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:m.userData}),G.sentDragEvent=!1,(m.clickHandler||m.dblClickHandler)&&be.insideElement&&(ft=Ue-be.contactTime<=m.clickTimeThreshold&&be.contactPos.distanceTo(pe)<=m.clickDistThreshold,m.clickHandler&&m.clickHandler({eventSource:m,pointerType:be.type,position:D(be.currentPos,m.element),quick:ft,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,originalTarget:be.originalTarget,userData:m.userData}),m.dblClickHandler&&ft&&(J.clicks++,1===J.clicks?(G.lastClickPos=pe,G.dblClickTimeOut=setTimeout(function(){J.clicks=0},m.dblClickTimeThreshold)):2===J.clicks&&(clearTimeout(G.dblClickTimeOut),J.clicks=0,G.lastClickPos.distanceTo(pe)<=m.dblClickDistThreshold&&m.dblClickHandler({eventSource:m,pointerType:be.type,position:D(be.currentPos,m.element),shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:m.userData}),G.lastClickPos=null)))):2===J.contacts&&m.pinchHandler&&"touch"===be.type&&(G.pinchGPoints=J.asArray(),G.lastPinchDist=G.currentPinchDist=G.pinchGPoints[0].currentPos.distanceTo(G.pinchGPoints[1].currentPos),G.lastPinchCenter=G.currentPinchCenter=N(G.pinchGPoints[0].currentPos,G.pinchGPoints[1].currentPos))):(g.shouldReleaseCapture=!1,m.releaseHandler&&pe&&(m.releaseHandler({eventSource:m,pointerType:be.type,position:D(pe,m.element),buttons:J.buttons,insideElementPressed:be.insideElementPressed,insideElementReleased:be.insideElement,isTouchEvent:"touch"===be.type,originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0)))}function Ce(m,g,b){var J,pe,Ue,P=n[m.hash],G=m.getActivePointersListByType(b.type);void 0!==g.originalEvent.buttons&&(G.buttons=g.originalEvent.buttons),(J=G.getById(b.id))&&(J.lastPos=J.currentPos,J.lastTime=J.currentTime,J.currentPos=b.currentPos,J.currentTime=b.currentTime,g.shouldCapture=!1,g.shouldReleaseCapture=!1,m.stopHandler&&"mouse"===b.type&&(clearTimeout(m.stopTimeOut),m.stopTimeOut=setTimeout(function(){!function Be(m,g,b){m.stopHandler&&m.stopHandler({eventSource:m,pointerType:b,position:C(g,m.element),buttons:m.getActivePointersListByType(b).buttons,isTouchEvent:"touch"===b,originalEvent:g,userData:m.userData})}(m,g.originalEvent,b.type)},m.stopDelay)),0===G.contacts?m.moveHandler&&m.moveHandler({eventSource:m,pointerType:b.type,position:D(b.currentPos,m.element),buttons:G.buttons,isTouchEvent:"touch"===b.type,originalEvent:g.originalEvent,userData:m.userData}):1===G.contacts?(m.moveHandler&&(J=G.asArray()[0],m.moveHandler({eventSource:m,pointerType:J.type,position:D(J.currentPos,m.element),buttons:G.buttons,isTouchEvent:"touch"===J.type,originalEvent:g.originalEvent,userData:m.userData})),m.dragHandler&&!g.preventGesture&&!g.defaultPrevented&&(Ue=(J=G.asArray()[0]).currentPos.minus(J.lastPos),m.dragHandler({eventSource:m,pointerType:J.type,position:D(J.currentPos,m.element),buttons:G.buttons,delta:Ue,speed:J.speed,direction:J.direction,shift:g.originalEvent.shiftKey,isTouchEvent:"touch"===J.type,originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0,P.sentDragEvent=!0)):2===G.contacts&&(m.moveHandler&&(pe=G.asArray(),m.moveHandler({eventSource:m,pointerType:pe[0].type,position:D(N(pe[0].currentPos,pe[1].currentPos),m.element),buttons:G.buttons,isTouchEvent:"touch"===pe[0].type,originalEvent:g.originalEvent,userData:m.userData})),m.pinchHandler&&"touch"===b.type&&!g.preventGesture&&!g.defaultPrevented&&(Ue=P.pinchGPoints[0].currentPos.distanceTo(P.pinchGPoints[1].currentPos))!==P.currentPinchDist&&(P.lastPinchDist=P.currentPinchDist,P.currentPinchDist=Ue,P.lastPinchCenter=P.currentPinchCenter,P.currentPinchCenter=N(P.pinchGPoints[0].currentPos,P.pinchGPoints[1].currentPos),m.pinchHandler({eventSource:m,pointerType:"touch",gesturePoints:P.pinchGPoints,lastCenter:D(P.lastPinchCenter,m.element),center:D(P.currentPinchCenter,m.element),lastDistance:P.lastPinchDist,distance:P.currentPinchDist,shift:g.originalEvent.shiftKey,originalEvent:g.originalEvent,userData:m.userData}),g.preventDefault=!0)))}function rt(m,g,b){var G,P=m.getActivePointersListByType(b.type);(G=P.getById(b.id))&&f(m,P,G)}e.MouseTracker.gesturePointVelocityTracker=(m=[],g=0,b=0,P=function(Ue,be){return Ue.hash.toString()+be.type+be.id.toString()},G=function(){var Ue,Ht,ft,k,I,be=m.length,Wt=e.now();for(k=Wt-b,b=Wt,Ue=0;Ue<be;Ue++)(ft=(Ht=m[Ue]).gPoint).direction=Math.atan2(ft.currentPos.y-Ht.lastPos.y,ft.currentPos.x-Ht.lastPos.x),I=Ht.lastPos.distanceTo(ft.currentPos),Ht.lastPos=ft.currentPos,ft.speed=1e3*I/(k+1)*.75+.25*ft.speed},{addPoint:function(Ue,be){var Ht=P(Ue,be);m.push({guid:Ht,gPoint:be,lastPos:be.currentPos}),1===m.length&&(b=e.now(),g=window.setInterval(G,50))},removePoint:function(Ue,be){var ft,Ht=P(Ue,be),Wt=m.length;for(ft=0;ft<Wt;ft++)if(m[ft].guid===Ht){m.splice(ft,1),0==--Wt&&window.clearInterval(g);break}}}),e.MouseTracker.captureElement=document,e.MouseTracker.wheelEventName=e.Browser.vendor===e.BROWSERS.IE&&e.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",e.MouseTracker.wheelEventName],"DOMMouseScroll"===e.MouseTracker.wheelEventName&&e.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(e.MouseTracker.havePointerEvents=!0,e.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),e.MouseTracker.havePointerCapture=function(){var m=document.createElement("div");return e.isFunction(m.setPointerCapture)&&e.isFunction(m.releasePointerCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(e.MouseTracker.havePointerEvents=!1,e.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),e.MouseTracker.mousePointerId="legacy-mouse",e.MouseTracker.havePointerCapture=function(){var m=document.createElement("div");return e.isFunction(m.setCapture)&&e.isFunction(m.releaseCapture)}(),e.MouseTracker.havePointerCapture&&e.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&e.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&e.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),e.MouseTracker.GesturePointList=function(m){this._gPoints=[],this.type=m,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},e.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(m){return this._gPoints.push(m)},removeById:function(m){var g,b=this._gPoints.length;for(g=0;g<b;g++)if(this._gPoints[g].id===m){this._gPoints.splice(g,1);break}return this._gPoints.length},getByIndex:function(m){return m<this._gPoints.length?this._gPoints[m]:null},getById:function(m){var g,b=this._gPoints.length;for(g=0;g<b;g++)if(this._gPoints[g].id===m)return this._gPoints[g];return null},getPrimary:function(m){var g,b=this._gPoints.length;for(g=0;g<b;g++)if(this._gPoints[g].isPrimary)return this._gPoints[g];return null},addContact:function(){++this.contacts,this.contacts>1&&("mouse"===this.type||"pen"===this.type)&&(e.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}}}(OpenSeadragon),function(e){e.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},e.Control=function(i,n,l){var d=i.parentNode;"number"==typeof n&&(e.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=void 0===n.attachToViewer||n.attachToViewer,this.autoFade=void 0===n.autoFade||n.autoFade,this.element=i,this.anchor=n.anchor,this.container=l,this.anchor===e.ControlAnchor.ABSOLUTE?(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=e.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===e.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor===e.ControlAnchor.TOP_RIGHT||this.anchor===e.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):d.appendChild(this.wrapper)},e.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==e.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!==this.wrapper.style.display},setVisible:function(i){this.wrapper.style.display=i?this.anchor===e.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(i){e.setElementOpacity(this.element[e.SIGNAL]&&e.Browser.vendor===e.BROWSERS.IE?this.element:this.wrapper,i,!0)}}}(OpenSeadragon),function(e){function i(n,l){var s,d=n.controls;for(s=d.length-1;s>=0;s--)if(d[s].element===l)return s;return-1}e.ControlDock=function(n){var d,s,l=["topleft","topright","bottomright","bottomleft"];for(e.extend(!0,this,{id:"controldock-"+e.now()+"-"+Math.floor(1e6*Math.random()),container:e.makeNeutralElement("div"),controls:[]},n),this.container.onsubmit=function(){return!1},this.element&&(this.element=e.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),s=0;s<l.length;s++)this.controls[d=l[s]]=e.makeNeutralElement("div"),this.controls[d].style.position="absolute",d.match("left")&&(this.controls[d].style.left="0px"),d.match("right")&&(this.controls[d].style.right="0px"),d.match("top")&&(this.controls[d].style.top="0px"),d.match("bottom")&&(this.controls[d].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},e.ControlDock.prototype={addControl:function(n,l){var d=null;if(!(i(this,n=e.getElement(n))>=0)){switch(l.anchor){case e.ControlAnchor.TOP_RIGHT:d=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case e.ControlAnchor.BOTTOM_RIGHT:d=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.BOTTOM_LEFT:d=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case e.ControlAnchor.TOP_LEFT:d=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;default:d=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new e.Control(n,l,d)),n.style.display="inline-block"}},removeControl:function(n){var l=i(this,n=e.getElement(n));return l>=0&&(this.controls[l].destroy(),this.controls.splice(l,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var n;for(n=this.controls.length-1;n>=0;n--)if(this.controls[n].isVisible())return!0;return!1},setControlsEnabled:function(n){var l;for(l=this.controls.length-1;l>=0;l--)this.controls[l].setVisible(n);return this}}}(OpenSeadragon),OpenSeadragon.Placement=OpenSeadragon.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}}),function(e){var i={},n=1;function l(f){return f=e.getElement(f),new e.Point(0===f.clientWidth?1:f.clientWidth,0===f.clientHeight?1:f.clientHeight)}function s(f,R){if(R instanceof e.Overlay)return R;var z=null;if(R.element)z=e.getElement(R.element);else{var ee=R.id?R.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());(z=e.getElement(R.id))||((z=document.createElement("a")).href="#/overlay/"+ee),z.id=ee,e.addClass(z,R.className?R.className:"openseadragon-overlay")}var $=R.location,me=R.width,ae=R.height;if(!$){var Ne=R.x,Ye=R.y;if(void 0!==R.px){var Ke=f.viewport.imageToViewportRectangle(new e.Rect(R.px,R.py,me||0,ae||0));Ne=Ke.x,Ye=Ke.y,me=void 0!==me?Ke.width:void 0,ae=void 0!==ae?Ke.height:void 0}$=new e.Point(Ne,Ye)}var Ce=R.placement;return Ce&&"string"===e.type(Ce)&&(Ce=e.Placement[R.placement.toUpperCase()]),new e.Overlay({element:z,location:$,placement:Ce,onDraw:R.onDraw,checkResize:R.checkResize,width:me,height:ae,rotationMode:R.rotationMode})}function o(f,R){var z;for(z=f.length-1;z>=0;z--)if(f[z].element===R)return z;return-1}function a(f,R){return e.requestAnimationFrame(function(){R(f)})}function p(f){e.requestAnimationFrame(function(){!function w(f){var ee,$;if(f.controlsShouldFade){for(ee=1-(e.now()-f.controlsFadeBeginTime)/f.controlsFadeLength,ee=Math.min(1,ee),ee=Math.max(0,ee),$=f.controls.length-1;$>=0;$--)f.controls[$].autoFade&&f.controls[$].setOpacity(ee);ee>0&&p(f)}}(f)})}function y(f){!f.autoHideControls||(f.controlsShouldFade=!0,f.controlsFadeBeginTime=e.now()+f.controlsFadeDelay,window.setTimeout(function(){p(f)},f.controlsFadeDelay))}function O(f){var R;for(f.controlsShouldFade=!1,R=f.controls.length-1;R>=0;R--)f.controls[R].setOpacity(1)}function _(){O(this)}function A(){y(this)}function E(f){var R={tracker:f.eventSource,position:f.position,originalEvent:f.originalEvent,preventDefault:f.preventDefault};this.raiseEvent("canvas-contextmenu",R),f.preventDefault=R.preventDefault}function C(f){var R={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",R),R.preventDefaultAction||f.ctrl||f.alt||f.meta)f.preventDefault=!1;else switch(f.keyCode){case 38:R.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 40:R.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 37:R.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 39:R.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 87:R.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,-40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 83:R.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(0,40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 65:R.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(-40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 68:R.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new e.Point(40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 82:this.viewport.setRotation(f.shift?this.viewport.flipped?this.viewport.getRotation()+this.rotationIncrement:this.viewport.getRotation()-this.rotationIncrement:this.viewport.flipped?this.viewport.getRotation()-this.rotationIncrement:this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),f.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:f.preventDefault=!1}}function D(f){this.raiseEvent("canvas-key-press",{originalEvent:f.originalEvent})}function N(f){var R;document.activeElement===this.canvas||this.canvas.focus(),this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x);var ee={tracker:f.eventSource,position:f.position,quick:f.quick,shift:f.shift,originalEvent:f.originalEvent,originalTarget:f.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",ee),!ee.preventDefaultAction&&this.viewport&&f.quick&&(!0===(R=this.gestureSettingsByDeviceType(f.pointerType)).clickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,R.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints()),R.dblClickDragToZoom&&(!0===i[this.hash].draggingToZoom?(i[this.hash].lastClickTime=null,i[this.hash].draggingToZoom=!1):i[this.hash].lastClickTime=e.now()))}function Z(f){var R,z={tracker:f.eventSource,position:f.position,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",z),!z.preventDefaultAction&&this.viewport&&(R=this.gestureSettingsByDeviceType(f.pointerType)).dblClickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,R.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())}function X(f){var R,z={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,delta:f.delta,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",z),R=this.gestureSettingsByDeviceType(f.pointerType),!z.preventDefaultAction&&this.viewport)if(R.dblClickDragToZoom&&i[this.hash].draggingToZoom){var ee=Math.pow(this.zoomPerDblClickDrag,f.delta.y/50);this.viewport.zoomBy(ee)}else if(R.dragToPan&&!i[this.hash].draggingToZoom){if(this.panHorizontal||(f.delta.x=0),this.panVertical||(f.delta.y=0),this.viewport.flipped&&(f.delta.x=-f.delta.x),this.constrainDuringPan){var $=this.viewport.deltaPointsFromPixels(f.delta.negate());this.viewport.centerSpringX.target.value+=$.x,this.viewport.centerSpringY.target.value+=$.y;var me=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=$.x,this.viewport.centerSpringY.target.value-=$.y,me.xConstrained&&(f.delta.x=0),me.yConstrained&&(f.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(f.delta.negate()),R.flickEnabled&&!this.constrainDuringPan)}}function se(f){var R,z={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",z),R=this.gestureSettingsByDeviceType(f.pointerType),!z.preventDefaultAction&&this.viewport){if(!i[this.hash].draggingToZoom&&R.flickEnabled&&f.speed>=R.flickMinSpeed){var ee=0;this.panHorizontal&&(ee=R.flickMomentum*f.speed*Math.cos(f.direction));var $=0;this.panVertical&&($=R.flickMomentum*f.speed*Math.sin(f.direction));var me=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),ae=this.viewport.pointFromPixel(new e.Point(me.x-ee,me.y-$));this.viewport.panTo(ae,!1)}this.viewport.applyConstraints()}R.dblClickDragToZoom&&!0===i[this.hash].draggingToZoom&&(i[this.hash].draggingToZoom=!1)}function h(f){this.raiseEvent("canvas-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function re(f){this.raiseEvent("canvas-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function ye(f){if(this.raiseEvent("canvas-press",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent}),this.gestureSettingsByDeviceType(f.pointerType).dblClickDragToZoom){var z=i[this.hash].lastClickTime,ee=e.now();if(null===z)return;ee-z<this.dblClickTimeThreshold&&(i[this.hash].draggingToZoom=!0),i[this.hash].lastClickTime=null}}function Oe(f){this.raiseEvent("canvas-release",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function Re(f){this.raiseEvent("canvas-nonprimary-press",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function qe(f){this.raiseEvent("canvas-nonprimary-release",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function Ie(f){var R,z,$,me={tracker:f.eventSource,pointerType:f.pointerType,gesturePoints:f.gesturePoints,lastCenter:f.lastCenter,center:f.center,lastDistance:f.lastDistance,distance:f.distance,shift:f.shift,originalEvent:f.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",me),this.viewport&&((R=this.gestureSettingsByDeviceType(f.pointerType)).pinchToZoom&&(!me.preventDefaultPanAction||!me.preventDefaultZoomAction)&&(z=this.viewport.pointFromPixel(f.center,!0),R.zoomToRefPoint&&!me.preventDefaultPanAction&&($=this.viewport.pointFromPixel(f.lastCenter,!0).minus(z),this.panHorizontal||($.x=0),this.panVertical||($.y=0),this.viewport.panBy($,!0)),me.preventDefaultZoomAction||this.viewport.zoomBy(f.distance/f.lastDistance,z,!0),this.viewport.applyConstraints()),R.pinchRotate&&!me.preventDefaultRotateAction)){var ae=Math.atan2(f.gesturePoints[0].currentPos.y-f.gesturePoints[1].currentPos.y,f.gesturePoints[0].currentPos.x-f.gesturePoints[1].currentPos.x),Ne=Math.atan2(f.gesturePoints[0].lastPos.y-f.gesturePoints[1].lastPos.y,f.gesturePoints[0].lastPos.x-f.gesturePoints[1].lastPos.x);z=this.viewport.pointFromPixel(f.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(ae-Ne)*(180/Math.PI),z,!0)}}function nt(f){this.raiseEvent("canvas-focus",{tracker:f.eventSource,originalEvent:f.originalEvent})}function Nt(f){this.raiseEvent("canvas-blur",{tracker:f.eventSource,originalEvent:f.originalEvent})}function wt(f){var R,z,ee,$;($=e.now())-this._lastScrollTime>this.minScrollDeltaTime?(this._lastScrollTime=$,this.raiseEvent("canvas-scroll",R={tracker:f.eventSource,position:f.position,scroll:f.scroll,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1,preventDefault:!0}),!R.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x),(z=this.gestureSettingsByDeviceType(f.pointerType)).scrollToZoom&&(ee=Math.pow(this.zoomPerScroll,f.scroll),this.viewport.zoomBy(ee,z.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())),f.preventDefault=R.preventDefault):f.preventDefault=!0}function Ve(f){i[this.hash].mouseInside=!0,O(this),this.raiseEvent("container-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function at(f){f.pointers<1&&(i[this.hash].mouseInside=!1,i[this.hash].animating||y(this)),this.raiseEvent("container-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function _t(f){(function st(f){if(!f._opening&&i[f.hash]){var R;if(f.autoResize||i[f.hash].forceResize)f._autoResizePolling&&((R=l(f.container)).equals(i[f.hash].prevContainerSize)||(i[f.hash].needsResize=!0)),i[f.hash].needsResize&&function xt(f,R){var me,z=f.viewport,ee=z.getZoom(),$=z.getCenter();if(z.resize(R,f.preserveImageSizeOnResize),z.panTo($,!0),f.preserveImageSizeOnResize)me=i[f.hash].prevContainerSize.x/R.x;else{var ae=new e.Point(0,0),Ne=new e.Point(i[f.hash].prevContainerSize.x,i[f.hash].prevContainerSize.y).distanceTo(ae);me=new e.Point(R.x,R.y).distanceTo(ae)/Ne*i[f.hash].prevContainerSize.x/R.x}z.zoomTo(ee*me,null,!0),i[f.hash].prevContainerSize=R,i[f.hash].forceRedraw=!0,i[f.hash].needsResize=!1,i[f.hash].forceResize=!1}(f,R||l(f.container));var ee=f.viewport.update(),$=f.world.update()||ee;ee&&f.raiseEvent("viewport-change"),f.referenceStrip&&($=f.referenceStrip.update(f.viewport)||$);var me=i[f.hash].animating;!me&&$&&(f.raiseEvent("animation-start"),O(f));var ae=me&&!$;ae&&(i[f.hash].animating=!1),($||ae||i[f.hash].forceRedraw||f.world.needsDraw())&&(function zt(f){f.imageLoader.clear(),f.drawer.clear(),f.world.draw(),f.raiseEvent("update-viewport",{})}(f),f._drawOverlays(),f.navigator&&f.navigator.update(f.viewport),i[f.hash].forceRedraw=!1,$&&f.raiseEvent("animation")),ae&&(f.raiseEvent("animation-finish"),i[f.hash].mouseInside||y(f)),i[f.hash].animating=$}})(f),f._updateRequestId=!!f.isOpen()&&a(f,_t)}function Ee(f,R){return f?f+R:R}function jt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=this.zoomPerSecond,i[this.hash].zooming=!0,Rt(this)}function Tt(){i[this.hash].lastZoomTime=e.now(),i[this.hash].zoomFactor=1/this.zoomPerSecond,i[this.hash].zooming=!0,Rt(this)}function It(){i[this.hash].zooming=!1}function Rt(f){e.requestAnimationFrame(e.delegate(f,Et))}function Et(){var f,z;i[this.hash].zooming&&this.viewport&&(f=e.now(),z=Math.pow(i[this.hash].zoomFactor,(f-i[this.hash].lastZoomTime)/1e3),this.viewport.zoomBy(z),this.viewport.applyConstraints(),i[this.hash].lastZoomTime=f,Rt(this))}function oi(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function Ft(){this.viewport&&(i[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function ai(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function St(){this.viewport&&this.viewport.goHome()}function li(){this.isFullPage()&&!e.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Kt(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f+=this.rotationIncrement:f-=this.rotationIncrement,this.viewport.setRotation(f)}}function we(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f-=this.rotationIncrement:f+=this.rotationIncrement,this.viewport.setRotation(f)}}function pt(){this.viewport.toggleFlip()}e.Viewer=function(f){var ee,$,R=arguments,z=this;if(e.isPlainObject(f)||(f={id:R[0],xmlPath:R.length>1?R[1]:void 0,prefixUrl:R.length>2?R[2]:void 0,controls:R.length>3?R[3]:void 0,overlays:R.length>4?R[4]:void 0}),f.config&&(e.extend(!0,f,f.config),delete f.config),e.extend(!0,this,{id:f.id,hash:f.hash||n++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},e.DEFAULT_SETTINGS,f),void 0===this.hash)throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(void 0!==i[this.hash]&&e.console.warn("Hash "+this.hash+" has already been used."),i[this.hash]={fsBoundsDelta:new e.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=e.now(),e.EventSource.call(this),this.addHandler("open-failed",function($){var me=e.getString("Errors.OpenFailed",$.eventSource,$.message);z._showMessage(me)}),e.ControlDock.call(this,f),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=e.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",($=this.canvas.style).width="100%",$.height="100%",$.overflow="hidden",$.position="absolute",$.top="0px",$.left="0px",e.setElementTouchActionNone(this.canvas),""!==f.tabIndex&&(this.canvas.tabIndex=void 0===f.tabIndex?0:f.tabIndex),this.container.className="openseadragon-container",function($){$.width="100%",$.height="100%",$.position="relative",$.overflow="hidden",$.left="0px",$.top="0px",$.textAlign="left"}(this.container.style),e.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new e.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:e.delegate(this,E),keyDownHandler:e.delegate(this,C),keyHandler:e.delegate(this,D),clickHandler:e.delegate(this,N),dblClickHandler:e.delegate(this,Z),dragHandler:e.delegate(this,X),dragEndHandler:e.delegate(this,se),enterHandler:e.delegate(this,h),leaveHandler:e.delegate(this,re),pressHandler:e.delegate(this,ye),releaseHandler:e.delegate(this,Oe),nonPrimaryPressHandler:e.delegate(this,Re),nonPrimaryReleaseHandler:e.delegate(this,qe),scrollHandler:e.delegate(this,wt),pinchHandler:e.delegate(this,Ie),focusHandler:e.delegate(this,nt),blurHandler:e.delegate(this,Nt)}),this.outerTracker=new e.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:e.delegate(this,Ve),leaveHandler:e.delegate(this,at)}),this.toolbar&&(this.toolbar=new e.ControlDock({element:this.toolbar})),this.bindStandardControls(),i[this.hash].prevContainerSize=l(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){i[z.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new e.World({viewer:this}),this.world.addHandler("add-item",function($){z.source=z.world.getItemAt(0).source,i[z.hash].forceRedraw=!0,z._updateRequestId||(z._updateRequestId=a(z,_t))}),this.world.addHandler("remove-item",function($){z.source=z.world.getItemCount()?z.world.getItemAt(0).source:null,i[z.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function($){z.viewport&&z.viewport._setContentBounds(z.world.getHomeBounds(),z.world.getContentFactor())}),this.world.addHandler("item-index-change",function($){z.source=z.world.getItemAt(0).source}),this.viewport=new e.Viewport({containerSize:i[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new e.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:f.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new e.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new e.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=e.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(ee=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(ee,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(ee=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(ee,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new e.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),ee=0;ee<this.customControls.length;ee++)this.addControl(this.customControls[ee].id,{anchor:this.customControls[ee].anchor});e.requestAnimationFrame(function(){y(z)}),void 0!==this.imageSmoothingEnabled&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),e._viewers.set(this.element,this)},e.extend(e.Viewer.prototype,e.EventSource.prototype,e.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(f){return e.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(f)},openTileSource:function(f){return e.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(f)},get buttons(){return e.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(f,R){var z=this;if(this.close(),!f)return this;if(this.sequenceMode&&e.isArray(f))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),void 0!==R&&!isNaN(R)&&(this.initialPage=R),this.tileSources=f,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(e.isArray(f)||(f=[f]),!f.length)return this;this._opening=!0;for(var ae,ee=f.length,$=0,me=0,Ne=function(){if($+me===ee)if($){(z._firstOpen||!z.preserveViewport)&&(z.viewport.goHome(!0),z.viewport.update()),z._firstOpen=!1;var Ce=f[0];if(Ce.tileSource&&(Ce=Ce.tileSource),z.overlays&&!z.preserveOverlays)for(var rt=0;rt<z.overlays.length;rt++)z.currentOverlays[rt]=s(z,z.overlays[rt]);z._drawOverlays(),z._opening=!1,z.raiseEvent("open",{source:Ce})}else z._opening=!1,z.raiseEvent("open-failed",ae)},Ye=function(Ce){(!e.isPlainObject(Ce)||!Ce.tileSource)&&(Ce={tileSource:Ce}),void 0!==Ce.index&&(e.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Ce.index),void 0===Ce.collectionImmediately&&(Ce.collectionImmediately=!0);var rt=Ce.success;Ce.success=function(m){if($++,Ce.tileSource.overlays)for(var g=0;g<Ce.tileSource.overlays.length;g++)z.addOverlay(Ce.tileSource.overlays[g]);rt&&rt(m),Ne()};var Be=Ce.error;Ce.error=function(m){me++,ae||(ae=m),Be&&Be(m),Ne()},z.addTiledImage(Ce)},Ke=0;Ke<f.length;Ke++)Ye(f[Ke]);return this},close:function(){return i[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),i[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(i[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),null!==this._updateRequestId&&(e.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),i[this.navigator.hash]=null,delete i[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),i[this.hash]=null,delete i[this.hash],this.canvas=null,this.container=null,e._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(f){return this.innerTracker.setTracking(f),this.outerTracker.setTracking(f),this.raiseEvent("mouse-enabled",{enabled:f}),this},areControlsEnabled:function(){var R,f=this.controls.length;for(R=0;R<this.controls.length;R++)f=f&&this.controls[R].isVisible();return f},setControlsEnabled:function(f){return f?O(this):y(this),this.raiseEvent("controls-enabled",{enabled:f}),this},setDebugMode:function(f){for(var R=0;R<this.world.getItemCount();R++)this.world.getItemAt(R).debugMode=f;this.debugMode=f,this.forceRedraw()},setAjaxHeaders:function(f,R){if(null===f&&(f={}),e.isPlainObject(f)){if(void 0===R&&(R=!0),this.ajaxHeaders=f,R){for(var z=0;z<this.world.getItemCount();z++)this.world.getItemAt(z)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var ee in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[ee].setAjaxHeaders(this.ajaxHeaders,!0)}}else console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},addButton:function(f){this.buttonGroup.addButton(f)},isFullPage:function(){return i[this.hash].fullPage},setFullPage:function(f){var me,ae,R=document.body,z=R.style,ee=document.documentElement.style,$=this;if(f===this.isFullPage())return this;var Ne={fullPage:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",Ne),Ne.preventDefaultAction)return this;if(f){for(this.elementSize=e.getElementSize(this.element),this.pageScroll=e.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=z.margin,this.docMargin=ee.margin,z.margin="0",ee.margin="0",this.bodyPadding=z.padding,this.docPadding=ee.padding,z.padding="0",ee.padding="0",this.bodyWidth=z.width,this.docWidth=ee.width,z.width="100%",ee.width="100%",this.bodyHeight=z.height,this.docHeight=ee.height,z.height="100%",ee.height="100%",this.bodyDisplay=z.display,z.display="block",this.previousBody=[],i[this.hash].prevElementParent=this.element.parentNode,i[this.hash].prevNextSibling=this.element.nextSibling,i[this.hash].prevElementWidth=this.element.style.width,i[this.hash].prevElementHeight=this.element.style.height,me=R.childNodes.length,ae=0;ae<me;ae++)this.previousBody.push(R.childNodes[0]),R.removeChild(R.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,R.appendChild(this.toolbar.element),e.addClass(this.toolbar.element,"fullpage")),e.addClass(this.element,"fullpage"),R.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=e.getElementSize(this.element).y-e.getElementSize(this.toolbar.element).y+"px"),i[this.hash].fullPage=!0,e.delegate(this,Ve)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,z.margin=this.bodyMargin,ee.margin=this.docMargin,z.padding=this.bodyPadding,ee.padding=this.docPadding,z.width=this.bodyWidth,ee.width=this.docWidth,z.height=this.bodyHeight,ee.height=this.docHeight,z.display=this.bodyDisplay,R.removeChild(this.element),me=this.previousBody.length,ae=0;ae<me;ae++)R.appendChild(this.previousBody.shift());e.removeClass(this.element,"fullpage"),i[this.hash].prevElementParent.insertBefore(this.element,i[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(R.removeChild(this.toolbar.element),e.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=i[this.hash].prevElementWidth,this.element.style.height=i[this.hash].prevElementHeight;var Ye=0,Ke=function(){e.setPageScroll($.pageScroll);var Ce=e.getPageScroll();++Ye<10&&(Ce.x!==$.pageScroll.x||Ce.y!==$.pageScroll.y)&&e.requestAnimationFrame(Ke)};e.requestAnimationFrame(Ke),i[this.hash].fullPage=!1,e.delegate(this,at)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:f}),this},setFullScreen:function(f){var R=this;if(!e.supportsFullScreen)return this.setFullPage(f);if(e.isFullScreen()===f)return this;var z={fullScreen:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",z),z.preventDefaultAction)return this;if(f){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var ee=function(){var $=e.isFullScreen();$||(e.removeEvent(document,e.fullScreenEventName,ee),e.removeEvent(document,e.fullScreenErrorEventName,ee),R.setFullPage(!1),R.isFullPage()&&(R.element.style.width=R.fullPageStyleWidth,R.element.style.height=R.fullPageStyleHeight)),R.navigator&&R.viewport&&setTimeout(function(){R.navigator.update(R.viewport)}),R.raiseEvent("full-screen",{fullScreen:$})};e.addEvent(document,e.fullScreenEventName,ee),e.addEvent(document,e.fullScreenErrorEventName,ee),e.requestFullScreen(document.body)}else e.exitFullScreen();return this},isVisible:function(){return"hidden"!==this.container.style.visibility},isFullScreen:function(){return e.isFullScreen()&&this.isFullPage()},setVisible:function(f){return this.container.style.visibility=f?"":"hidden",this.raiseEvent("visible",{visible:f}),this},addTiledImage:function(f){e.console.assert(f,"[Viewer.addTiledImage] options is required"),e.console.assert(f.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),e.console.assert(!f.replace||f.index>-1&&f.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var R=this;f.replace&&(f.replaceItem=R.world.getItemAt(f.index)),this._hideMessage(),void 0===f.placeholderFillStyle&&(f.placeholderFillStyle=this.placeholderFillStyle),void 0===f.opacity&&(f.opacity=this.opacity),void 0===f.preload&&(f.preload=this.preload),void 0===f.compositeOperation&&(f.compositeOperation=this.compositeOperation),void 0===f.crossOriginPolicy&&(f.crossOriginPolicy=void 0!==f.tileSource.crossOriginPolicy?f.tileSource.crossOriginPolicy:this.crossOriginPolicy),void 0===f.ajaxWithCredentials&&(f.ajaxWithCredentials=this.ajaxWithCredentials),void 0===f.loadTilesWithAjax&&(f.loadTilesWithAjax=this.loadTilesWithAjax),e.isPlainObject(f.ajaxHeaders)||(f.ajaxHeaders={});var z={options:f};function ee(ae){for(var Ne=0;Ne<R._loadQueue.length;Ne++)if(R._loadQueue[Ne]===z){R._loadQueue.splice(Ne,1);break}0===R._loadQueue.length&&$(z),R.raiseEvent("add-item-failed",ae),f.error&&f.error(ae)}function $(ae){R.collectionMode&&(R.world.arrange({immediately:ae.options.collectionImmediately,rows:R.collectionRows,columns:R.collectionColumns,layout:R.collectionLayout,tileSize:R.collectionTileSize,tileMargin:R.collectionTileMargin}),R.world.setAutoRefigureSizes(!0))}function me(){for(var ae,Ne,Ye;R._loadQueue.length&&(ae=R._loadQueue[0]).tileSource;){if(R._loadQueue.splice(0,1),ae.options.replace){var Ke=R.world.getIndexOfItem(ae.options.replaceItem);-1!==Ke&&(ae.options.index=Ke),R.world.removeItem(ae.options.replaceItem)}Ne=new e.TiledImage({viewer:R,source:ae.tileSource,viewport:R.viewport,drawer:R.drawer,tileCache:R.tileCache,imageLoader:R.imageLoader,x:ae.options.x,y:ae.options.y,width:ae.options.width,height:ae.options.height,fitBounds:ae.options.fitBounds,fitBoundsPlacement:ae.options.fitBoundsPlacement,clip:ae.options.clip,placeholderFillStyle:ae.options.placeholderFillStyle,opacity:ae.options.opacity,preload:ae.options.preload,degrees:ae.options.degrees,flipped:ae.options.flipped,compositeOperation:ae.options.compositeOperation,springStiffness:R.springStiffness,animationTime:R.animationTime,minZoomImageRatio:R.minZoomImageRatio,wrapHorizontal:R.wrapHorizontal,wrapVertical:R.wrapVertical,immediateRender:R.immediateRender,blendTime:R.blendTime,alwaysBlend:R.alwaysBlend,minPixelRatio:R.minPixelRatio,smoothTileEdgesMinZoom:R.smoothTileEdgesMinZoom,iOSDevice:R.iOSDevice,crossOriginPolicy:ae.options.crossOriginPolicy,ajaxWithCredentials:ae.options.ajaxWithCredentials,loadTilesWithAjax:ae.options.loadTilesWithAjax,ajaxHeaders:ae.options.ajaxHeaders,debugMode:R.debugMode,subPixelRoundingForTransparency:R.subPixelRoundingForTransparency}),R.collectionMode&&R.world.setAutoRefigureSizes(!1),R.navigator&&(Ye=e.extend({},ae.options,{replace:!1,originalTiledImage:Ne,tileSource:ae.tileSource}),R.navigator.addTiledImage(Ye)),R.world.addItem(Ne,{index:ae.options.index}),0===R._loadQueue.length&&$(ae),1===R.world.getItemCount()&&!R.preserveViewport&&R.viewport.goHome(!0),ae.options.success&&ae.options.success({item:Ne})}}e.isArray(f.tileSource)?setTimeout(function(){ee({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:f.tileSource,options:f})}):(this._loadQueue.push(z),function d(f,R,z,ee,$){var me=f;if("string"===e.type(R))if(R.match(/^\s*<.*>\s*$/))R=e.parseXml(R);else if(R.match(/^\s*[{[].*[}\]]\s*$/))try{var ae=e.parseJSON(R);R=ae}catch(Ye){}function Ne(Ye,Ke){Ye.ready?ee(Ye):(Ye.addHandler("ready",function(){ee(Ye)}),Ye.addHandler("open-failed",function(Ce){$({message:Ce.message,source:Ke})}))}setTimeout(function(){if("string"===e.type(R))(R=new e.TileSource({url:R,crossOriginPolicy:void 0!==z.crossOriginPolicy?z.crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,ajaxHeaders:z.ajaxHeaders?z.ajaxHeaders:f.ajaxHeaders,splitHashDataForPost:f.splitHashDataForPost,useCanvas:f.useCanvas,success:function(rt){ee(rt.tileSource)}})).addHandler("open-failed",function(rt){$(rt)});else if(e.isPlainObject(R)||R.nodeType)if(void 0===R.crossOriginPolicy&&(void 0!==z.crossOriginPolicy||void 0!==f.crossOriginPolicy)&&(R.crossOriginPolicy=void 0!==z.crossOriginPolicy?z.crossOriginPolicy:f.crossOriginPolicy),void 0===R.ajaxWithCredentials&&(R.ajaxWithCredentials=f.ajaxWithCredentials),void 0===R.useCanvas&&(R.useCanvas=f.useCanvas),e.isFunction(R.getTileUrl)){var Ye=new e.TileSource(R);Ye.getTileUrl=R.getTileUrl,ee(Ye)}else{var Ke=e.TileSource.determineType(me,R);if(!Ke)return void $({message:"Unable to load TileSource",source:R});var Ce=Ke.prototype.configure.apply(me,[R]);Ne(new Ke(Ce),R)}else Ne(R,R)})}(this,f.tileSource,f,function(ae){z.tileSource=ae,me()},function(ae){ae.options=f,ee(ae),me()}))},addSimpleImage:function(f){e.console.assert(f,"[Viewer.addSimpleImage] options is required"),e.console.assert(f.url,"[Viewer.addSimpleImage] options.url is required");var R=e.extend({},f,{tileSource:{type:"image",url:f.url}});delete R.url,this.addTiledImage(R)},addLayer:function(f){var R=this;e.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var z=e.extend({},f,{success:function(ee){R.raiseEvent("add-layer",{options:f,drawer:ee.item})},error:function(ee){R.raiseEvent("add-layer-failed",ee)}});return this.addTiledImage(z),this},getLayerAtLevel:function(f){return e.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(f)},getLevelOfLayer:function(f){return e.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(f)},getLayersCount:function(){return e.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(f,R){return e.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(f,R)},removeLayer:function(f){return e.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(f)},forceRedraw:function(){return i[this.hash].forceRedraw=!0,this},forceResize:function(){i[this.hash].needsResize=!0,i[this.hash].forceResize=!0},bindSequenceControls:function(){var f=e.delegate(this,_),R=e.delegate(this,A),z=e.delegate(this,this.goToNextPage),ee=e.delegate(this,this.goToPreviousPage),$=this.navImages,me=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(me=!1),this.previousButton=new e.Button({element:this.previousButton?e.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.PreviousPage"),srcRest:Ee(this.prefixUrl,$.previous.REST),srcGroup:Ee(this.prefixUrl,$.previous.GROUP),srcHover:Ee(this.prefixUrl,$.previous.HOVER),srcDown:Ee(this.prefixUrl,$.previous.DOWN),onRelease:ee,onFocus:f,onBlur:R}),this.nextButton=new e.Button({element:this.nextButton?e.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.NextPage"),srcRest:Ee(this.prefixUrl,$.next.REST),srcGroup:Ee(this.prefixUrl,$.next.GROUP),srcHover:Ee(this.prefixUrl,$.next.HOVER),srcDown:Ee(this.prefixUrl,$.next.DOWN),onRelease:z,onFocus:f,onBlur:R}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),me&&(this.paging=new e.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:e.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||e.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var f=e.delegate(this,jt),R=e.delegate(this,It),z=e.delegate(this,oi),ee=e.delegate(this,Tt),$=e.delegate(this,Ft),me=e.delegate(this,St),ae=e.delegate(this,li),Ne=e.delegate(this,Kt),Ye=e.delegate(this,we),Ke=e.delegate(this,pt),Ce=e.delegate(this,_),rt=e.delegate(this,A),Be=this.navImages,m=[],g=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(g=!1),this.showZoomControl&&(m.push(this.zoomInButton=new e.Button({element:this.zoomInButton?e.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomIn"),srcRest:Ee(this.prefixUrl,Be.zoomIn.REST),srcGroup:Ee(this.prefixUrl,Be.zoomIn.GROUP),srcHover:Ee(this.prefixUrl,Be.zoomIn.HOVER),srcDown:Ee(this.prefixUrl,Be.zoomIn.DOWN),onPress:f,onRelease:R,onClick:z,onEnter:f,onExit:R,onFocus:Ce,onBlur:rt})),m.push(this.zoomOutButton=new e.Button({element:this.zoomOutButton?e.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.ZoomOut"),srcRest:Ee(this.prefixUrl,Be.zoomOut.REST),srcGroup:Ee(this.prefixUrl,Be.zoomOut.GROUP),srcHover:Ee(this.prefixUrl,Be.zoomOut.HOVER),srcDown:Ee(this.prefixUrl,Be.zoomOut.DOWN),onPress:ee,onRelease:R,onClick:$,onEnter:ee,onExit:R,onFocus:Ce,onBlur:rt}))),this.showHomeControl&&m.push(this.homeButton=new e.Button({element:this.homeButton?e.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Home"),srcRest:Ee(this.prefixUrl,Be.home.REST),srcGroup:Ee(this.prefixUrl,Be.home.GROUP),srcHover:Ee(this.prefixUrl,Be.home.HOVER),srcDown:Ee(this.prefixUrl,Be.home.DOWN),onRelease:me,onFocus:Ce,onBlur:rt})),this.showFullPageControl&&m.push(this.fullPageButton=new e.Button({element:this.fullPageButton?e.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.FullPage"),srcRest:Ee(this.prefixUrl,Be.fullpage.REST),srcGroup:Ee(this.prefixUrl,Be.fullpage.GROUP),srcHover:Ee(this.prefixUrl,Be.fullpage.HOVER),srcDown:Ee(this.prefixUrl,Be.fullpage.DOWN),onRelease:ae,onFocus:Ce,onBlur:rt})),this.showRotationControl&&(m.push(this.rotateLeftButton=new e.Button({element:this.rotateLeftButton?e.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateLeft"),srcRest:Ee(this.prefixUrl,Be.rotateleft.REST),srcGroup:Ee(this.prefixUrl,Be.rotateleft.GROUP),srcHover:Ee(this.prefixUrl,Be.rotateleft.HOVER),srcDown:Ee(this.prefixUrl,Be.rotateleft.DOWN),onRelease:Ne,onFocus:Ce,onBlur:rt})),m.push(this.rotateRightButton=new e.Button({element:this.rotateRightButton?e.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.RotateRight"),srcRest:Ee(this.prefixUrl,Be.rotateright.REST),srcGroup:Ee(this.prefixUrl,Be.rotateright.GROUP),srcHover:Ee(this.prefixUrl,Be.rotateright.HOVER),srcDown:Ee(this.prefixUrl,Be.rotateright.DOWN),onRelease:Ye,onFocus:Ce,onBlur:rt}))),this.showFlipControl&&m.push(this.flipButton=new e.Button({element:this.flipButton?e.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:e.getString("Tooltips.Flip"),srcRest:Ee(this.prefixUrl,Be.flip.REST),srcGroup:Ee(this.prefixUrl,Be.flip.GROUP),srcHover:Ee(this.prefixUrl,Be.flip.HOVER),srcDown:Ee(this.prefixUrl,Be.flip.DOWN),onRelease:Ke,onFocus:Ce,onBlur:rt})),g?(this.buttonGroup=new e.ButtonGroup({buttons:m,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",e.delegate(this,ai)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||e.ControlAnchor.TOP_LEFT})):this.customButtons=m),this},currentPage:function(){return this._sequenceIndex},goToPage:function(f){return this.tileSources&&f>=0&&f<this.tileSources.length&&(this._sequenceIndex=f,this._updateSequenceButtons(f),this.open(this.tileSources[f]),this.referenceStrip&&this.referenceStrip.setFocus(f),this.raiseEvent("page",{page:f})),this},addOverlay:function(f,R,z,ee){var $;if($=e.isPlainObject(f)?f:{element:f,location:R,placement:z,onDraw:ee},f=e.getElement($.element),o(this.currentOverlays,f)>=0)return this;var me=s(this,$);return this.currentOverlays.push(me),me.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:f,location:$.location,placement:$.placement}),this},updateOverlay:function(f,R,z){var ee;return f=e.getElement(f),(ee=o(this.currentOverlays,f))>=0&&(this.currentOverlays[ee].update(R,z),i[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:f,location:R,placement:z})),this},removeOverlay:function(f){var R;return f=e.getElement(f),(R=o(this.currentOverlays,f))>=0&&(this.currentOverlays[R].destroy(),this.currentOverlays.splice(R,1),i[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:f})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return i[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(f){var R;return f=e.getElement(f),(R=o(this.currentOverlays,f))>=0?this.currentOverlays[R]:null},_updateSequenceButtons:function(f){this.nextButton&&(this.tileSources&&this.tileSources.length-1!==f?this.nextButton.enable():this.navPrevNextWrap||this.nextButton.disable()),this.previousButton&&(f>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(f){this._hideMessage();var R=e.makeNeutralElement("div");R.appendChild(document.createTextNode(f)),this.messageDiv=e.makeCenteredNode(R),e.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var f=this.messageDiv;f&&(f.parentNode.removeChild(f),delete this.messageDiv)},gestureSettingsByDeviceType:function(f){switch(f){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var f,R=this.currentOverlays.length;for(f=0;f<R;f++)this.currentOverlays[f].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new e.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else e.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),e.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){e.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var f=e.pixelDensityRatio,R=e.getCurrentPixelDensityRatio();f!==R&&(e.pixelDensityRatio=R,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var f=this._sequenceIndex-1;this.navPrevNextWrap&&f<0&&(f+=this.tileSources.length),this.goToPage(f)},goToNextPage:function(){var f=this._sequenceIndex+1;this.navPrevNextWrap&&f>=this.tileSources.length&&(f=0),this.goToPage(f)},isAnimating:function(){return i[this.hash].animating}})}(OpenSeadragon),function(e){function i(a){var p={tracker:a.eventSource,position:a.position,quick:a.quick,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",p),!p.preventDefaultAction&&a.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(a.position.x=this.viewport.getContainerSize().x-a.position.x);var y=this.viewport.pointFromPixel(a.position);this.panVertical?this.panHorizontal||(y.x=this.viewer.viewport.getCenter(!0).x):y.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(y),this.viewer.viewport.applyConstraints()}}function n(a){var p={tracker:a.eventSource,position:a.position,delta:a.delta,speed:a.speed,direction:a.direction,shift:a.shift,originalEvent:a.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",p),!p.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(a.delta.x=0),this.panVertical||(a.delta.y=0),this.viewer.viewport.flipped&&(a.delta.x=-a.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(a.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function l(a){a.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function d(a){var p={tracker:a.eventSource,position:a.position,scroll:a.scroll,shift:a.shift,originalEvent:a.originalEvent,preventDefault:a.preventDefault};this.viewer.raiseEvent("navigator-scroll",p),a.preventDefault=p.preventDefault}function s(a,p){o(a,"rotate("+p+"deg)")}function o(a,p){a.style.webkitTransform=p,a.style.mozTransform=p,a.style.msTransform=p,a.style.oTransform=p,a.style.transform=p}e.Navigator=function(a){var w,O,E,C,p=a.viewer,y=this;function _(E,C){s(y.displayRegionContainer,E),s(y.displayRegion,-E),y.viewport.setRotation(E,C)}a.element||a.id?(a.element?(a.id&&e.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),a.id=a.element.id?a.element.id:"navigator-"+e.now(),this.element=a.element):this.element=document.getElementById(a.id),a.controlOptions={anchor:e.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(a.id="navigator-"+e.now(),this.element=e.makeNeutralElement("div"),a.controlOptions={anchor:e.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:a.autoFade},a.position&&("BOTTOM_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_RIGHT:"TOP_LEFT"===a.position?a.controlOptions.anchor=e.ControlAnchor.TOP_LEFT:"ABSOLUTE"===a.position&&(a.controlOptions.anchor=e.ControlAnchor.ABSOLUTE,a.controlOptions.top=a.top,a.controlOptions.left=a.left,a.controlOptions.height=a.height,a.controlOptions.width=a.width))),this.element.id=a.id,this.element.className+=" navigator",(a=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.navigatorSizeRatio},a,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:a.animationTime,autoResize:!1,minZoomImageRatio:1,background:a.background,opacity:a.opacity,borderColor:a.borderColor,displayRegionColor:a.displayRegionColor})).minPixelRatio=this.minPixelRatio=p.minPixelRatio,e.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new e.Point(1,1),this.totalBorderWidths=new e.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),a.controlOptions.anchor!==e.ControlAnchor.NONE&&(C=this.borderWidth,(E=this.element.style).margin="0px",E.border=C+"px solid "+a.borderColor,E.padding="0px",E.background=a.background,E.opacity=a.opacity,E.overflow="hidden"),this.displayRegion=e.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(E,C){E.position="relative",E.top="0px",E.left="0px",E.fontSize="0px",E.overflow="hidden",E.border=C+"px solid "+a.displayRegionColor,E.margin="0px",E.padding="0px",E.background="transparent",E.float="left",E.cssFloat="left",E.styleFloat="left",E.zIndex=999999999,E.cursor="default",E.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),e.setElementPointerEventsNone(this.displayRegion),e.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=e.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",e.setElementPointerEventsNone(this.displayRegionContainer),e.setElementTouchActionNone(this.displayRegionContainer),p.addControl(this.element,a.controlOptions),this._resizeWithViewer=a.controlOptions.anchor!==e.ControlAnchor.ABSOLUTE&&a.controlOptions.anchor!==e.ControlAnchor.NONE,a.width&&a.height?(this.setWidth(a.width),this.setHeight(a.height)):this._resizeWithViewer&&(w=e.getElementSize(p.element),this.element.style.height=Math.round(w.y*a.sizeRatio)+"px",this.element.style.width=Math.round(w.x*a.sizeRatio)+"px",this.oldViewerSize=w,O=e.getElementSize(this.element),this.elementArea=O.x*O.y),this.oldContainerSize=new e.Point(0,0),e.Viewer.apply(this,[a]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),a.navigatorRotate&&(_(a.viewer.viewport?a.viewer.viewport.getRotation():a.viewer.degrees||0,!0),a.viewer.addHandler("rotate",function(E){_(E.degrees,E.immediately)})),this.innerTracker.destroy(),this.innerTracker=new e.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:e.delegate(this,n),clickHandler:e.delegate(this,i),releaseHandler:e.delegate(this,l),scrollHandler:e.delegate(this,d),preProcessEventHandler:function(E){"wheel"===E.eventType&&(E.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",e.setElementPointerEventsNone(this.canvas),e.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){y.viewport&&y.viewport.goHome(!0)}),p.world.addHandler("item-index-change",function(E){window.setTimeout(function(){var C=y.world.getItemAt(E.previousIndex);y.world.setItemIndex(C,E.newIndex)},1)}),p.world.addHandler("remove-item",function(E){var D=y._getMatchingItem(E.item);D&&y.world.removeItem(D)}),this.update(p.viewport)},e.extend(e.Navigator.prototype,e.EventSource.prototype,e.Viewer.prototype,{updateSize:function(){if(this.viewport){var a=new e.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);a.equals(this.oldContainerSize)||(this.viewport.resize(a,!0),this.viewport.goHome(!0),this.oldContainerSize=a,this.drawer.clear(),this.world.draw())}},setWidth:function(a){this.width=a,this.element.style.width="number"==typeof a?a+"px":a,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(a){this.height=a,this.element.style.height="number"==typeof a?a+"px":a,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(a){return this.viewport.setFlip(a),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(a){o(this.displayRegion,a),o(this.canvas,a),o(this.element,a)},update:function(a){var p,y,w,O,_,A;if(p=e.getElementSize(this.viewer.element),this._resizeWithViewer&&p.x&&p.y&&!p.equals(this.oldViewerSize)&&(this.oldViewerSize=p,this.maintainSizeRatio||!this.elementArea?(y=p.x*this.sizeRatio,w=p.y*this.sizeRatio):(y=Math.sqrt(this.elementArea*(p.x/p.y)),w=this.elementArea/y),this.element.style.width=Math.round(y)+"px",this.element.style.height=Math.round(w)+"px",this.elementArea||(this.elementArea=y*w),this.updateSize()),a&&this.viewport){if(O=a.getBoundsNoRotate(!0),_=this.viewport.pixelFromPointNoRotate(O.getTopLeft(),!1),A=this.viewport.pixelFromPointNoRotate(O.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var E=a.getRotation(!0);s(this.displayRegion,-E)}var C=this.displayRegion.style;C.display=this.world.getItemCount()?"block":"none",C.top=_.y.toFixed(2)+"px",C.left=_.x.toFixed(2)+"px";var N=A.y-_.y;C.width=Math.round(Math.max(A.x-_.x,0))+"px",C.height=Math.round(Math.max(N,0))+"px"}},addTiledImage:function(a){var p=this,y=a.originalTiledImage;delete a.original;var w=e.extend({},a,{success:function(O){var _=O.item;function A(){p._matchBounds(_,y)}_._originalForNavigator=y,p._matchBounds(_,y,!0),p._matchOpacity(_,y),p._matchCompositeOperation(_,y),y.addHandler("bounds-change",A),y.addHandler("clip-change",A),y.addHandler("opacity-change",function E(){p._matchOpacity(_,y)}),y.addHandler("composite-operation-change",function C(){p._matchCompositeOperation(_,y)})}});return e.Viewer.prototype.addTiledImage.apply(this,[w])},destroy:function(){return e.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(a){for(var y,p=this.world.getItemCount(),w=0;w<p;w++)if((y=this.world.getItemAt(w))._originalForNavigator===a)return y;return null},_matchBounds:function(a,p,y){var w=p.getBoundsNoRotate();a.setPosition(w.getTopLeft(),y),a.setWidth(w.width,y),a.setRotation(p.getRotation(),y),a.setClip(p.getClip()),a.setFlip(p.getFlip())},_matchOpacity:function(a,p){a.setOpacity(p.opacity)},_matchCompositeOperation:function(a,p){a.setCompositeOperation(p.compositeOperation)}})}(OpenSeadragon),function(e){var i={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};e.extend(e,{getString:function(n){var a,l=n.split("."),d=null,s=arguments,o=i;for(a=0;a<l.length-1;a++)o=o[l[a]]||{};return"string"!=typeof(d=o[l[a]])&&(e.console.error("Untranslated source string:",n),d=""),d.replace(/\{\d+\}/g,function(p){var y=parseInt(p.match(/\d+/),10)+1;return y<s.length?s[y]:""})},setString:function(n,l){var o,d=n.split("."),s=i;for(o=0;o<d.length-1;o++)s[d[o]]||(s[d[o]]={}),s=s[d[o]];s[d[o]]=l}})}(OpenSeadragon),function(e){e.Point=function(i,n){this.x="number"==typeof i?i:0,this.y="number"==typeof n?n:0},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},plus:function(i){return new e.Point(this.x+i.x,this.y+i.y)},minus:function(i){return new e.Point(this.x-i.x,this.y-i.y)},times:function(i){return new e.Point(this.x*i,this.y*i)},divide:function(i){return new e.Point(this.x/i,this.y/i)},negate:function(){return new e.Point(-this.x,-this.y)},distanceTo:function(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))},squaredDistanceTo:function(i){return Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2)},apply:function(i){return new e.Point(i(this.x),i(this.y))},equals:function(i){return i instanceof e.Point&&this.x===i.x&&this.y===i.y},rotate:function(i,n){var l,d;if(n=n||new e.Point(0,0),i%90==0)switch(e.positiveModulo(i,360)){case 0:l=1,d=0;break;case 90:l=0,d=1;break;case 180:l=-1,d=0;break;case 270:l=0,d=-1}else{var o=i*Math.PI/180;l=Math.cos(o),d=Math.sin(o)}return new e.Point(l*(this.x-n.x)-d*(this.y-n.y)+n.x,d*(this.x-n.x)+l*(this.y-n.y)+n.y)},toString:function(){return"("+Math.round(100*this.x)/100+","+Math.round(100*this.y)/100+")"}}}(OpenSeadragon),function(e){e.TileSource=function(n,l,d,s,o,a){var w,O,p=this,y=arguments;if(w=e.isPlainObject(n)?n:{width:y[0],height:y[1],tileSize:y[2],tileOverlap:y[3],minLevel:y[4],maxLevel:y[5]},e.EventSource.call(this),e.extend(!0,this,w),!this.success)for(O=0;O<arguments.length;O++)if(e.isFunction(arguments[O])){this.success=arguments[O];break}this.success&&this.addHandler("ready",function(_){p.success(_)}),"string"===e.type(arguments[0])&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new e.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=w.width&&w.height?w.width/w.height:1,this.dimensions=new e.Point(w.width,w.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=w.tileOverlap?w.tileOverlap:0,this.minLevel=w.minLevel?w.minLevel:0,this.maxLevel=null!=w.maxLevel?w.maxLevel:w.width&&w.height?Math.ceil(Math.log(Math.max(w.width,w.height))/Math.log(2)):0,this.success&&e.isFunction(this.success)&&this.success(this))},e.TileSource.prototype={getTileSize:function(n){return e.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(n){return this._tileWidth?this._tileWidth:this.getTileSize(n)},getTileHeight:function(n){return this._tileHeight?this._tileHeight:this.getTileSize(n)},setMaxLevel:function(n){this.maxLevel=n,this._memoizeLevelScale()},getLevelScale:function(n){return this._memoizeLevelScale(),this.getLevelScale(n)},_memoizeLevelScale:function(){var l,n={};for(l=0;l<=this.maxLevel;l++)n[l]=1/Math.pow(2,this.maxLevel-l);this.getLevelScale=function(d){return n[d]}},getNumTiles:function(n){var l=this.getLevelScale(n),d=Math.ceil(l*this.dimensions.x/this.getTileWidth(n)),s=Math.ceil(l*this.dimensions.y/this.getTileHeight(n));return new e.Point(d,s)},getPixelRatio:function(n){var l=this.dimensions.times(this.getLevelScale(n));return new e.Point(1/l.x*e.pixelDensityRatio,1/l.y*e.pixelDensityRatio)},getClosestLevel:function(){var n,l;for(n=this.minLevel+1;n<=this.maxLevel&&!((l=this.getNumTiles(n)).x>1||l.y>1);n++);return n-1},getTileAtPoint:function(n,l){e.console.assert(l.x>=0&&l.x<=1&&l.y>=0&&l.y<=1/this.aspectRatio,"[TileSource.getTileAtPoint] must be called with a valid point.");var s=this.dimensions.x*this.getLevelScale(n),a=l.y*s,p=Math.floor(l.x*s/this.getTileWidth(n)),y=Math.floor(a/this.getTileHeight(n));return l.x>=1&&(p=this.getNumTiles(n).x-1),l.y>=1/this.aspectRatio-1e-15&&(y=this.getNumTiles(n).y-1),new e.Point(p,y)},getTileBounds:function(n,l,d,s){var o=this.dimensions.times(this.getLevelScale(n)),a=this.getTileWidth(n),p=this.getTileHeight(n),y=0===l?0:a*l-this.tileOverlap,w=0===d?0:p*d-this.tileOverlap,O=a+(0===l?1:2)*this.tileOverlap,_=p+(0===d?1:2)*this.tileOverlap,A=1/o.x;return O=Math.min(O,o.x-y),_=Math.min(_,o.y-w),s?new e.Rect(0,0,O,_):new e.Rect(y*A,w*A,O*A,_*A)},getImageInfo:function(n){var d,s,o,a,p,y,w,l=this;n&&(w=(y=(p=n.split("/"))[p.length-1]).lastIndexOf("."))>-1&&(p[p.length-1]=y.slice(0,w));var O=null;if(this.splitHashDataForPost){var _=n.indexOf("#");-1!==_&&(O=n.substring(_+1),n=n.substr(0,_))}s=function(A){"string"==typeof A&&(A=e.parseXml(A));var E=e.TileSource.determineType(l,A,n);E?(void 0===(a=E.prototype.configure.apply(l,[A,n,O])).ajaxWithCredentials&&(a.ajaxWithCredentials=l.ajaxWithCredentials),o=new E(a),l.ready=!0,l.raiseEvent("ready",{tileSource:o})):l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:n})},n.match(/\.js$/)?(d=n.split("/").pop().replace(".js",""),e.jsonp({url:n,async:!1,callbackName:d,callback:s})):e.makeAjaxRequest({url:n,postData:O,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(A){var E=function i(n){var o,l=n.responseText,d=n.status;if(!n)throw new Error(e.getString("Errors.Security"));if(200!==n.status&&0!==n.status)throw d=n.status,new Error(e.getString("Errors.Status",d,404===d?"Not Found":n.statusText));if(l.match(/^\s*<.*/))try{o=n.responseXML&&n.responseXML.documentElement?n.responseXML:e.parseXml(l)}catch(a){o=n.responseText}else if(l.match(/\s*[{[].*/))try{o=e.parseJSON(l)}catch(a){o=l}else o=l;return o}(A);s(E)},error:function(A,E){var C;try{C="HTTP "+A.status+" attempting to load TileSource: "+n}catch(N){C=(void 0!==E&&E.toString?E.toString():"Unknown error")+" attempting to load TileSource: "+n}e.console.error(C),l.raiseEvent("open-failed",{message:C,source:n,postData:O})}})},supports:function(n,l){return!1},configure:function(n,l,d){throw new Error("Method not implemented.")},getTileUrl:function(n,l,d){throw new Error("Method not implemented.")},getTilePostData:function(n,l,d){return null},getTileAjaxHeaders:function(n,l,d){return{}},getTileHashKey:function(n,l,d,s,o,a){return function p(y){return o?y+"+"+JSON.stringify(o):y}("string"!=typeof s?n+"/"+l+"_"+d:s)},tileExists:function(n,l,d){var s=this.getNumTiles(n);return n>=this.minLevel&&n<=this.maxLevel&&l>=0&&d>=0&&l<s.x&&d<s.y},hasTransparency:function(n,l,d,s){return!!n||l.match(".png")},downloadTileStart:function(n){var l=n.userData,d=new Image;l.image=d,l.request=null;var s=function(o){d?(d.onload=d.onerror=d.onabort=null,n.finish(o?null:d,l.request,o)):n.finish(null,l.request,"Image load failed: undefined Image instance.")};d.onload=function(){s()},d.onabort=d.onerror=function(){s("Image load aborted.")},n.loadWithAjax?l.request=e.makeAjaxRequest({url:n.src,withCredentials:n.ajaxWithCredentials,headers:n.ajaxHeaders,responseType:"arraybuffer",postData:n.postData,success:function(o){var a;try{a=new window.Blob([o.response])}catch(w){var p=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===w.name&&p){var y=new p;y.append(o.response),a=y.getBlob()}}0===a.size?s("Empty image response."):d.src=(window.URL||window.webkitURL).createObjectURL(a)},error:function(o){s("Image load aborted - XHR error")}}):(!1!==n.crossOriginPolicy&&(d.crossOrigin=n.crossOriginPolicy),d.src=n.src)},downloadTileAbort:function(n){n.userData.request&&n.userData.request.abort();var l=n.userData.image;n.userData.image&&(l.onload=l.onerror=l.onabort=null)},createTileCache:function(n,l,d){n._data=l},destroyTileCache:function(n){n._data=null,n._renderedContext=null},getTileCacheData:function(n){return n._data},getTileCacheDataAsImage:function(n){return n._data},getTileCacheDataAsContext2D:function(n){if(!n._renderedContext){var l=document.createElement("canvas");l.width=n._data.width,l.height=n._data.height,n._renderedContext=l.getContext("2d"),n._renderedContext.drawImage(n._data,0,0),n._data=null}return n._renderedContext}},e.extend(!0,e.TileSource.prototype,e.EventSource.prototype),e.TileSource.determineType=function(n,l,d){var s;for(s in OpenSeadragon)if(s.match(/.+TileSource$/)&&e.isFunction(OpenSeadragon[s])&&e.isFunction(OpenSeadragon[s].prototype.supports)&&OpenSeadragon[s].prototype.supports.call(n,l,d))return OpenSeadragon[s];return e.console.error("No TileSource was able to open %s %s",d,l),null}}(OpenSeadragon),function(e){function n(l,d){var C,D,s=d.Image,o=s.Url,a=s.Format,p=s.Size,y=s.DisplayRect||[],w=parseInt(p.Width,10),O=parseInt(p.Height,10),_=parseInt(s.TileSize,10),A=parseInt(s.Overlap,10),E=[];for(D=0;D<y.length;D++)C=y[D].Rect,E.push(new e.DisplayRect(parseInt(C.X,10),parseInt(C.Y,10),parseInt(C.Width,10),parseInt(C.Height,10),parseInt(C.MinLevel,10),parseInt(C.MaxLevel,10)));return e.extend(!0,{width:w,height:O,tileSize:_,tileOverlap:A,minLevel:null,maxLevel:null,tilesUrl:o,fileFormat:a,displayRects:E},d)}e.DziTileSource=function(l,d,s,o,a,p,y,w,O){var _,A,E,C;if(C=e.isPlainObject(l)?l:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=C.tilesUrl,this.fileFormat=C.fileFormat,this.displayRects=C.displayRects,this.displayRects)for(_=this.displayRects.length-1;_>=0;_--)for(E=(A=this.displayRects[_]).minLevel;E<=A.maxLevel;E++)this._levelRects[E]||(this._levelRects[E]=[]),this._levelRects[E].push(A);e.TileSource.apply(this,[C])},e.extend(e.DziTileSource.prototype,e.TileSource.prototype,{supports:function(l,d){var s;return l.Image?s=l.Image.xmlns:l.documentElement&&("Image"===l.documentElement.localName||"Image"===l.documentElement.tagName)&&(s=l.documentElement.namespaceURI),-1!==(s=(s||"").toLowerCase()).indexOf("schemas.microsoft.com/deepzoom/2008")||-1!==s.indexOf("schemas.microsoft.com/deepzoom/2009")},configure:function(l,d,s){var o;return o=e.isPlainObject(l)?n(0,l):function i(l,d){if(!d||!d.documentElement)throw new Error(e.getString("Errors.Xml"));var w,O,_,A,E,s=d.documentElement,o=s.localName||s.tagName,a=d.documentElement.namespaceURI,p=null,y=[];if("Image"===o)try{if(void 0===(A=s.getElementsByTagName("Size")[0])&&(A=s.getElementsByTagNameNS(a,"Size")[0]),p={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:s.getAttribute("Url"),Format:s.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(s.getAttribute("Overlap"),10),TileSize:parseInt(s.getAttribute("TileSize"),10),Size:{Height:parseInt(A.getAttribute("Height"),10),Width:parseInt(A.getAttribute("Width"),10)}}},!e.imageFormatSupported(p.Image.Format))throw new Error(e.getString("Errors.ImageFormat",p.Image.Format.toUpperCase()));for(void 0===(w=s.getElementsByTagName("DisplayRect"))&&(w=s.getElementsByTagNameNS(a,"DisplayRect")[0]),E=0;E<w.length;E++)void 0===(_=(O=w[E]).getElementsByTagName("Rect")[0])&&(_=O.getElementsByTagNameNS(a,"Rect")[0]),y.push({Rect:{X:parseInt(_.getAttribute("X"),10),Y:parseInt(_.getAttribute("Y"),10),Width:parseInt(_.getAttribute("Width"),10),Height:parseInt(_.getAttribute("Height"),10),MinLevel:parseInt(O.getAttribute("MinLevel"),10),MaxLevel:parseInt(O.getAttribute("MaxLevel"),10)}});return y.length&&(p.Image.DisplayRect=y),n(0,p)}catch(N){throw N instanceof Error?N:new Error(e.getString("Errors.Dzi"))}else{if("Collection"===o)throw new Error(e.getString("Errors.Dzc"));if("Error"===o){var C=s.getElementsByTagName("Message")[0];throw new Error(C.firstChild.nodeValue)}}throw new Error(e.getString("Errors.Dzi"))}(0,l),d&&!o.tilesUrl&&(o.tilesUrl=d.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),o.queryParams=-1!==d.search(/\.(dzi|xml|js)\?/)?d.match(/\?.*/):""),o},getTileUrl:function(l,d,s){return[this.tilesUrl,l,"/",d,"_",s,".",this.fileFormat,this.queryParams].join("")},tileExists:function(l,d,s){var a,p,y,w,O,_,A,o=this._levelRects[l];if(this.minLevel&&l<this.minLevel||this.maxLevel&&l>this.maxLevel)return!1;if(!o||!o.length)return!0;for(A=o.length-1;A>=0;A--)if(!(l<(a=o[A]).minLevel||l>a.maxLevel)&&(p=this.getLevelScale(l),O=(y=a.x*p)+a.width*p,_=(w=a.y*p)+a.height*p,y=Math.floor(y/this._tileWidth),w=Math.floor(w/this._tileWidth),O=Math.ceil(O/this._tileWidth),_=Math.ceil(_/this._tileWidth),y<=d&&d<O&&w<=s&&s<_))return!0;return!1}})}(OpenSeadragon),function(e){function i(s){var a=Array.isArray(s.profile)?s.profile[0]:s.profile,p=-1!==["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"].indexOf(a),y=!1;return 2===s.version&&s.profile.length>1&&s.profile[1].supports&&(y=-1!==s.profile[1].supports.indexOf("sizeByW")),3===s.version&&s.extraFeatures&&(y=-1!==s.extraFeatures.indexOf("sizeByWh")),!p||y}function n(s){for(var o=[],a=0;a<s.sizes.length;a++)o.push({url:s._id+"/full/"+s.sizes[a].width+","+(3===s.version?s.sizes[a].height:"")+"/0/default."+s.tileFormat,width:s.sizes[a].width,height:s.sizes[a].height});return o.sort(function(p,y){return p.width-y.width})}function d(s,o,a){var p,y;if(3===s.nodeType&&a)(y=s.nodeValue.trim()).match(/^\d*$/)&&(y=Number(y)),o[a]?(e.isArray(o[a])||(o[a]=[o[a]]),o[a].push(y)):o[a]=y;else if(1===s.nodeType)for(p=0;p<s.childNodes.length;p++)d(s.childNodes[p],o,s.nodeName)}e.IIIFTileSource=function(s){if(e.extend(!0,this,s),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(s.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=s.version,this.tile_width&&this.tile_height)s.tileWidth=this.tile_width,s.tileHeight=this.tile_height;else if(this.tile_width)s.tileSize=this.tile_width;else if(this.tile_height)s.tileSize=this.tile_height;else if(this.tiles)if(1===this.tiles.length)s.tileWidth=this.tiles[0].width,s.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var o=0;o<this.tiles.length;o++)for(var a=0;a<this.tiles[o].scaleFactors.length;a++){var p=this.tiles[o].scaleFactors[a];this.scale_factors.push(p),s.tileSizePerScaleFactor[p]={width:this.tiles[o].width,height:this.tiles[o].height||this.tiles[o].width}}}else if(i(s)){for(var y=Math.min(this.height,this.width),w=[256,512,1024],O=[],_=0;_<w.length;_++)w[_]<=y&&O.push(w[_]);s.tileSize=O.length>0?Math.max.apply(null,O):y}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,s.levels=n(this),e.extend(!0,s,{width:s.levels[s.levels.length-1].width,height:s.levels[s.levels.length-1].height,tileSize:Math.max(s.height,s.width),tileOverlap:0,minLevel:0,maxLevel:s.levels.length-1}),this.levels=s.levels):e.console.error("Nothing in the info.json to construct image pyramids from");if(!s.maxLevel&&!this.emulateLegacyImagePyramid)if(this.scale_factors){var A=Math.max.apply(null,this.scale_factors);s.maxLevel=Math.round(Math.log(A)*Math.LOG2E)}else s.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));if(this.sizes){var E=this.sizes.length;(E===s.maxLevel||E===s.maxLevel+1)&&(this.levelSizes=this.sizes,E===s.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}e.TileSource.apply(this,[s])},e.extend(e.IIIFTileSource.prototype,e.TileSource.prototype,{supports:function(s,o){return!!(s.protocol&&"http://iiif.io/api/image"===s.protocol||s["@context"]&&("http://library.stanford.edu/iiif/image-api/1.1/context.json"===s["@context"]||"http://iiif.io/api/image/1/context.json"===s["@context"])||s.profile&&0===s.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")||s.identifier&&s.width&&s.height)||!(!s.documentElement||"info"!==s.documentElement.tagName||"http://library.stanford.edu/iiif/image-api/ns/"!==s.documentElement.namespaceURI)},configure:function(s,o,a){if(e.isPlainObject(s)){if(s["@context"]){var y=s["@context"];if(Array.isArray(y))for(var w=0;w<y.length;w++)if("string"==typeof y[w]&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(y[w])||"http://library.stanford.edu/iiif/image-api/1.1/context.json"===y[w])){y=y[w];break}switch(y){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":s.version=1;break;case"http://iiif.io/api/image/2/context.json":s.version=2;break;case"http://iiif.io/api/image/3/context.json":s.version=3;break;default:e.console.error("Data has a @context property which contains no known IIIF context URI.")}}else s["@context"]="http://iiif.io/api/image/1.0/context.json",s["@id"]=o.replace("/info.json",""),s.version=1;if(s.preferredFormats)for(var O=0;O<s.preferredFormats.length;O++)if(OpenSeadragon.imageFormatSupported(s.preferredFormats[O])){s.tileFormat=s.preferredFormats[O];break}return s}var p=function l(s){if(!s||!s.documentElement)throw new Error(e.getString("Errors.Xml"));var o=s.documentElement,p=null;if("info"===o.tagName)try{return d(o,p={}),p}catch(y){throw y instanceof Error?y:new Error(e.getString("Errors.IIIF"))}throw new Error(e.getString("Errors.IIIF"))}(s);return p["@context"]="http://iiif.io/api/image/1.0/context.json",p["@id"]=o.replace("/info.xml",""),p.version=1,p},getTileWidth:function(s){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileWidth.call(this,s);var o=Math.pow(2,this.maxLevel-s);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].width:this._tileWidth},getTileHeight:function(s){if(this.emulateLegacyImagePyramid)return e.TileSource.prototype.getTileHeight.call(this,s);var o=Math.pow(2,this.maxLevel-s);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[o]?this.tileSizePerScaleFactor[o].height:this._tileHeight},getLevelScale:function(s){if(this.emulateLegacyImagePyramid){var o=NaN;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(o=this.levels[s].width/this.levels[this.maxLevel].width),o}return e.TileSource.prototype.getLevelScale.call(this,s)},getNumTiles:function(s){if(this.emulateLegacyImagePyramid)return this.getLevelScale(s)?new e.Point(1,1):new e.Point(0,0);if(this.levelSizes){var a=this.levelSizes[s],p=Math.ceil(a.width/this.getTileWidth(s)),y=Math.ceil(a.height/this.getTileHeight(s));return new e.Point(p,y)}return e.TileSource.prototype.getNumTiles.call(this,s)},getTileAtPoint:function(s,o){if(this.emulateLegacyImagePyramid)return new e.Point(0,0);if(this.levelSizes){e.console.assert(o.x>=0&&o.x<=1&&o.y>=0&&o.y<=1/this.aspectRatio,"[TileSource.getTileAtPoint] must be called with a valid point.");var p=this.levelSizes[s].width,w=o.y*p,O=Math.floor(o.x*p/this.getTileWidth(s)),_=Math.floor(w/this.getTileHeight(s));return o.x>=1&&(O=this.getNumTiles(s).x-1),o.y>=1/this.aspectRatio-1e-15&&(_=this.getNumTiles(s).y-1),new e.Point(O,_)}return e.TileSource.prototype.getTileAtPoint.call(this,s,o)},getTileUrl:function(s,o,a){if(this.emulateLegacyImagePyramid){var p=null;return this.levels.length>0&&s>=this.minLevel&&s<=this.maxLevel&&(p=this.levels[s].url),p}var O,_,A,E,C,D,N,Z,X,se,h,re,ye,Oe,Re,w=Math.pow(.5,this.maxLevel-s);return this.levelSizes?(O=this.levelSizes[s].width,_=this.levelSizes[s].height):(O=Math.ceil(this.width*w),_=Math.ceil(this.height*w)),A=this.getTileWidth(s),E=this.getTileHeight(s),C=Math.round(A/w),D=Math.round(E/w),Re=1===this.version?"native."+this.tileFormat:"default."+this.tileFormat,O<A&&_<E?(re=2===this.version&&O===this.width?"full":3===this.version&&O===this.width&&_===this.height?"max":3===this.version?O+","+_:O+",",N="full"):(Z=o*C,X=a*D,se=Math.min(C,this.width-Z),h=Math.min(D,this.height-X),N=0===o&&0===a&&se===this.width&&h===this.height?"full":[Z,X,se,h].join(","),ye=Math.min(A,O-o*A),Oe=Math.min(E,_-a*E),re=2===this.version&&ye===this.width?"full":3===this.version&&ye===this.width&&Oe===this.height?"max":3===this.version?ye+","+Oe:ye+","),[this._id,N,re,"0",Re].join("/")},__testonly__:{canBeTiled:i,constructLevels:n}})}(OpenSeadragon),function(e){e.OsmTileSource=function(i,n,l,d,s){var o;(!(o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]}).width||!o.height)&&(o.width=65572864,o.height=65572864),o.tileSize||(o.tileSize=256,o.tileOverlap=0),o.tilesUrl||(o.tilesUrl="http://tile.openstreetmap.org/"),o.minLevel=8,e.TileSource.apply(this,[o])},e.extend(e.OsmTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&"openstreetmaps"===i.type},configure:function(i,n,l){return i},getTileUrl:function(i,n,l){return this.tilesUrl+(i-8)+"/"+n+"/"+l+".png"}})}(OpenSeadragon),function(e){e.TmsTileSource=function(i,n,l,d,s){var o;o=e.isPlainObject(i)?i:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var y,a=256*Math.ceil(o.width/256),p=256*Math.ceil(o.height/256);y=a>p?a/256:p/256,o.maxLevel=Math.ceil(Math.log(y)/Math.log(2))-1,o.tileSize=256,o.width=a,o.height=p,e.TileSource.apply(this,[o])},e.extend(e.TmsTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&"tiledmapservice"===i.type},configure:function(i,n,l){return i},getTileUrl:function(i,n,l){var d=this.getNumTiles(i).y-1;return this.tilesUrl+i+"/"+n+"/"+(d-l)+".png"}})}(OpenSeadragon),function(e){e.ZoomifyTileSource=function(i){void 0===i.tileSize&&(i.tileSize=256),void 0===i.fileFormat&&(i.fileFormat="jpg",this.fileFormat=i.fileFormat);var n={x:i.width,y:i.height};for(i.imageSizes=[{x:i.width,y:i.height}],i.gridSize=[this._getGridSize(i.width,i.height,i.tileSize)];parseInt(n.x,10)>i.tileSize||parseInt(n.y,10)>i.tileSize;)n.x=Math.floor(n.x/2),n.y=Math.floor(n.y/2),i.imageSizes.push({x:n.x,y:n.y}),i.gridSize.push(this._getGridSize(n.x,n.y,i.tileSize));i.imageSizes.reverse(),i.gridSize.reverse(),i.minLevel=0,i.maxLevel=i.gridSize.length-1,OpenSeadragon.TileSource.apply(this,[i])},e.extend(e.ZoomifyTileSource.prototype,e.TileSource.prototype,{_getGridSize:function(i,n,l){return{x:Math.ceil(i/l),y:Math.ceil(n/l)}},_calculateAbsoluteTileNumber:function(i,n,l){for(var d=0,s={},o=0;o<i;o++)d+=(s=this.gridSize[o]).x*s.y;return d+((s=this.gridSize[i]).x*l+n)},supports:function(i,n){return i.type&&"zoomifytileservice"===i.type},configure:function(i,n,l){return i},getTileUrl:function(i,n,l){var d,s=this._calculateAbsoluteTileNumber(i,n,l);return d=Math.floor(s/256),this.tilesUrl+"TileGroup"+d+"/"+i+"-"+n+"-"+l+"."+this.fileFormat}})}(OpenSeadragon),function(e){function l(d,s){return s.levels}e.LegacyTileSource=function(d){var s,o,a;e.isArray(d)&&(s={type:"legacy-image-pyramid",levels:d}),s.levels=function i(d){var o,a,s=[];for(a=0;a<d.length;a++)(o=d[a]).height&&o.width&&o.url?s.push({url:o.url,width:Number(o.width),height:Number(o.height)}):e.console.error("Unsupported image format: %s",o.url?o.url:"<no URL>");return s.sort(function(p,y){return p.height-y.height})}(s.levels),s.levels.length>0?(o=s.levels[s.levels.length-1].width,a=s.levels[s.levels.length-1].height):(o=0,a=0,e.console.error("No supported image formats found")),e.extend(!0,s,{width:o,height:a,tileSize:Math.max(a,o),tileOverlap:0,minLevel:0,maxLevel:s.levels.length>0?s.levels.length-1:0}),e.TileSource.apply(this,[s]),this.levels=s.levels},e.extend(e.LegacyTileSource.prototype,e.TileSource.prototype,{supports:function(d,s){return d.type&&"legacy-image-pyramid"===d.type||d.documentElement&&"legacy-image-pyramid"===d.documentElement.getAttribute("type")},configure:function(d,s,o){var a;return a=e.isPlainObject(d)?l(0,d):function n(d,s){if(!s||!s.documentElement)throw new Error(e.getString("Errors.Xml"));var w,O,o=s.documentElement,a=o.tagName,p=null,y=[];if("image"===a)try{for(p={type:o.getAttribute("type"),levels:[]},y=o.getElementsByTagName("level"),O=0;O<y.length;O++)p.levels.push({url:(w=y[O]).getAttribute("url"),width:parseInt(w.getAttribute("width"),10),height:parseInt(w.getAttribute("height"),10)});return l(0,p)}catch(_){throw _ instanceof Error?_:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"===a)throw new Error("Legacy Image Pyramid Collections not yet supported.");if("error"===a)throw new Error("Error: "+s)}throw new Error("Unknown element "+a)}(0,d),a},getLevelScale:function(d){var s=NaN;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(s=this.levels[d].width/this.levels[this.maxLevel].width),s},getNumTiles:function(d){return this.getLevelScale(d)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(d,s,o){var a=null;return this.levels.length>0&&d>=this.minLevel&&d<=this.maxLevel&&(a=this.levels[d].url),a}})}(OpenSeadragon),function(e){e.ImageTileSource=function(i){i=e.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},i),e.TileSource.apply(this,[i])},e.extend(e.ImageTileSource.prototype,e.TileSource.prototype,{supports:function(i,n){return i.type&&"image"===i.type},configure:function(i,n,l){return i},getImageInfo:function(i){var n=this._image=new Image,l=this;this.crossOriginPolicy&&(n.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(n.useCredentials=this.ajaxWithCredentials),e.addEvent(n,"load",function(){l.width=n.naturalWidth,l.height=n.naturalHeight,l.aspectRatio=l.width/l.height,l.dimensions=new e.Point(l.width,l.height),l._tileWidth=l.width,l._tileHeight=l.height,l.tileOverlap=0,l.minLevel=0,l.levels=l._buildLevels(),l.maxLevel=l.levels.length-1,l.ready=!0,l.raiseEvent("ready",{tileSource:l})}),e.addEvent(n,"error",function(){l.raiseEvent("open-failed",{message:"Error loading image at "+i,source:i})}),n.src=i},getLevelScale:function(i){var n=NaN;return i>=this.minLevel&&i<=this.maxLevel&&(n=this.levels[i].width/this.levels[this.maxLevel].width),n},getNumTiles:function(i){return this.getLevelScale(i)?new e.Point(1,1):new e.Point(0,0)},getTileUrl:function(i,n,l){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].url),d},getContext2D:function(i,n,l){var d=null;return i>=this.minLevel&&i<=this.maxLevel&&(d=this.levels[i].context2D),d},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var i=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!e.supportsCanvas||!this.useCanvas)return delete this._image,i;var n=this._image.naturalWidth,l=this._image.naturalHeight,d=document.createElement("canvas"),s=d.getContext("2d");if(d.width=n,d.height=l,s.drawImage(this._image,0,0,n,l),i[0].context2D=s,delete this._image,e.isCanvasTainted(d))return i;for(;n>=2&&l>=2;){n=Math.floor(n/2),l=Math.floor(l/2);var o=document.createElement("canvas"),a=o.getContext("2d");o.width=n,o.height=l,a.drawImage(d,0,0,n,l),i.splice(0,0,{context2D:a,width:n,height:l}),d=o,s=a}return i},_freeupCanvasMemory:function(){for(var i=0;i<this.levels.length;i++)this.levels[i].context2D&&(this.levels[i].context2D.canvas.height=0,this.levels[i].context2D.canvas.width=0)}})}(OpenSeadragon),function(e){e.TileSourceCollection=function(i,n,l,d){e.console.error("TileSourceCollection is deprecated; use World instead")}}(OpenSeadragon),function(e){function i(a){e.requestAnimationFrame(function(){!function n(a){var w;a.shouldFade&&(w=1-(e.now()-a.fadeBeginTime)/a.fadeLength,w=Math.min(1,w),w=Math.max(0,w),a.imgGroup&&e.setElementOpacity(a.imgGroup,w,!0),w>0&&i(a))}(a)})}function s(a,p){a.element.disabled||(p>=e.ButtonState.GROUP&&a.currentState===e.ButtonState.REST&&(function d(a){a.shouldFade=!1,a.imgGroup&&e.setElementOpacity(a.imgGroup,1,!0)}(a),a.currentState=e.ButtonState.GROUP),p>=e.ButtonState.HOVER&&a.currentState===e.ButtonState.GROUP&&(a.imgHover&&(a.imgHover.style.visibility=""),a.currentState=e.ButtonState.HOVER),p>=e.ButtonState.DOWN&&a.currentState===e.ButtonState.HOVER&&(a.imgDown&&(a.imgDown.style.visibility=""),a.currentState=e.ButtonState.DOWN))}function o(a,p){a.element.disabled||(p<=e.ButtonState.HOVER&&a.currentState===e.ButtonState.DOWN&&(a.imgDown&&(a.imgDown.style.visibility="hidden"),a.currentState=e.ButtonState.HOVER),p<=e.ButtonState.GROUP&&a.currentState===e.ButtonState.HOVER&&(a.imgHover&&(a.imgHover.style.visibility="hidden"),a.currentState=e.ButtonState.GROUP),p<=e.ButtonState.REST&&a.currentState===e.ButtonState.GROUP&&(function l(a){a.shouldFade=!0,a.fadeBeginTime=e.now()+a.fadeDelay,window.setTimeout(function(){i(a)},a.fadeDelay)}(a),a.currentState=e.ButtonState.REST))}e.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},e.Button=function(a){var p=this;e.EventSource.call(this),e.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},a),this.element=a.element||e.makeNeutralElement("div"),a.element||(this.imgRest=e.makeTransparentImage(this.srcRest),this.imgGroup=e.makeTransparentImage(this.srcGroup),this.imgHover=e.makeTransparentImage(this.srcHover),this.imgDown=e.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,e.setElementPointerEventsNone(this.imgRest),e.setElementPointerEventsNone(this.imgGroup),e.setElementPointerEventsNone(this.imgHover),e.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",e.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",e.Browser.vendor===e.BROWSERS.FIREFOX&&e.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=e.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new e.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(y){y.insideElementPressed?(s(p,e.ButtonState.DOWN),p.raiseEvent("enter",{originalEvent:y.originalEvent})):y.buttonDownAny||s(p,e.ButtonState.HOVER)},focusHandler:function(y){p.tracker.enterHandler(y),p.raiseEvent("focus",{originalEvent:y.originalEvent})},leaveHandler:function(y){o(p,e.ButtonState.GROUP),y.insideElementPressed&&p.raiseEvent("exit",{originalEvent:y.originalEvent})},blurHandler:function(y){p.tracker.leaveHandler(y),p.raiseEvent("blur",{originalEvent:y.originalEvent})},pressHandler:function(y){s(p,e.ButtonState.DOWN),p.raiseEvent("press",{originalEvent:y.originalEvent})},releaseHandler:function(y){y.insideElementPressed&&y.insideElementReleased?(o(p,e.ButtonState.HOVER),p.raiseEvent("release",{originalEvent:y.originalEvent})):y.insideElementPressed?o(p,e.ButtonState.GROUP):s(p,e.ButtonState.HOVER)},clickHandler:function(y){y.quick&&p.raiseEvent("click",{originalEvent:y.originalEvent})},keyHandler:function(y){13===y.keyCode?(p.raiseEvent("click",{originalEvent:y.originalEvent}),p.raiseEvent("release",{originalEvent:y.originalEvent}),y.preventDefault=!0):y.preventDefault=!1}}),o(this,e.ButtonState.REST)},e.extend(e.Button.prototype,e.EventSource.prototype,{notifyGroupEnter:function(){s(this,e.ButtonState.GROUP)},notifyGroupExit:function(){o(this,e.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),e.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),e.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}})}(OpenSeadragon),function(e){e.ButtonGroup=function(i){e.extend(!0,this,{buttons:[],clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:e.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},i);var d,n=this.buttons.concat([]),l=this;if(this.element=i.element||e.makeNeutralElement("div"),!i.group)for(this.element.style.display="inline-block",d=0;d<n.length;d++)this.element.appendChild(n[d].element);e.setElementTouchActionNone(this.element),this.tracker=new e.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(s){var o;for(o=0;o<l.buttons.length;o++)l.buttons[o].notifyGroupEnter()},leaveHandler:function(s){var o;if(!s.insideElementPressed)for(o=0;o<l.buttons.length;o++)l.buttons[o].notifyGroupExit()}})},e.ButtonGroup.prototype={addButton:function(i){this.buttons.push(i),this.element.appendChild(i.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var i=this.buttons.pop();this.element.removeChild(i.element),i.destroy()}this.tracker.destroy(),this.element=null}}}(OpenSeadragon),function(e){e.Rect=function(i,n,l,d,s){var o,a;this.x="number"==typeof i?i:0,this.y="number"==typeof n?n:0,this.width="number"==typeof l?l:0,this.height="number"==typeof d?d:0,this.degrees="number"==typeof s?s:0,this.degrees=e.positiveModulo(this.degrees,360),this.degrees>=270?(o=this.getTopRight(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=270):this.degrees>=180?(o=this.getBottomRight(),this.x=o.x,this.y=o.y,this.degrees-=180):this.degrees>=90&&(o=this.getBottomLeft(),this.x=o.x,this.y=o.y,a=this.height,this.height=this.width,this.width=a,this.degrees-=90)},e.Rect.fromSummits=function(i,n,l){var d=i.distanceTo(n),s=i.distanceTo(l),o=n.minus(i),a=Math.atan(o.y/o.x);return o.x<0?a+=Math.PI:o.y<0&&(a+=2*Math.PI),new e.Rect(i.x,i.y,d,s,a/Math.PI*180)},e.Rect.prototype={clone:function(){return new e.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new e.Point(this.x,this.y)},getBottomRight:function(){return new e.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new e.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new e.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new e.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new e.Point(this.width,this.height)},equals:function(i){return i instanceof e.Rect&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height&&this.degrees===i.degrees},times:function(i){return new e.Rect(this.x*i,this.y*i,this.width*i,this.height*i,this.degrees)},translate:function(i){return new e.Rect(this.x+i.x,this.y+i.y,this.width,this.height,this.degrees)},union:function(i){var n=this.getBoundingBox(),l=i.getBoundingBox(),d=Math.min(n.x,l.x),s=Math.min(n.y,l.y),o=Math.max(n.x+n.width,l.x+l.width),a=Math.max(n.y+n.height,l.y+l.height);return new e.Rect(d,s,o-d,a-s)},intersection:function(i){var n=1e-10,l=[],d=this.getTopLeft();i.containsPoint(d,n)&&l.push(d);var s=this.getTopRight();i.containsPoint(s,n)&&l.push(s);var o=this.getBottomLeft();i.containsPoint(o,n)&&l.push(o);var a=this.getBottomRight();i.containsPoint(a,n)&&l.push(a);var p=i.getTopLeft();this.containsPoint(p,n)&&l.push(p);var y=i.getTopRight();this.containsPoint(y,n)&&l.push(y);var w=i.getBottomLeft();this.containsPoint(w,n)&&l.push(w);var O=i.getBottomRight();this.containsPoint(O,n)&&l.push(O);for(var _=this._getSegments(),A=i._getSegments(),E=0;E<_.length;E++)for(var C=_[E],D=0;D<A.length;D++){var N=A[D],Z=X(C[0],C[1],N[0],N[1]);Z&&l.push(Z)}function X(qe,Ie,nt,Nt){var wt=Ie.minus(qe),Ve=Nt.minus(nt),at=-Ve.x*wt.y+wt.x*Ve.y;if(0===at)return null;var _t=(wt.x*(qe.y-nt.y)-wt.y*(qe.x-nt.x))/at,xt=(Ve.x*(qe.y-nt.y)-Ve.y*(qe.x-nt.x))/at;return-n<=_t&&_t<=1-n&&-n<=xt&&xt<=1-n?new e.Point(qe.x+xt*wt.x,qe.y+xt*wt.y):null}if(0===l.length)return null;for(var se=l[0].x,h=l[0].x,re=l[0].y,ye=l[0].y,Oe=1;Oe<l.length;Oe++){var Re=l[Oe];Re.x<se&&(se=Re.x),Re.x>h&&(h=Re.x),Re.y<re&&(re=Re.y),Re.y>ye&&(ye=Re.y)}return new e.Rect(se,re,h-se,ye-re)},_getSegments:function(){var i=this.getTopLeft(),n=this.getTopRight(),l=this.getBottomLeft(),d=this.getBottomRight();return[[i,n],[n,d],[d,l],[l,i]]},rotate:function(i,n){if(0===(i=e.positiveModulo(i,360)))return this.clone();n=n||this.getCenter();var l=this.getTopLeft().rotate(i,n),s=this.getTopRight().rotate(i,n).minus(l);s=s.apply(function(a){return Math.abs(a)<1e-15?0:a});var o=Math.atan(s.y/s.x);return s.x<0?o+=Math.PI:s.y<0&&(o+=2*Math.PI),new e.Rect(l.x,l.y,this.width,this.height,o/Math.PI*180)},getBoundingBox:function(){if(0===this.degrees)return this.clone();var i=this.getTopLeft(),n=this.getTopRight(),l=this.getBottomLeft(),d=this.getBottomRight(),s=Math.min(i.x,n.x,l.x,d.x),o=Math.max(i.x,n.x,l.x,d.x),a=Math.min(i.y,n.y,l.y,d.y),p=Math.max(i.y,n.y,l.y,d.y);return new e.Rect(s,a,o-s,p-a)},getIntegerBoundingBox:function(){var i=this.getBoundingBox(),n=Math.floor(i.x),l=Math.floor(i.y),d=Math.ceil(i.width+i.x-n),s=Math.ceil(i.height+i.y-l);return new e.Rect(n,l,d,s)},containsPoint:function(i,n){n=n||0;var l=this.getTopLeft(),d=this.getTopRight(),s=this.getBottomLeft(),o=d.minus(l),a=s.minus(l);return(i.x-l.x)*o.x+(i.y-l.y)*o.y>=-n&&(i.x-d.x)*o.x+(i.y-d.y)*o.y<=n&&(i.x-l.x)*a.x+(i.y-l.y)*a.y>=-n&&(i.x-s.x)*a.x+(i.y-s.y)*a.y<=n},toString:function(){return"["+Math.round(100*this.x)/100+", "+Math.round(100*this.y)/100+", "+Math.round(100*this.width)/100+"x"+Math.round(100*this.height)/100+", "+Math.round(100*this.degrees)/100+"deg]"}}}(OpenSeadragon),function(e){var i={};function n(w){var O;w.quick&&(O="horizontal"===this.scroll?Math.floor(w.position.x/(this.panelWidth+4)):Math.floor(w.position.y/this.panelHeight),this.viewer.goToPage(O)),this.element.focus()}function l(w){if(this.dragging=!0,this.element){var O=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),A=Number(this.element.style.width.replace("px","")),E=Number(this.element.style.height.replace("px","")),C=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?-w.delta.x>0?O>-(A-C.x)&&(this.element.style.marginLeft=O+2*w.delta.x+"px",s(this,C.x,O+2*w.delta.x)):-w.delta.x<0&&O<0&&(this.element.style.marginLeft=O+2*w.delta.x+"px",s(this,C.x,O+2*w.delta.x)):-w.delta.y>0?_>-(E-C.y)&&(this.element.style.marginTop=_+2*w.delta.y+"px",s(this,C.y,_+2*w.delta.y)):-w.delta.y<0&&_<0&&(this.element.style.marginTop=_+2*w.delta.y+"px",s(this,C.y,_+2*w.delta.y))}}function d(w){if(this.element){var O=Number(this.element.style.marginLeft.replace("px","")),_=Number(this.element.style.marginTop.replace("px","")),A=Number(this.element.style.width.replace("px","")),E=Number(this.element.style.height.replace("px","")),C=e.getElementSize(this.viewer.canvas);"horizontal"===this.scroll?w.scroll>0?O>-(A-C.x)&&(this.element.style.marginLeft=O-60*w.scroll+"px",s(this,C.x,O-60*w.scroll)):w.scroll<0&&O<0&&(this.element.style.marginLeft=O-60*w.scroll+"px",s(this,C.x,O-60*w.scroll)):w.scroll<0?_>C.y-E&&(this.element.style.marginTop=_+60*w.scroll+"px",s(this,C.y,_+60*w.scroll)):w.scroll>0&&_<0&&(this.element.style.marginTop=_+60*w.scroll+"px",s(this,C.y,_+60*w.scroll)),w.preventDefault=!0}}function s(w,O,_){var A,E,C,D,N,Z;for(A="horizontal"===w.scroll?w.panelWidth:w.panelHeight,E=Math.ceil(O/A)+5,N=E=(E=(C=Math.ceil((Math.abs(_)+O)/A)+1)-E)<0?0:E;N<C&&N<w.panels.length;N++)if(!(Z=w.panels[N]).activePanel){var se=w.viewer.tileSources[N];D=new e.Viewer({id:Z.id,tileSources:[se.referenceStripThumbnailUrl?{type:"image",url:se.referenceStripThumbnailUrl}:se],element:Z,navigatorSizeRatio:w.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:w.viewer.loadTilesWithAjax,ajaxHeaders:w.viewer.ajaxHeaders,useCanvas:w.useCanvas}),e.setElementPointerEventsNone(D.canvas),e.setElementPointerEventsNone(D.container),D.innerTracker.setTracking(!1),D.outerTracker.setTracking(!1),w.miniViewers[Z.id]=D,Z.activePanel=!0}}function o(w){var O=w.eventSource.element;"horizontal"===this.scroll?O.style.marginBottom="0px":O.style.marginLeft="0px"}function a(w){var O=w.eventSource.element;"horizontal"===this.scroll?O.style.marginBottom="-"+e.getElementSize(O).y/2+"px":O.style.marginLeft="-"+e.getElementSize(O).x/2+"px"}function p(w){if(w.ctrl||w.alt||w.meta)w.preventDefault=!1;else switch(w.keyCode){case 38:case 39:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),w.preventDefault=!0;break;case 40:case 37:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),w.preventDefault=!0;break;default:w.preventDefault=!1}}function y(w){if(w.ctrl||w.alt||w.meta)w.preventDefault=!1;else switch(w.keyCode){case 61:case 48:case 119:case 87:case 100:d.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),w.preventDefault=!0;break;case 45:case 115:case 83:case 97:d.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),w.preventDefault=!0;break;default:w.preventDefault=!1}}e.ReferenceStrip=function(w){var E,C,D,_=w.viewer,A=e.getElementSize(_.element);for(w.id||(w.id="referencestrip-"+e.now(),this.element=e.makeNeutralElement("div"),this.element.id=w.id,this.element.className="referencestrip"),w=e.extend(!0,{sizeRatio:e.DEFAULT_SETTINGS.referenceStripSizeRatio,position:e.DEFAULT_SETTINGS.referenceStripPosition,scroll:e.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:e.DEFAULT_SETTINGS.clickTimeThreshold},w,{element:this.element}),e.extend(this,w),i[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,(C=this.element.style).marginTop="0px",C.marginRight="0px",C.marginBottom="0px",C.marginLeft="0px",C.left="0px",C.bottom="0px",C.border="0px",C.background="#000",C.position="relative",e.setElementTouchActionNone(this.element),e.setElementOpacity(this.element,.8),this.viewer=_,this.tracker=new e.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:e.delegate(this,n),dragHandler:e.delegate(this,l),scrollHandler:e.delegate(this,d),enterHandler:e.delegate(this,o),leaveHandler:e.delegate(this,a),keyDownHandler:e.delegate(this,p),keyHandler:e.delegate(this,y),preProcessEventHandler:function(N){"wheel"===N.eventType&&(N.preventDefault=!0)}}),w.width&&w.height?(this.element.style.width=w.width+"px",this.element.style.height=w.height+"px",_.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):"horizontal"===w.scroll?(this.element.style.width=A.x*w.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.height=A.y*w.sizeRatio+"px",_.addControl(this.element,{anchor:e.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=A.y*w.sizeRatio*_.tileSources.length+12*_.tileSources.length+"px",this.element.style.width=A.x*w.sizeRatio+"px",_.addControl(this.element,{anchor:e.ControlAnchor.TOP_LEFT})),this.panelWidth=A.x*this.sizeRatio+8,this.panelHeight=A.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},D=0;D<_.tileSources.length;D++)(E=e.makeNeutralElement("div")).id=this.element.id+"-"+D,E.style.width=this.panelWidth+"px",E.style.height=this.panelHeight+"px",E.style.display="inline",E.style.float="left",E.style.cssFloat="left",E.style.styleFloat="left",E.style.padding="2px",e.setElementTouchActionNone(E),e.setElementPointerEventsNone(E),this.element.appendChild(E),E.activePanel=!1,this.panels.push(E);s(this,"vertical"===this.scroll?A.y:A.x,0),this.setFocus(0)},e.ReferenceStrip.prototype={setFocus:function(w){var N,O=this.element.querySelector("#"+this.element.id+"-"+w),_=e.getElementSize(this.viewer.canvas),A=Number(this.element.style.width.replace("px","")),E=Number(this.element.style.height.replace("px","")),C=-Number(this.element.style.marginLeft.replace("px","")),D=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==O&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=O,this.currentSelected.style.background="#999","horizontal"===this.scroll?(N=Number(w)*(this.panelWidth+3))>C+_.x-this.panelWidth?(N=Math.min(N,A-_.x),this.element.style.marginLeft=-N+"px",s(this,_.x,-N)):N<C&&(N=Math.max(0,N-_.x/2),this.element.style.marginLeft=-N+"px",s(this,_.x,-N)):(N=Number(w)*(this.panelHeight+3))>D+_.y-this.panelHeight?(N=Math.min(N,E-_.y),this.element.style.marginTop=-N+"px",s(this,_.y,-N)):N<D&&(N=Math.max(0,N-_.y/2),this.element.style.marginTop=-N+"px",s(this,_.y,-N)),this.currentPage=w,o.call(this,{eventSource:this.tracker}))},update:function(){return!!i[this.id].animating},destroy:function(){if(this.miniViewers)for(var w in this.miniViewers)this.miniViewers[w].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}}}(OpenSeadragon),function(e){e.DisplayRect=function(i,n,l,d,s,o){e.Rect.apply(this,[i,n,l,d]),this.minLevel=s,this.maxLevel=o},e.extend(e.DisplayRect.prototype,e.Rect.prototype)}(OpenSeadragon),function(e){e.Spring=function(n){var l=arguments;"object"!=typeof n&&(n={initial:l.length&&"number"==typeof l[0]?l[0]:void 0,springStiffness:l.length>1?l[1].springStiffness:5,animationTime:l.length>1?l[1].animationTime:1.5}),e.console.assert("number"==typeof n.springStiffness&&0!==n.springStiffness,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),e.console.assert("number"==typeof n.animationTime&&n.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),n.exponential&&(this._exponential=!0,delete n.exponential),e.extend(!0,this,n),this.current={value:"number"==typeof this.initial?this.initial:this._exponential?0:1,time:e.now()},e.console.assert(!this._exponential||0!==this.current.value,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},e.Spring.prototype={resetTo:function(n){e.console.assert(!this._exponential||0!==n,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=n,this.start.time=this.target.time=this.current.time=e.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(n){e.console.assert(!this._exponential||0!==n,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=n,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(n){this.start.value+=n,this.target.value+=n,this._exponential&&(e.console.assert(0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(n){this._exponential=n,this._exponential&&(e.console.assert(0!==this.current.value&&0!==this.target.value&&0!==this.start.value,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){var n,l;this.current.time=e.now(),this._exponential?(n=this.start._logValue,l=this.target._logValue):(n=this.start.value,l=this.target.value);var d=this.current.time>=this.target.time?l:n+(l-n)*function i(n,l){return(1-Math.exp(n*-l))/(1-Math.exp(-n))}(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),s=this.current.value;return this.current.value=this._exponential?Math.exp(d):d,s!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}}}(OpenSeadragon),function(e){e.ImageJob=function(n){e.extend(!0,this,{timeout:e.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},n),this.data=null,this.userData={},this.errorMsg=null},e.ImageJob.prototype={start:function(){this.tries++;var n=this,l=this.abort;this.jobId=window.setTimeout(function(){n.finish(null,null,"Image load exceeded timeout ("+n.timeout+" ms)")},this.timeout),this.abort=function(){n.source.downloadTileAbort(n),"function"==typeof l&&l()},this.source.downloadTileStart(this)},finish:function(n,l,d){this.data=n,this.request=l,this.errorMsg=d,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},e.ImageLoader=function(n){e.extend(!0,this,{jobLimit:e.DEFAULT_SETTINGS.imageLoaderLimit,timeout:e.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},n)},e.ImageLoader.prototype={addJob:function(n){if(!n.source){e.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var l=e.TileSource.prototype;n.source={downloadTileStart:l.downloadTileStart,downloadTileAbort:l.downloadTileAbort}}var d=this,o={src:n.src,tile:n.tile||{},source:n.source,loadWithAjax:n.loadWithAjax,ajaxHeaders:n.loadWithAjax?n.ajaxHeaders:null,crossOriginPolicy:n.crossOriginPolicy,ajaxWithCredentials:n.ajaxWithCredentials,postData:n.postData,callback:function(p){!function i(n,l,d){var s;""!==l.errorMsg&&null==l.data&&l.tries<1+n.tileRetryMax&&n.failedTiles.push(l),n.jobsInProgress--,(!n.jobLimit||n.jobsInProgress<n.jobLimit)&&n.jobQueue.length>0&&((s=n.jobQueue.shift()).start(),n.jobsInProgress++),n.tileRetryMax>0&&0===n.jobQueue.length&&(!n.jobLimit||n.jobsInProgress<n.jobLimit)&&n.failedTiles.length>0&&(s=n.failedTiles.shift(),setTimeout(function(){s.start()},n.tileRetryDelay),n.jobsInProgress++),d(l.data,l.errorMsg,l.request)}(d,p,n.callback)},abort:n.abort,timeout:this.timeout},a=new e.ImageJob(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(a.start(),this.jobsInProgress++):this.jobQueue.push(a)},clear:function(){for(var n=0;n<this.jobQueue.length;n++){var l=this.jobQueue[n];"function"==typeof l.abort&&l.abort()}this.jobQueue=[]}}}(OpenSeadragon),function(e){e.Tile=function(i,n,l,d,s,o,a,p,y,w,O,_){this.level=i,this.x=n,this.y=l,this.bounds=d,this.sourceBounds=w,this.exists=s,this._url=o,this.postData=O,this.context2D=a,this.loadWithAjax=p,this.ajaxHeaders=y,void 0===_&&(e.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),_=e.TileSource.prototype.getTileHashKey(i,n,l,o,y,O)),this.cacheKey=_,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},e.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(i){if(this.cacheImageRecord)if(this.loaded){if(!this.element){var n=this.getImage();if(!n)return;this.element=e.makeNeutralElement("div"),this.imgElement=n.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==i&&i.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),e.setElementOpacity(this.element,this.opacity)}else e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());else e.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString())},get image(){return e.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return e.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return"function"==typeof this._url?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(i,n,l,d,s,o){var y,w,O,a=this.position.times(e.pixelDensityRatio),p=this.size.times(e.pixelDensityRatio);this.context2D||this.cacheImageRecord?(y=this.getCanvasContext(),this.loaded&&y?(i.save(),i.globalAlpha=this.opacity,"number"==typeof l&&1!==l&&(a=a.times(l),p=p.times(l)),d instanceof e.Point&&(a=a.plus(d)),1===i.globalAlpha&&this.hasTransparency&&(s&&(a.x=Math.round(a.x),a.y=Math.round(a.y),p.x=Math.round(p.x),p.y=Math.round(p.y)),i.clearRect(a.x,a.y,p.x,p.y)),n({context:i,tile:this,rendered:y}),this.sourceBounds?(w=Math.min(this.sourceBounds.width,y.canvas.width),O=Math.min(this.sourceBounds.height,y.canvas.height)):(w=y.canvas.width,O=y.canvas.height),i.translate(a.x+p.x/2,0),this.flipped&&i.scale(-1,1),i.drawImage(y.canvas,0,0,w,O,-p.x/2,a.y,p.x,p.y),i.restore()):e.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString())):e.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString())},getScaleForEdgeSmoothing:function(){var i;if(this.cacheImageRecord)i=this.cacheImageRecord.getRenderedContext();else{if(!this.context2D)return e.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;i=this.context2D}return i.canvas.width/(this.size.x*e.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(i,n,l){var d=Math.max(1,Math.ceil((l.x-n.x)/2)),s=Math.max(1,Math.ceil((l.y-n.y)/2));return new e.Point(d,s).minus(this.position.times(e.pixelDensityRatio).times(i||1).apply(function(o){return o%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(e){e.OverlayPlacement=e.Placement,e.OverlayRotationMode=e.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),e.Overlay=function(i,n,l){var d;d=e.isPlainObject(i)?i:{element:i,location:n,placement:l},this.element=d.element,this.style=d.element.style,this._init(d)},e.Overlay.prototype={_init:function(i){this.location=i.location,this.placement=void 0===i.placement?e.Placement.TOP_LEFT:i.placement,this.onDraw=i.onDraw,this.checkResize=void 0===i.checkResize||i.checkResize,this.width=void 0===i.width?null:i.width,this.height=void 0===i.height?null:i.height,this.rotationMode=i.rotationMode||e.OverlayRotationMode.EXACT,this.location instanceof e.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=e.Placement.TOP_LEFT),this.scales=null!==this.width&&null!==this.height,this.bounds=new e.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(i,n){var l=e.Placement.properties[this.placement];!l||(l.isHorizontallyCentered?i.x-=n.x/2:l.isRight&&(i.x-=n.x),l.isVerticallyCentered?i.y-=n.y/2:l.isBottom&&(i.y-=n.y))},destroy:function(){var i=this.element,n=this.style;i.parentNode&&(i.parentNode.removeChild(i),i.prevElementParent&&(n.display="none",document.body.appendChild(i))),this.onDraw=null,n.top="",n.left="",n.position="",null!==this.width&&(n.width=""),null!==this.height&&(n.height="");var l=e.getCssPropertyWithVendorPrefix("transformOrigin"),d=e.getCssPropertyWithVendorPrefix("transform");l&&d&&(n[l]="",n[d]="")},drawHTML:function(i,n){var l=this.element;l.parentNode!==i&&(l.prevElementParent=l.parentNode,l.prevNextSibling=l.nextSibling,i.appendChild(l),this.style.position="absolute",this.size=e.getElementSize(l));var d=this._getOverlayPositionAndSize(n),s=d.position,o=this.size=d.size,a=d.rotate;if(this.onDraw)this.onDraw(s,o,this.element);else{var p=this.style;p.left=s.x+"px",p.top=s.y+"px",null!==this.width&&(p.width=o.x+"px"),null!==this.height&&(p.height=o.y+"px");var y=e.getCssPropertyWithVendorPrefix("transformOrigin"),w=e.getCssPropertyWithVendorPrefix("transform");y&&w&&(a?(p[y]=this._getTransformOrigin(),p[w]="rotate("+a+"deg)"):(p[y]="",p[w]="")),p.display="block"}},_getOverlayPositionAndSize:function(i){var n=i.pixelFromPoint(this.location,!0),l=this._getSizeInPixels(i);this.adjust(n,l);var d=0;if(i.getRotation(!0)&&this.rotationMode!==e.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX&&null!==this.width&&null!==this.height){var s=new e.Rect(n.x,n.y,l.x,l.y),o=this._getBoundingBox(s,i.getRotation(!0));n=o.getTopLeft(),l=o.getSize()}else d=i.getRotation(!0);return{position:n,size:l,rotate:d}},_getSizeInPixels:function(i){var n=this.size.x,l=this.size.y;if(null!==this.width||null!==this.height){var d=i.deltaPixelsFromPointsNoRotate(new e.Point(this.width||0,this.height||0),!0);null!==this.width&&(n=d.x),null!==this.height&&(l=d.y)}if(this.checkResize&&(null===this.width||null===this.height)){var s=this.size=e.getElementSize(this.element);null===this.width&&(n=s.x),null===this.height&&(l=s.y)}return new e.Point(n,l)},_getBoundingBox:function(i,n){var l=this._getPlacementPoint(i);return i.rotate(n,l).getBoundingBox()},_getPlacementPoint:function(i){var n=new e.Point(i.x,i.y),l=e.Placement.properties[this.placement];return l&&(l.isHorizontallyCentered?n.x+=i.width/2:l.isRight&&(n.x+=i.width),l.isVerticallyCentered?n.y+=i.height/2:l.isBottom&&(n.y+=i.height)),n},_getTransformOrigin:function(){var i="",n=e.Placement.properties[this.placement];return n&&(n.isLeft?i="left":n.isRight&&(i="right"),n.isTop?i+=" top":n.isBottom&&(i+=" bottom")),i},update:function(i,n){var l=e.isPlainObject(i)?i:{location:i,placement:n};this._init({location:l.location||this.location,placement:void 0!==l.placement?l.placement:this.placement,onDraw:l.onDraw||this.onDraw,checkResize:l.checkResize||this.checkResize,width:void 0!==l.width?l.width:this.width,height:void 0!==l.height?l.height:this.height,rotationMode:l.rotationMode||this.rotationMode})},getBounds:function(i){e.console.assert(i,"A viewport must now be passed to Overlay.getBounds.");var n=this.width,l=this.height;if(null===n||null===l){var d=i.deltaPointsFromPixelsNoRotate(this.size,!0);null===n&&(n=d.x),null===l&&(l=d.y)}var s=this.location.clone();return this.adjust(s,new e.Point(n,l)),this._adjustBoundsForRotation(i,new e.Rect(s.x,s.y,n,l))},_adjustBoundsForRotation:function(i,n){if(!i||0===i.getRotation(!0)||this.rotationMode===e.OverlayRotationMode.EXACT)return n;if(this.rotationMode===e.OverlayRotationMode.BOUNDING_BOX){if(null===this.width||null===this.height)return n;var l=this._getOverlayPositionAndSize(i);return i.viewerElementToViewportRectangle(new e.Rect(l.position.x,l.position.y,l.size.x,l.size.y))}return n.rotate(-i.getRotation(!0),this._getPlacementPoint(n))}}}(OpenSeadragon),function(e){e.Drawer=function(i){e.console.assert(i.viewer,"[Drawer] options.viewer is required");var n=arguments;if(e.isPlainObject(i)||(i={source:n[0],viewport:n[1],element:n[2]}),e.console.assert(i.viewport,"[Drawer] options.viewport is required"),e.console.assert(i.element,"[Drawer] options.element is required"),i.source&&e.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=i.viewer,this.viewport=i.viewport,this.debugGridColor="string"==typeof i.debugGridColor?[i.debugGridColor]:i.debugGridColor||e.DEFAULT_SETTINGS.debugGridColor,i.opacity&&e.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=e.supportsCanvas&&(!this.viewer||this.viewer.useCanvas),this.container=e.getElement(i.element),this.canvas=e.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var l=this._calculateCanvasSize();this.canvas.width=l.x,this.canvas.height=l.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",e.setElementOpacity(this.canvas,this.opacity,!0),e.setElementPointerEventsNone(this.canvas),e.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},e.Drawer.prototype={addOverlay:function(i,n,l,d){return e.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(i,n,l,d),this},updateOverlay:function(i,n,l){return e.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(i,n,l),this},removeOverlay:function(i){return e.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(i),this},clearOverlays:function(){return e.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(i){var n=this.viewport.pixelFromPointNoRotate(i,!0);return new e.Point(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio)},clipWithPolygons:function(i,n){if(this.useCanvas){var l=this._getContext(n);l.beginPath(),i.forEach(function(d){d.forEach(function(s,o){l[0===o?"moveTo":"lineTo"](s.x,s.y)})}),l.clip()}},setOpacity:function(i){e.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var n=this.viewer.world,l=0;l<n.getItemCount();l++)n.getItemAt(l).setOpacity(i);return this},getOpacity:function(){e.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var i=this.viewer.world,n=0,l=0;l<i.getItemCount();l++){var d=i.getItemAt(l).getOpacity();d>n&&(n=d)}return n},needsUpdate:function(){return e.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return e.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return e.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return e.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var i=this._calculateCanvasSize();if((this.canvas.width!==i.x||this.canvas.height!==i.y)&&(this.canvas.width=i.x,this.canvas.height=i.y,this._updateImageSmoothingEnabled(this.context),null!==this.sketchCanvas)){var n=this._calculateSketchCanvasSize();this.sketchCanvas.width=n.x,this.sketchCanvas.height=n.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(i,n){if(this.useCanvas){var l=this._getContext(i);if(n)l.clearRect(n.x,n.y,n.width,n.height);else{var d=l.canvas;l.clearRect(0,0,d.width,d.height)}}},viewportToDrawerRectangle:function(i){var n=this.viewport.pixelFromPointNoRotate(i.getTopLeft(),!0),l=this.viewport.deltaPixelsFromPointsNoRotate(i.getSize(),!0);return new e.Rect(n.x*e.pixelDensityRatio,n.y*e.pixelDensityRatio,l.x*e.pixelDensityRatio,l.y*e.pixelDensityRatio)},drawTile:function(i,n,l,d,s,o,a){if(e.console.assert(i,"[Drawer.drawTile] tile is required"),e.console.assert(n,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var p=this._getContext(l);i.drawCanvas(p,n,d=d||1,s,o,a)}else i.drawHTML(this.canvas)},_getContext:function(i){var n=this.context;if(i){if(null===this.sketchCanvas){this.sketchCanvas=document.createElement("canvas");var l=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=l.x,this.sketchCanvas.height=l.y,this.sketchContext=this.sketchCanvas.getContext("2d"),0===this.viewport.getRotation()){var d=this;this.viewer.addHandler("rotate",function s(){if(0!==d.viewport.getRotation()){d.viewer.removeHandler("rotate",s);var o=d._calculateSketchCanvasSize();d.sketchCanvas.width=o.x,d.sketchCanvas.height=o.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}n=this.sketchContext}return n},saveContext:function(i){!this.useCanvas||this._getContext(i).save()},restoreContext:function(i){!this.useCanvas||this._getContext(i).restore()},setClip:function(i,n){if(this.useCanvas){var l=this._getContext(n);l.beginPath(),l.rect(i.x,i.y,i.width,i.height),l.clip()}},drawRectangle:function(i,n,l){if(this.useCanvas){var d=this._getContext(l);d.save(),d.fillStyle=n,d.fillRect(i.x,i.y,i.width,i.height),d.restore()}},blendSketch:function(i,n,l,d){var s=i;if(e.isPlainObject(s)||(s={opacity:i,scale:n,translate:l,compositeOperation:d}),this.useCanvas&&this.sketchCanvas){i=s.opacity,d=s.compositeOperation;var o=s.bounds;if(this.context.save(),this.context.globalAlpha=i,d&&(this.context.globalCompositeOperation=d),o)o.x<0&&(o.width+=o.x,o.x=0),o.x+o.width>this.canvas.width&&(o.width=this.canvas.width-o.x),o.y<0&&(o.height+=o.y,o.y=0),o.y+o.height>this.canvas.height&&(o.height=this.canvas.height-o.y),this.context.drawImage(this.sketchCanvas,o.x,o.y,o.width,o.height,o.x,o.y,o.width,o.height);else{n=s.scale||1;var a=(l=s.translate)instanceof e.Point?l:new e.Point(0,0),p=0,y=0;if(l){var O=this.sketchCanvas.height-this.canvas.height;p=Math.round((this.sketchCanvas.width-this.canvas.width)/2),y=Math.round(O/2)}this.context.drawImage(this.sketchCanvas,a.x-p*n,a.y-y*n,(this.canvas.width+2*p)*n,(this.canvas.height+2*y)*n,-p,-y,this.canvas.width+2*p,this.canvas.height+2*y)}this.context.restore()}},drawDebugInfo:function(i,n,l,d){if(this.useCanvas){var s=this.viewer.world.getIndexOfItem(d)%this.debugGridColor.length,o=this.context;o.save(),o.lineWidth=2*e.pixelDensityRatio,o.font="small-caps bold "+13*e.pixelDensityRatio+"px arial",o.strokeStyle=this.debugGridColor[s],o.fillStyle=this.debugGridColor[s],this.viewport.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),d.getRotation(!0)%360!=0&&this._offsetForRotation({degrees:d.getRotation(!0),point:d.viewport.pixelFromPointNoRotate(d._getRotationPoint(!0),!0)}),d.viewport.getRotation(!0)%360==0&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.strokeRect(i.position.x*e.pixelDensityRatio,i.position.y*e.pixelDensityRatio,i.size.x*e.pixelDensityRatio,i.size.y*e.pixelDensityRatio);var a=(i.position.x+i.size.x/2)*e.pixelDensityRatio,p=(i.position.y+i.size.y/2)*e.pixelDensityRatio;o.translate(a,p),o.rotate(Math.PI/180*-this.viewport.getRotation(!0)),o.translate(-a,-p),0===i.x&&0===i.y&&(o.fillText("Zoom: "+this.viewport.getZoom(),i.position.x*e.pixelDensityRatio,(i.position.y-30)*e.pixelDensityRatio),o.fillText("Pan: "+this.viewport.getBounds().toString(),i.position.x*e.pixelDensityRatio,(i.position.y-20)*e.pixelDensityRatio)),o.fillText("Level: "+i.level,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+20)*e.pixelDensityRatio),o.fillText("Column: "+i.x,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+30)*e.pixelDensityRatio),o.fillText("Row: "+i.y,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+40)*e.pixelDensityRatio),o.fillText("Order: "+l+" of "+n,(i.position.x+10)*e.pixelDensityRatio,(i.position.y+50)*e.pixelDensityRatio),o.fillText("Size: "+i.size.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+60)*e.pixelDensityRatio),o.fillText("Position: "+i.position.toString(),(i.position.x+10)*e.pixelDensityRatio,(i.position.y+70)*e.pixelDensityRatio),this.viewport.getRotation(!0)%360!=0&&this._restoreRotationChanges(),d.getRotation(!0)%360!=0&&this._restoreRotationChanges(),d.viewport.getRotation(!0)%360==0&&d.getRotation(!0)%360==0&&d._drawer.viewer.viewport.getFlip()&&d._drawer._flip(),o.restore()}},debugRect:function(i){if(this.useCanvas){var n=this.context;n.save(),n.lineWidth=2*e.pixelDensityRatio,n.strokeStyle=this.debugGridColor[0],n.fillStyle=this.debugGridColor[0],n.strokeRect(i.x*e.pixelDensityRatio,i.y*e.pixelDensityRatio,i.width*e.pixelDensityRatio,i.height*e.pixelDensityRatio),n.restore()}},setImageSmoothingEnabled:function(i){this.useCanvas&&(this._imageSmoothingEnabled=i,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(i){i.msImageSmoothingEnabled=this._imageSmoothingEnabled,i.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(i){var n=this._getContext(i).canvas;return new e.Point(n.width,n.height)},getCanvasCenter:function(){return new e.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(i){var n=i.point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),l=this._getContext(i.useSketch);l.save(),l.translate(n.x,n.y),this.viewer.viewport.flipped?(l.rotate(Math.PI/180*-i.degrees),l.scale(-1,1)):l.rotate(Math.PI/180*i.degrees),l.translate(-n.x,-n.y)},_flip:function(i){var n=(i=i||{}).point?i.point.times(e.pixelDensityRatio):this.getCanvasCenter(),l=this._getContext(i.useSketch);l.translate(n.x,0),l.scale(-1,1),l.translate(-n.x,0)},_restoreRotationChanges:function(i){this._getContext(i).restore()},_calculateCanvasSize:function(){var i=e.pixelDensityRatio,n=this.viewport.getContainerSize();return{x:Math.round(n.x*i),y:Math.round(n.y*i)}},_calculateSketchCanvasSize:function(){var i=this._calculateCanvasSize();if(0===this.viewport.getRotation())return i;var n=Math.ceil(Math.sqrt(i.x*i.x+i.y*i.y));return{x:n,y:n}}}}(OpenSeadragon),function(e){e.Viewport=function(i){var n=arguments;n.length&&n[0]instanceof e.Point&&(i={containerSize:n[0],contentSize:n[1],config:n[2]}),i.config&&(e.extend(!0,i,i.config),delete i.config),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i.margins||{}),delete i.margins,i.initialDegrees=i.degrees,delete i.degrees,e.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:e.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:e.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:e.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:e.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:e.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:e.DEFAULT_SETTINGS.degrees,flipped:e.DEFAULT_SETTINGS.flipped,homeFillsViewer:e.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:e.DEFAULT_SETTINGS.silenceMultiImageWarnings},i),this._updateContainerInnerSize(),this.centerSpringX=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new e.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new e.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new e.Spring({initial:i.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new e.Rect(0,0,1,1),1),this.goHome(!0),this.update()},e.Viewport.prototype={get degrees(){return e.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(i){e.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(i)},resetContentSize:function(i){return e.console.assert(i,"[Viewport.resetContentSize] contentSize is required"),e.console.assert(i instanceof e.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),e.console.assert(i.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),e.console.assert(i.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new e.Rect(0,0,1,i.y/i.x),i.x),this},setHomeBounds:function(i,n){e.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(i,n)},_setContentBounds:function(i,n){e.console.assert(i,"[Viewport._setContentBounds] bounds is required"),e.console.assert(i instanceof e.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),e.console.assert(i.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),e.console.assert(i.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=i.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(n),this._contentBounds=i.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(n),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:n,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var i=this._contentAspectRatio/this.getAspectRatio();return(this.homeFillsViewer?i>=1?i:1:i>=1?1:i)/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var i=this._contentBounds.getCenter(),n=1/this.getHomeZoom(),l=n/this.getAspectRatio();return new e.Rect(i.x-n/2,i.y-l/2,n,l)},goHome:function(i){return this.viewer&&this.viewer.raiseEvent("home",{immediately:i}),this.fitBounds(this.getHomeBounds(),i)},getMinZoom:function(){var i=this.getHomeZoom();return this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*i},getMaxZoom:function(){var i=this.maxZoomLevel;return i||(i=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,i/=this._contentBounds.width),Math.max(i,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new e.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return e.extend({},this._margins)},setMargins:function(i){e.console.assert("object"===e.type(i),"[Viewport.setMargins] margins must be an object"),this._margins=e.extend({left:0,top:0,right:0,bottom:0},i),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(i){return this.getBoundsNoRotate(i).rotate(-this.getRotation(i))},getBoundsNoRotate:function(i){var n=this.getCenter(i),l=1/this.getZoom(i),d=l/this.getAspectRatio();return new e.Rect(n.x-l/2,n.y-d/2,l,d)},getBoundsWithMargins:function(i){return this.getBoundsNoRotateWithMargins(i).rotate(-this.getRotation(i),this.getCenter(i))},getBoundsNoRotateWithMargins:function(i){var n=this.getBoundsNoRotate(i),l=this._containerInnerSize.x*this.getZoom(i);return n.x-=this._margins.left/l,n.y-=this._margins.top/l,n.width+=(this._margins.left+this._margins.right)/l,n.height+=(this._margins.top+this._margins.bottom)/l,n},getCenter:function(i){var d,s,o,a,p,O,n=new e.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),l=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return i?n:this.zoomPoint?(d=this.pixelFromPoint(this.zoomPoint,!0),a=(o=1/(s=this.getZoom()))/this.getAspectRatio(),p=new e.Rect(n.x-o/2,n.y-a/2,o,a),O=this._pixelFromPoint(this.zoomPoint,p).minus(d).rotate(-this.getRotation(!0)).divide(this._containerInnerSize.x*s),l.plus(O)):l},getZoom:function(i){return i?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(i){return Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(i){var p,y,w,A,E,C,n=this.viewportToViewerElementRectangle(i).getBoundingBox(),l=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),d=!1,s=!1;this.wrapHorizontal||(y=l.x-(n.x+n.width)+(p=n.width>l.width?this.visibilityRatio*l.width:this.visibilityRatio*n.width),w=l.x+l.width-n.x-p,p>l.width?(n.x+=(y+w)/2,d=!0):w<0?(n.x+=w,d=!0):y>0&&(n.x+=y,d=!0)),this.wrapVertical||(E=l.y-(n.y+n.height)+(A=n.height>l.height?this.visibilityRatio*l.height:this.visibilityRatio*n.height),C=l.y+l.height-n.y-A,A>l.height?(n.y+=(E+C)/2,s=!0):C<0?(n.y+=C,s=!0):E>0&&(n.y+=E,s=!0));var D=d||s,N=D?this.viewerElementToViewportRectangle(n):i.clone();return N.xConstrained=d,N.yConstrained=s,N.constraintApplied=D,N},_raiseConstraintsEvent:function(i){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:i})},applyConstraints:function(i){var n=this.getZoom(),l=this._applyZoomConstraints(n);n!==l&&this.zoomTo(l,this.zoomPoint,i);var d=this.getConstrainedBounds(!1);return d.constraintApplied&&(this.fitBounds(d,i),this._raiseConstraintsEvent(i)),this},ensureVisible:function(i){return this.applyConstraints(i)},_fitBounds:function(i,n){var l=(n=n||{}).immediately||!1,d=n.constraints||!1,s=this.getAspectRatio(),o=i.getCenter(),a=new e.Rect(i.x,i.y,i.width,i.height,i.degrees+this.getRotation()).getBoundingBox();a.getAspectRatio()>=s?a.height=a.width/s:a.width=a.height*s,a.x=o.x-a.width/2,a.y=o.y-a.height/2;var p=1/a.width;if(l)return this.panTo(o,!0),this.zoomTo(p,null,!0),d&&this.applyConstraints(!0),this;var y=this.getCenter(!0),w=this.getZoom(!0);this.panTo(y,!0),this.zoomTo(w,null,!0);var O=this.getBounds(),_=this.getZoom();if(0===_||Math.abs(p/_-1)<1e-8)return this.zoomTo(p,null,!0),this.panTo(o,l),d&&this.applyConstraints(!1),this;if(d){this.panTo(o,!1),p=this._applyZoomConstraints(p),this.zoomTo(p,null,!1);var A=this.getConstrainedBounds();this.panTo(y,!0),this.zoomTo(w,null,!0),this.fitBounds(A)}else{var C=a.rotate(-this.getRotation()).getTopLeft().times(p).minus(O.getTopLeft().times(_)).divide(p-_);this.zoomTo(p,C,l)}return this},fitBounds:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!1})},fitBoundsWithConstraints:function(i,n){return this._fitBounds(i,{immediately:n,constraints:!0})},fitVertically:function(i){var n=new e.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(n,i)},fitHorizontally:function(i){var n=new e.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(n,i)},getConstrainedBounds:function(i){var n;return n=this.getBounds(i),this._applyBoundaryConstraints(n)},panBy:function(i,n){var l=new e.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(l.plus(i),n)},panTo:function(i,n){return n?(this.centerSpringX.resetTo(i.x),this.centerSpringY.resetTo(i.y)):(this.centerSpringX.springTo(i.x),this.centerSpringY.springTo(i.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:i,immediately:n}),this},zoomBy:function(i,n,l){return this.zoomTo(this.zoomSpring.target.value*i,n,l)},zoomTo:function(i,n,l){var d=this;return this.zoomPoint=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,l?this._adjustCenterSpringsForZoomPoint(function(){d.zoomSpring.resetTo(i)}):this.zoomSpring.springTo(i),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:i,refPoint:n,immediately:l}),this},setRotation:function(i,n){return this.rotateTo(i,null,n)},getRotation:function(i){return i?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(i,n,l){return this.rotateTo(i,n,l)},rotateTo:function(i,n,l){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===i&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=n instanceof e.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,l)if(this.rotationPivot){if(!(i-this._oldDegrees))return this.rotationPivot=null,this;this._rotateAboutPivot(i)}else this.degreesSpring.resetTo(i);else{var s=e.positiveModulo(this.degreesSpring.current.value,360),o=e.positiveModulo(i,360),a=o-s;a>180?o-=360:a<-180&&(o+=360),this.degreesSpring.resetTo(i+(s-o)),this.degreesSpring.springTo(i)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:i,immediately:!!l,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(i,n,l){return this.rotateTo(this.degreesSpring.target.value+i,n,l)},resize:function(i,n){var l=this.getBoundsNoRotate(),d=l;this.containerSize.x=i.x,this.containerSize.y=i.y,this._updateContainerInnerSize(),n&&(d.width=l.width*(i.x/this.containerSize.x),d.height=d.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:i,maintain:n});var o=this.fitBounds(d,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:i,maintain:n}),o},_updateContainerInnerSize:function(){this._containerInnerSize=new e.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var i=this;this._adjustCenterSpringsForZoomPoint(function(){i.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var n=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,n},_rotateAboutPivot:function(i){var n=!0===i,l=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(l.x),this.centerSpringY.shiftBy(l.y),n?this.degreesSpring.update():this.degreesSpring.resetTo(i);var s=l.rotate(-1*(this.degreesSpring.current.value-this._oldDegrees)).times(-1);this.centerSpringX.shiftBy(s.x),this.centerSpringY.shiftBy(s.y)},_adjustCenterSpringsForZoomPoint:function(i){if(this.zoomPoint){var n=this.pixelFromPoint(this.zoomPoint,!0);i();var d=this.pixelFromPoint(this.zoomPoint,!0).minus(n),s=this.deltaPointsFromPixels(d,!0);this.centerSpringX.shiftBy(s.x),this.centerSpringY.shiftBy(s.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else i()},deltaPixelsFromPointsNoRotate:function(i,n){return i.times(this._containerInnerSize.x*this.getZoom(n))},deltaPixelsFromPoints:function(i,n){return this.deltaPixelsFromPointsNoRotate(i.rotate(this.getRotation(n)),n)},deltaPointsFromPixelsNoRotate:function(i,n){return i.divide(this._containerInnerSize.x*this.getZoom(n))},deltaPointsFromPixels:function(i,n){return this.deltaPointsFromPixelsNoRotate(i,n).rotate(-this.getRotation(n))},pixelFromPointNoRotate:function(i,n){return this._pixelFromPointNoRotate(i,this.getBoundsNoRotate(n))},pixelFromPoint:function(i,n){return this._pixelFromPoint(i,this.getBoundsNoRotate(n))},_pixelFromPointNoRotate:function(i,n){return i.minus(n.getTopLeft()).times(this._containerInnerSize.x/n.width).plus(new e.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(i,n){return this._pixelFromPointNoRotate(i.rotate(this.getRotation(!0),this.getCenter(!0)),n)},pointFromPixelNoRotate:function(i,n){var l=this.getBoundsNoRotate(n);return i.minus(new e.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/l.width).plus(l.getTopLeft())},pointFromPixel:function(i,n){return this.pointFromPixelNoRotate(i,n).rotate(-this.getRotation(n),this.getCenter(n))},_viewportToImageDelta:function(i,n){var l=this._contentBoundsNoRotate.width;return new e.Point(i*this._contentSizeNoRotate.x/l,n*this._contentSizeNoRotate.x/l)},viewportToImageCoordinates:function(i,n){if(i instanceof e.Point)return this.viewportToImageCoordinates(i.x,i.y);if(this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(1===l)return this.viewer.world.getItemAt(0).viewportToImageCoordinates(i,n,!0)}return this._viewportToImageDelta(i-this._contentBoundsNoRotate.x,n-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(i,n){var l=this._contentBoundsNoRotate.width;return new e.Point(i/this._contentSizeNoRotate.x*l,n/this._contentSizeNoRotate.x*l)},imageToViewportCoordinates:function(i,n){if(i instanceof e.Point)return this.imageToViewportCoordinates(i.x,i.y);if(this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(1===l)return this.viewer.world.getItemAt(0).imageToViewportCoordinates(i,n,!0)}var s=this._imageToViewportDelta(i,n);return s.x+=this._contentBoundsNoRotate.x,s.y+=this._contentBoundsNoRotate.y,s},imageToViewportRectangle:function(i,n,l,d){var s=i;if(s instanceof e.Rect||(s=new e.Rect(i,n,l,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).imageToViewportRectangle(i,n,l,d,!0)}var p=this.imageToViewportCoordinates(s.x,s.y),y=this._imageToViewportDelta(s.width,s.height);return new e.Rect(p.x,p.y,y.x,y.y,s.degrees)},viewportToImageRectangle:function(i,n,l,d){var s=i;if(s instanceof e.Rect||(s=new e.Rect(i,n,l,d)),this.viewer){var o=this.viewer.world.getItemCount();if(o>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(1===o)return this.viewer.world.getItemAt(0).viewportToImageRectangle(i,n,l,d,!0)}var p=this.viewportToImageCoordinates(s.x,s.y),y=this._viewportToImageDelta(s.width,s.height);return new e.Rect(p.x,p.y,y.x,y.y,s.degrees)},viewerElementToImageCoordinates:function(i){var n=this.pointFromPixel(i,!0);return this.viewportToImageCoordinates(n)},imageToViewerElementCoordinates:function(i){var n=this.imageToViewportCoordinates(i);return this.pixelFromPoint(n,!0)},windowToImageCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var n=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(n)},imageToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer."),this.imageToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(i){return this.pointFromPixel(i,!0)},viewportToViewerElementCoordinates:function(i){return this.pixelFromPoint(i,!0)},viewerElementToViewportRectangle:function(i){return e.Rect.fromSummits(this.pointFromPixel(i.getTopLeft(),!0),this.pointFromPixel(i.getTopRight(),!0),this.pointFromPixel(i.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(i){return e.Rect.fromSummits(this.pixelFromPoint(i.getTopLeft(),!0),this.pixelFromPoint(i.getTopRight(),!0),this.pixelFromPoint(i.getBottomLeft(),!0))},windowToViewportCoordinates:function(i){e.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var n=i.minus(e.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(n)},viewportToWindowCoordinates:function(i){return e.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer."),this.viewportToViewerElementCoordinates(i).plus(e.getElementPosition(this.viewer.element))},viewportToImageZoom:function(i){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(1===n)return this.viewer.world.getItemAt(0).viewportToImageZoom(i)}return i*(this._containerInnerSize.x/this._contentSizeNoRotate.x*this._contentBoundsNoRotate.width)},imageToViewportZoom:function(i){if(this.viewer){var n=this.viewer.world.getItemCount();if(n>1)this.silenceMultiImageWarnings||e.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(1===n)return this.viewer.world.getItemAt(0).imageToViewportZoom(i)}return i*(this._contentSizeNoRotate.x/this._containerInnerSize.x/this._contentBoundsNoRotate.width)},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(i){return this.flipped===i||(this.flipped=i,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:i})),this}}}(OpenSeadragon),function(e){e.TiledImage=function(s){var o=this;e.console.assert(s.tileCache,"[TiledImage] options.tileCache is required"),e.console.assert(s.drawer,"[TiledImage] options.drawer is required"),e.console.assert(s.viewer,"[TiledImage] options.viewer is required"),e.console.assert(s.imageLoader,"[TiledImage] options.imageLoader is required"),e.console.assert(s.source,"[TiledImage] options.source is required"),e.console.assert(!s.clip||s.clip instanceof e.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),e.EventSource.call(this),this._tileCache=s.tileCache,delete s.tileCache,this._drawer=s.drawer,delete s.drawer,this._imageLoader=s.imageLoader,delete s.imageLoader,s.clip instanceof e.Rect&&(this._clip=s.clip.clone()),delete s.clip;var a=s.x||0;delete s.x;var p=s.y||0;delete s.y,this.normHeight=s.source.dimensions.y/s.source.dimensions.x,this.contentAspectX=s.source.dimensions.x/s.source.dimensions.y;var y=1;s.width?(y=s.width,delete s.width,s.height&&(e.console.error("specifying both width and height to a tiledImage is not supported"),delete s.height)):s.height&&(y=s.height/this.normHeight,delete s.height);var w=s.fitBounds;delete s.fitBounds;var O=s.fitBoundsPlacement||OpenSeadragon.Placement.CENTER;delete s.fitBoundsPlacement;var _=s.degrees||0;delete s.degrees;var A=s.ajaxHeaders;delete s.ajaxHeaders,e.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:e.DEFAULT_SETTINGS.springStiffness,animationTime:e.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:e.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:e.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:e.DEFAULT_SETTINGS.wrapVertical,immediateRender:e.DEFAULT_SETTINGS.immediateRender,blendTime:e.DEFAULT_SETTINGS.blendTime,alwaysBlend:e.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:e.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:e.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:e.DEFAULT_SETTINGS.iOSDevice,debugMode:e.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:e.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:e.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:e.DEFAULT_SETTINGS.placeholderFillStyle,opacity:e.DEFAULT_SETTINGS.opacity,preload:e.DEFAULT_SETTINGS.preload,compositeOperation:e.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:e.DEFAULT_SETTINGS.subPixelRoundingForTransparency},s),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new e.Spring({initial:a,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new e.Spring({initial:p,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new e.Spring({initial:y,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new e.Spring({initial:_,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),w&&this.fitBounds(w,O,!0),this._drawingHandler=function(E){o.viewer.raiseEvent("tile-drawing",e.extend({tiledImage:o},E))},this._ownAjaxHeaders={},this.setAjaxHeaders(A,!1)},e.extend(e.TiledImage.prototype,e.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(s){s!==this._fullyLoaded&&(this._fullyLoaded=s,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=e.now(),this._needsDraw=!0},update:function(){var s=this._xSpring.update(),o=this._ySpring.update(),a=this._scaleSpring.update(),p=this._degreesSpring.update();return!!(s||o||a||p)&&(this._updateForScale(),this._needsDraw=!0,!0)},draw:function(){0!==this.opacity||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(s){return this.getBoundsNoRotate(s).rotate(this.getRotation(s),this._getRotationPoint(s))},getBoundsNoRotate:function(s){return s?new e.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new e.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return e.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(s){var o=this.getBoundsNoRotate(s);if(this._clip){var y=this._clip.times((s?this._worldWidthCurrent:this._worldWidthTarget)/this.source.dimensions.x);o=new e.Rect(o.x+y.x,o.y+y.y,y.width,y.height)}return o.rotate(this.getRotation(s),this._getRotationPoint(s))},getTileBounds:function(s,o,a){var p=this.source.getNumTiles(s),y=(p.x+o%p.x)%p.x,w=(p.y+a%p.y)%p.y,O=this.source.getTileBounds(s,y,w);return this.getFlip()&&(O.x=1-O.x-O.width),O.x+=(o-y)/p.x,O.y+=this._worldHeightCurrent/this._worldWidthCurrent*((a-w)/p.y),O},getContentSize:function(){return new e.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var s=this.imageToWindowCoordinates(new e.Point(0,0)),o=this.imageToWindowCoordinates(this.getContentSize());return new e.Point(o.x-s.x,o.y-s.y)},_viewportToImageDelta:function(s,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(s*(this.source.dimensions.x/p),o*(this.source.dimensions.y*this.contentAspectX/p))},viewportToImageCoordinates:function(s,o,a){var p;return s instanceof e.Point?(a=o,p=s):p=new e.Point(s,o),p=p.rotate(-this.getRotation(a),this._getRotationPoint(a)),a?this._viewportToImageDelta(p.x-this._xSpring.current.value,p.y-this._ySpring.current.value):this._viewportToImageDelta(p.x-this._xSpring.target.value,p.y-this._ySpring.target.value)},_imageToViewportDelta:function(s,o,a){var p=a?this._scaleSpring.current.value:this._scaleSpring.target.value;return new e.Point(s/this.source.dimensions.x*p,o/this.source.dimensions.y/this.contentAspectX*p)},imageToViewportCoordinates:function(s,o,a){s instanceof e.Point&&(a=o,o=s.y,s=s.x);var p=this._imageToViewportDelta(s,o);return a?(p.x+=this._xSpring.current.value,p.y+=this._ySpring.current.value):(p.x+=this._xSpring.target.value,p.y+=this._ySpring.target.value),p.rotate(this.getRotation(a),this._getRotationPoint(a))},imageToViewportRectangle:function(s,o,a,p,y){var w=s;w instanceof e.Rect?y=o:w=new e.Rect(s,o,a,p);var O=this.imageToViewportCoordinates(w.getTopLeft(),y),_=this._imageToViewportDelta(w.width,w.height,y);return new e.Rect(O.x,O.y,_.x,_.y,w.degrees+this.getRotation(y))},viewportToImageRectangle:function(s,o,a,p,y){var w=s;s instanceof e.Rect?y=o:w=new e.Rect(s,o,a,p);var O=this.viewportToImageCoordinates(w.getTopLeft(),y),_=this._viewportToImageDelta(w.width,w.height,y);return new e.Rect(O.x,O.y,_.x,_.y,w.degrees-this.getRotation(y))},viewerElementToImageCoordinates:function(s){var o=this.viewport.pointFromPixel(s,!0);return this.viewportToImageCoordinates(o)},imageToViewerElementCoordinates:function(s){var o=this.imageToViewportCoordinates(s);return this.viewport.pixelFromPoint(o,!0)},windowToImageCoordinates:function(s){var o=s.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(o)},imageToWindowCoordinates:function(s){return this.imageToViewerElementCoordinates(s).plus(OpenSeadragon.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(s){var o=this._scaleSpring.current.value;return s=s.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new e.Rect((s.x-this._xSpring.current.value)/o,(s.y-this._ySpring.current.value)/o,s.width/o,s.height/o,s.degrees)},viewportToImageZoom:function(s){return this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x*s},imageToViewportZoom:function(s){return s/(this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x)},setPosition:function(s,o){var a=this._xSpring.target.value===s.x&&this._ySpring.target.value===s.y;if(o){if(a&&this._xSpring.current.value===s.x&&this._ySpring.current.value===s.y)return;this._xSpring.resetTo(s.x),this._ySpring.resetTo(s.y),this._needsDraw=!0}else{if(a)return;this._xSpring.springTo(s.x),this._ySpring.springTo(s.y),this._needsDraw=!0}a||this._raiseBoundsChange()},setWidth:function(s,o){this._setScale(s,o)},setHeight:function(s,o){this._setScale(s/this.normHeight,o)},setCroppingPolygons:function(s){try{if(!e.isArray(s))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=s.map(function(p){return function(p){return p.map(function(y){try{if(function(p){return p instanceof e.Point||"number"==typeof p.x&&"number"==typeof p.y}(y))return{x:y.x,y:y.y};throw new Error}catch(w){throw new Error("A Provided cropping polygon point is not supported")}})}(p)})}catch(p){e.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),e.console.error(p),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(s,o,a){var p=e.Placement.properties[o=o||e.Placement.CENTER],y=this.contentAspectX,w=0,O=0,_=1,A=1;if(this._clip&&(y=this._clip.getAspectRatio(),_=this._clip.width/this.source.dimensions.x,A=this._clip.height/this.source.dimensions.y,s.getAspectRatio()>y?(w=this._clip.x/this._clip.height*s.height,O=this._clip.y/this._clip.height*s.height):(w=this._clip.x/this._clip.width*s.width,O=this._clip.y/this._clip.width*s.width)),s.getAspectRatio()>y){var E=s.height/A,C=0;p.isHorizontallyCentered?C=(s.width-s.height*y)/2:p.isRight&&(C=s.width-s.height*y),this.setPosition(new e.Point(s.x-w+C,s.y-O),a),this.setHeight(E,a)}else{var D=s.width/_,N=0;p.isVerticallyCentered?N=(s.height-s.width/y)/2:p.isBottom&&(N=s.height-s.width/y),this.setPosition(new e.Point(s.x-w,s.y-O+N),a),this.setWidth(D,a)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(s){e.console.assert(!s||s instanceof e.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),this._clip=s instanceof e.Rect?s.clone():null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(s){this.flipped=!!s,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(s){s!==this.opacity&&(this.opacity=s,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(s){this._preload=!!s,this._needsDraw=!0},getRotation:function(s){return s?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(s,o){this._degreesSpring.target.value===s&&this._degreesSpring.isAtTargetValue()||(o?this._degreesSpring.resetTo(s):this._degreesSpring.springTo(s),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(s){return this.getBoundsNoRotate(s).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(s){s!==this.compositeOperation&&(this.compositeOperation=s,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(s,o){null===s&&(s={}),e.isPlainObject(s)?(this._ownAjaxHeaders=s,this._updateAjaxHeaders(o)):console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object")},_updateAjaxHeaders:function(s){if(void 0===s&&(s=!0),this.ajaxHeaders=e.isPlainObject(this.viewer.ajaxHeaders)?e.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this._ownAjaxHeaders,s){var o,a,p,y;for(var w in this.tilesMatrix)for(var O in o=this.source.getNumTiles(w),this.tilesMatrix[w])for(var _ in a=(o.x+O%o.x)%o.x,this.tilesMatrix[w][O])if(p=(o.y+_%o.y)%o.y,(y=this.tilesMatrix[w][O][_]).loadWithAjax=this.loadTilesWithAjax,y.loadWithAjax){var A=this.source.getTileAjaxHeaders(w,a,p);y.ajaxHeaders=e.extend({},this.ajaxHeaders,A)}else y.ajaxHeaders=null;for(var E=0;E<this._imageLoader.jobQueue.length;E++){var C=this._imageLoader.jobQueue[E];C.loadWithAjax=C.tile.loadWithAjax,C.ajaxHeaders=C.tile.loadWithAjax?C.tile.ajaxHeaders:null}}},_setScale:function(s,o){var a=this._scaleSpring.target.value===s;if(o){if(a&&this._scaleSpring.current.value===s)return;this._scaleSpring.resetTo(s),this._updateForScale(),this._needsDraw=!0}else{if(a)return;this._scaleSpring.springTo(s),this._updateForScale(),this._needsDraw=!0}a||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var s=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),o=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,a=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(o/this.minPixelRatio)/Math.log(2))));return a=Math.max(a,this.source.minLevel||0),{lowestLevel:s=Math.min(s,a),highestLevel:a}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;)this.lastDrawn.pop().beingDrawn=!1;var o=this.viewport,a=this._viewportToTiledImageRectangle(o.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var p=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(null===(a=a.intersection(p)))return}for(var y=this._getLevelsInterval(),w=y.lowestLevel,O=y.highestLevel,_=null,A=!1,E=e.now(),C=O;C>=w;C--){var D=!1,N=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(C),!0).x*this._scaleSpring.current.value;if(C===w||!A&&N>=this.minPixelRatio)D=!0,A=!0;else if(!A)continue;var Z=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(C),!1).x*this._scaleSpring.current.value,X=o.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,se=this.immediateRender?1:X,h=Math.min(1,(N-.5)/.5),re=se/Math.abs(se-Z);if(_=this._updateLevel(A,D,C,h,re,a,E,_),this._providesCoverage(this.coverage,C))break}this._drawTiles(this.lastDrawn),_&&!_.context2D?(this._loadTile(_,E),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(0===this._tilesLoading)},_getCornerTiles:function(s,o,a){var p,y;this.wrapHorizontal?(p=e.positiveModulo(o.x,1),y=e.positiveModulo(a.x,1)):(p=Math.max(0,o.x),y=Math.min(1,a.x));var w,O,_=1/this.source.aspectRatio;this.wrapVertical?(w=e.positiveModulo(o.y,_),O=e.positiveModulo(a.y,_)):(w=Math.max(0,o.y),O=Math.min(_,a.y));var A=this.source.getTileAtPoint(s,new e.Point(p,w)),E=this.source.getTileAtPoint(s,new e.Point(y,O)),C=this.source.getNumTiles(s);return this.wrapHorizontal&&(A.x+=C.x*Math.floor(o.x),E.x+=C.x*Math.floor(a.x)),this.wrapVertical&&(A.y+=C.y*Math.floor(o.y/_),E.y+=C.y*Math.floor(a.y/_)),{topLeft:A,bottomRight:E}},_updateLevel:function(s,o,a,p,y,w,O,_){var A=w.getBoundingBox().getTopLeft(),E=w.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:s,level:a,opacity:p,visibility:y,drawArea:w,topleft:A,bottomright:E,currenttime:O,best:_}),this._resetCoverage(this.coverage,a),this._resetCoverage(this.loadingCoverage,a);var C=this._getCornerTiles(a,A,E),D=C.topLeft,N=C.bottomRight,Z=this.source.getNumTiles(a),X=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(N.x+=1,this.wrapHorizontal||(N.x=Math.min(N.x,Z.x-1)));for(var se=D.x;se<=N.x;se++)for(var h=D.y;h<=N.y;h++){var re;if(this.getFlip()){var ye=(Z.x+se%Z.x)%Z.x;re=se+Z.x-ye-ye-1}else re=se;null!==w.intersection(this.getTileBounds(a,re,h))&&(_=this._updateTile(o,s,re,h,a,p,y,X,Z,O,_))}return _},_updateTile:function(s,o,a,p,y,w,O,_,A,E,C){var D=this._getTile(a,p,y,E,A,this._worldWidthCurrent,this._worldHeightCurrent),N=o;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:D}),this._setCoverage(this.coverage,y,a,p,!1);var Z=D.loaded||D.loading||this._isCovered(this.loadingCoverage,y,a,p);if(this._setCoverage(this.loadingCoverage,y,a,p,Z),!D.exists||(s&&!N&&(this._isCovered(this.coverage,y,a,p)?this._setCoverage(this.coverage,y,a,p,!0):N=!0),!N))return C;if(this._positionTile(D,this.source.tileOverlap,this.viewport,_,O),!D.loaded)if(D.context2D)this._setTileLoaded(D);else{var X=this._tileCache.getImageRecord(D.cacheKey);X&&this._setTileLoaded(D,X.getData())}return D.loaded?this._blendTile(D,a,p,y,w,E)&&(this._needsDraw=!0):D.loading?this._tilesLoading++:Z||(C=this._compareTiles(C,D)),C},_getTile:function(s,o,a,p,y,w,O){var _,A,E,C,D,N,Z,X,se,h,re=this.tilesMatrix,ye=this.source;return re[a]||(re[a]={}),re[a][s]||(re[a][s]={}),(!re[a][s][o]||!re[a][s][o].flipped!=!this.flipped)&&(_=(y.x+s%y.x)%y.x,A=(y.y+o%y.y)%y.y,E=this.getTileBounds(a,s,o),C=ye.getTileBounds(a,_,A,!0),D=ye.tileExists(a,_,A),N=ye.getTileUrl(a,_,A),Z=ye.getTilePostData(a,_,A),this.loadTilesWithAjax?(X=ye.getTileAjaxHeaders(a,_,A),e.isPlainObject(this.ajaxHeaders)&&(X=e.extend({},this.ajaxHeaders,X))):X=null,se=ye.getContext2D?ye.getContext2D(a,_,A):void 0,h=new e.Tile(a,s,o,E,D,N,se,this.loadTilesWithAjax,X,C,Z,ye.getTileHashKey(a,_,A,N,X,Z)),this.getFlip()?0===_&&(h.isRightMost=!0):_===y.x-1&&(h.isRightMost=!0),A===y.y-1&&(h.isBottomMost=!0),h.flipped=this.flipped,re[a][s][o]=h),(h=re[a][s][o]).lastTouchTime=p,h},_loadTile:function(s,o){var a=this;s.loading=!0,this._imageLoader.addJob({src:s.getUrl(),tile:s,source:this.source,postData:s.postData,loadWithAjax:s.loadWithAjax,ajaxHeaders:s.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(p,y,w){a._onTileLoad(s,o,p,y,w)},abort:function(){s.loading=!1}})},_onTileLoad:function(s,o,a,p,y){if(!a)return e.console.error("Tile %s failed to load: %s - error: %s",s,s.getUrl(),p),this.viewer.raiseEvent("tile-load-failed",{tile:s,tiledImage:this,time:o,message:p,tileRequest:y}),s.loading=!1,void(s.exists=!1);if(s.exists=!0,o<this.lastResetTime)return e.console.warn("Ignoring tile %s loaded before reset: %s",s,s.getUrl()),void(s.loading=!1);var w=this,O=function(){var A=w.source.getClosestLevel();w._setTileLoaded(s,a,A,y)};this._midDraw?window.setTimeout(O,1):O()},_setTileLoaded:function(s,o,a,p){var y=0,w=!1,O=this;function _(){return w&&e.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),y++,A}function A(){0==--y&&(s.loading=!1,s.loaded=!0,s.hasTransparency=O.source.hasTransparency(s.context2D,s.getUrl(),s.ajaxHeaders,s.postData),s.context2D||O._tileCache.cacheTile({data:o,tile:s,cutoff:a,tiledImage:O}),O._needsDraw=!0)}var E=_();this.viewer.raiseEvent("tile-loaded",{tile:s,tiledImage:this,tileRequest:p,get image(){return e.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),o},data:o,getCompletionCallback:_}),w=!0,E()},_positionTile:function(s,o,a,p,y){var w=s.bounds.getTopLeft();w.x*=this._scaleSpring.current.value,w.y*=this._scaleSpring.current.value,w.x+=this._xSpring.current.value,w.y+=this._ySpring.current.value;var O=s.bounds.getSize();O.x*=this._scaleSpring.current.value,O.y*=this._scaleSpring.current.value;var _=a.pixelFromPointNoRotate(w,!0),A=a.pixelFromPointNoRotate(w,!1),E=a.deltaPixelsFromPointsNoRotate(O,!0),C=a.deltaPixelsFromPointsNoRotate(O,!1),D=A.plus(C.divide(2)),N=p.squaredDistanceTo(D);o||(E=E.plus(new e.Point(1,1))),s.isRightMost&&this.wrapHorizontal&&(E.x+=.75),s.isBottomMost&&this.wrapVertical&&(E.y+=.75),s.position=_,s.size=E,s.squaredDistance=N,s.visibility=y},_blendTile:function(s,o,a,p,y,w){var _,A,O=1e3*this.blendTime;if(s.blendStart||(s.blendStart=w),_=w-s.blendStart,A=O?Math.min(1,_/O):1,this.alwaysBlend&&(A*=y),s.opacity=A,this.lastDrawn.push(s),1===A)this._setCoverage(this.coverage,p,o,a,!0),this._hasOpaqueTile=!0;else if(_<O)return!0;return!1},_compareTiles:function(s,o){return!s||o.visibility>s.visibility||o.visibility===s.visibility&&o.squaredDistance<s.squaredDistance?o:s},_drawTiles:function(s){if(0!==this.opacity&&(0!==s.length||this.placeholderFillStyle)){var a,o=s[0];o&&(a=this.opacity<1||this.compositeOperation&&"source-over"!==this.compositeOperation||!this._isBottomItem()&&this.source.hasTransparency(o.context2D,o.getUrl(),o.ajaxHeaders,o.postData));var p,y,_,w=this.viewport.getZoom(!0),O=this.viewportToImageZoom(w);s.length>1&&O>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360==0&&e.supportsCanvas&&this.viewer.useCanvas&&(a=!0,p=o.getScaleForEdgeSmoothing(),y=o.getTranslationForEdgeSmoothing(p,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0))),a&&(p||(_=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!=0||this.getRotation(!0)%360!=0)&&(_.x=this._drawer.viewer.container.clientWidth-(_.x+_.width)),_=_.times(e.pixelDensityRatio)),this._drawer._clear(!0,_)),p||(this.viewport.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:a}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:a}),this.viewport.getRotation(!0)%360==0&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var A=!1;if(this._clip){this._drawer.saveContext(a);var E=this.imageToViewportRectangle(this._clip,!0);E=E.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var C=this._drawer.viewportToDrawerRectangle(E);p&&(C=C.times(p)),y&&(C=C.translate(y)),this._drawer.setClip(C,a),A=!0}if(this._croppingPolygons){var D=this;this._drawer.saveContext(a);try{var N=this._croppingPolygons.map(function(Oe){return Oe.map(function(Re){var qe=D.imageToViewportCoordinates(Re.x,Re.y,!0).rotate(-D.getRotation(!0),D._getRotationPoint(!0)),Ie=D._drawer.viewportCoordToDrawerCoord(qe);return p&&(Ie=Ie.times(p)),y&&(Ie=Ie.plus(y)),Ie})});this._drawer.clipWithPolygons(N,a)}catch(Oe){e.console.error(Oe)}A=!0}if(this.placeholderFillStyle&&!1===this._hasOpaqueTile){var Z=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));p&&(Z=Z.times(p)),y&&(Z=Z.translate(y));var X;X="function"==typeof this.placeholderFillStyle?this.placeholderFillStyle(this,this._drawer.context):this.placeholderFillStyle,this._drawer.drawRectangle(Z,X,a)}var se=function d(s){if("number"==typeof s)return l(s);if(!s||!e.Browser)return i;var o=s[e.Browser.vendor];return n(o)&&(o=s["*"]),l(o)}(this.subPixelRoundingForTransparency),h=!1;se===e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS?h=!0:se===e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&(h=!(this.viewer&&this.viewer.isAnimating()));for(var ye=s.length-1;ye>=0;ye--)this._drawer.drawTile(o=s[ye],this._drawingHandler,a,p,y,h,this.source),o.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:o});A&&this._drawer.restoreContext(a),p||(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(a),this.viewport.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(a)),a&&(p&&(this.viewport.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!=0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:p,translate:y,compositeOperation:this.compositeOperation,bounds:_}),p&&(this.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!=0&&this._drawer._restoreRotationChanges(!1))),p||this.viewport.getRotation(!0)%360==0&&this.getRotation(!0)%360==0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(s)}},_drawDebugInfo:function(s){if(this.debugMode)for(var o=s.length-1;o>=0;o--){var a=s[o];try{this._drawer.drawDebugInfo(a,s.length,o,this)}catch(p){e.console.error(p)}}},_providesCoverage:function(s,o,a,p){var y,w,O,_;if(!s[o])return!1;if(void 0===a||void 0===p){for(O in y=s[o])if(Object.prototype.hasOwnProperty.call(y,O))for(_ in w=y[O])if(Object.prototype.hasOwnProperty.call(w,_)&&!w[_])return!1;return!0}return void 0===s[o][a]||void 0===s[o][a][p]||!0===s[o][a][p]},_isCovered:function(s,o,a,p){return void 0===a||void 0===p?this._providesCoverage(s,o+1):this._providesCoverage(s,o+1,2*a,2*p)&&this._providesCoverage(s,o+1,2*a,2*p+1)&&this._providesCoverage(s,o+1,2*a+1,2*p)&&this._providesCoverage(s,o+1,2*a+1,2*p+1)},_setCoverage:function(s,o,a,p,y){s[o]?(s[o][a]||(s[o][a]={}),s[o][a][p]=y):e.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",o)},_resetCoverage:function(s,o){s[o]={}}});var i=e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function n(s){return s!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&s!==e.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&s!==e.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function l(s){return n(s)?i:s}}(OpenSeadragon),function(e){var i=function(l){e.console.assert(l,"[TileCache.cacheTile] options is required"),e.console.assert(l.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(l.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=l.tile,this.tiledImage=l.tiledImage},n=function(l){e.console.assert(l,"[ImageRecord] options is required"),e.console.assert(l.data,"[ImageRecord] options.data is required"),this._tiles=[],l.create.apply(null,[this,l.data,l.ownerTile]),this._destroyImplementation=l.destroy.bind(null,this),this.getImage=l.getImage.bind(null,this),this.getData=l.getData.bind(null,this),this.getRenderedContext=l.getRenderedContext.bind(null,this)};n.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(l){e.console.assert(l,"[ImageRecord.addTile] tile is required"),this._tiles.push(l)},removeTile:function(l){for(var d=0;d<this._tiles.length;d++)if(this._tiles[d]===l)return void this._tiles.splice(d,1);e.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",l)},getTileCount:function(){return this._tiles.length}},e.TileCache=function(l){this._maxImageCacheCount=(l=l||{}).maxImageCacheCount||e.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},e.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(l){e.console.assert(l,"[TileCache.cacheTile] options is required"),e.console.assert(l.tile,"[TileCache.cacheTile] options.tile is required"),e.console.assert(l.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),e.console.assert(l.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var d=l.cutoff||0,s=this._tilesLoaded.length,o=this._imagesLoaded[l.tile.cacheKey];if(o||(l.data||(e.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),l.data=l.image),e.console.assert(l.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),o=this._imagesLoaded[l.tile.cacheKey]=new n({data:l.data,ownerTile:l.tile,create:l.tiledImage.source.createTileCache,destroy:l.tiledImage.source.destroyTileCache,getImage:l.tiledImage.source.getTileCacheDataAsImage,getData:l.tiledImage.source.getTileCacheData,getRenderedContext:l.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),o.addTile(l.tile),l.tile.cacheImageRecord=o,this._imagesLoadedCount>this._maxImageCacheCount){for(var w,O,A,C,a=null,p=-1,y=null,D=this._tilesLoaded.length-1;D>=0;D--)if(!((w=(C=this._tilesLoaded[D]).tile).level<=d||w.beingDrawn)){if(!a){a=w,p=D,y=C;continue}((A=w.lastTouchTime)<(O=a.lastTouchTime)||A===O&&w.level>a.level)&&(a=w,p=D,y=C)}a&&p>=0&&(this._unloadTile(y),s=p)}this._tilesLoaded[s]=new i({tile:l.tile,tiledImage:l.tiledImage})},clearTilesFor:function(l){e.console.assert(l,"[TileCache.clearTilesFor] tiledImage is required");for(var d,s=0;s<this._tilesLoaded.length;++s)(d=this._tilesLoaded[s]).tiledImage===l&&(this._unloadTile(d),this._tilesLoaded.splice(s,1),s--)},getImageRecord:function(l){return e.console.assert(l,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[l]},_unloadTile:function(l){e.console.assert(l,"[TileCache._unloadTile] tileRecord is required");var d=l.tile,s=l.tiledImage;d.unload(),d.cacheImageRecord=null;var o=this._imagesLoaded[d.cacheKey];o.removeTile(d),o.getTileCount()||(o.destroy(),delete this._imagesLoaded[d.cacheKey],this._imagesLoadedCount--),s.viewer.raiseEvent("tile-unloaded",{tile:d,tiledImage:s})}}}(OpenSeadragon),function(e){e.World=function(i){var n=this;e.console.assert(i.viewer,"[World] options.viewer is required"),e.EventSource.call(this),this.viewer=i.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(l){n._autoRefigureSizes?n._figureSizes():n._needsSizesFigured=!0},this._figureSizes()},e.extend(e.World.prototype,e.EventSource.prototype,{addItem:function(i,n){if(e.console.assert(i,"[World.addItem] item is required"),e.console.assert(i instanceof e.TiledImage,"[World.addItem] only TiledImages supported at this time"),void 0!==(n=n||{}).index){var l=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(l,0,i)}else this._items.push(i);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,i.addHandler("bounds-change",this._delegatedFigureSizes),i.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:i})},getItemAt:function(i){return e.console.assert(void 0!==i,"[World.getItemAt] index is required"),this._items[i]},getIndexOfItem:function(i){return e.console.assert(i,"[World.getIndexOfItem] item is required"),e.indexOf(this._items,i)},getItemCount:function(){return this._items.length},setItemIndex:function(i,n){e.console.assert(i,"[World.setItemIndex] item is required"),e.console.assert(void 0!==n,"[World.setItemIndex] index is required");var l=this.getIndexOfItem(i);if(n>=this._items.length)throw new Error("Index bigger than number of layers.");n===l||-1===l||(this._items.splice(l,1),this._items.splice(n,0,i),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:i,previousIndex:l,newIndex:n}))},removeItem:function(i){e.console.assert(i,"[World.removeItem] item is required");var n=e.indexOf(this._items,i);-1!==n&&(i.removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy(),this._items.splice(n,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(i))},removeAll:function(){var i,n;for(this.viewer._cancelPendingImages(),n=0;n<this._items.length;n++)(i=this._items[n]).removeHandler("bounds-change",this._delegatedFigureSizes),i.removeHandler("clip-change",this._delegatedFigureSizes),i.destroy();var l=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,n=0;n<l.length;n++)this._raiseRemoveItem(i=l[n])},resetItems:function(){for(var i=0;i<this._items.length;i++)this._items[i].reset()},update:function(){for(var i=!1,n=0;n<this._items.length;n++)i=this._items[n].update()||i;return i},draw:function(){for(var i=0;i<this._items.length;i++)this._items[i].draw();this._needsDraw=!1},needsDraw:function(){for(var i=0;i<this._items.length;i++)if(this._items[i].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(i){this._autoRefigureSizes=i,i&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(i){var y,n=(i=i||{}).immediately||!1,l=i.layout||e.DEFAULT_SETTINGS.collectionLayout,s=i.columns||e.DEFAULT_SETTINGS.collectionColumns,o=i.tileSize||e.DEFAULT_SETTINGS.collectionTileSize,p=o+(i.tileMargin||e.DEFAULT_SETTINGS.collectionTileMargin);y=!i.rows&&s?s:Math.ceil(this._items.length/(i.rows||e.DEFAULT_SETTINGS.collectionRows));var _,A,E,D,w=0,O=0;this.setAutoRefigureSizes(!1);for(var N=0;N<this._items.length;N++)N&&N%y==0&&("horizontal"===l?(O+=p,w=0):(w+=p,O=0)),A=(_=this._items[N]).getBounds(),D=new e.Point(w+(o-(E=A.width>A.height?o:o*(A.width/A.height)))/2,O+(o-E*(A.height/A.width))/2),_.setPosition(D,n),_.setWidth(E,n),"horizontal"===l?w+=p:O+=p;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var i=this._homeBounds?this._homeBounds.clone():null,n=this._contentSize?this._contentSize.clone():null,l=this._contentFactor||0;if(this._items.length){var d=this._items[0],s=d.getBounds();this._contentFactor=d.getContentSize().x/s.width;for(var o=d.getClippedBounds().getBoundingBox(),a=o.x,p=o.y,y=o.x+o.width,w=o.y+o.height,O=1;O<this._items.length;O++)s=(d=this._items[O]).getBounds(),this._contentFactor=Math.max(this._contentFactor,d.getContentSize().x/s.width),o=d.getClippedBounds().getBoundingBox(),a=Math.min(a,o.x),p=Math.min(p,o.y),y=Math.max(y,o.x+o.width),w=Math.max(w,o.y+o.height);this._homeBounds=new e.Rect(a,p,y-a,w-p),this._contentSize=new e.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}else this._homeBounds=new e.Rect(0,0,1,1),this._contentSize=new e.Point(1,1),this._contentFactor=1;(this._contentFactor!==l||!this._homeBounds.equals(i)||!this._contentSize.equals(n))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(i){this.raiseEvent("remove-item",{item:i})}})}(OpenSeadragon),function(){var e=window.OpenSeadragon;if(!e&&!(e=require("openseadragon")))throw new Error("OpenSeadragon is missing.");e.Viewer.prototype.canvasOverlay=function(n){return this._canvasOverlayInfo||(this._canvasOverlayInfo=new i(this,n)),this._canvasOverlayInfo};var i=function(n,l){var d=this;this._viewer=n,this._containerWidth=0,this._containerHeight=0,this._canvasdiv=document.createElement("div"),this._canvasdiv.style.position="absolute",this._canvasdiv.style.left=0,this._canvasdiv.style.top=0,this._canvasdiv.style.width="100%",this._canvasdiv.style.height="100%",this._viewer.canvas.appendChild(this._canvasdiv),this._canvas=document.createElement("canvas"),this._canvasdiv.appendChild(this._canvas),this.onRedraw=l.onRedraw||function(){},this.clearBeforeRedraw=void 0===l.clearBeforeRedraw||l.clearBeforeRedraw,this._viewer.addHandler("update-viewport",function(){d.resize(),d._updateCanvas()}),this._viewer.addHandler("open",function(){d.resize(),d._updateCanvas()})};i.prototype={canvas:function(){return this._canvas},context2d:function(){return this._canvas.getContext("2d")},clear:function(){this._canvas.getContext("2d").clearRect(0,0,this._containerWidth,this._containerHeight)},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._canvasdiv.setAttribute("width",this._containerWidth),this._canvas.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._canvasdiv.setAttribute("height",this._containerHeight),this._canvas.setAttribute("height",this._containerHeight)),this._viewportOrigin=new e.Point(0,0);var n=this._viewer.viewport.getBoundsNoRotate(!0);this._viewportOrigin.x=n.x,this._viewportOrigin.y=n.y*this.imgAspectRatio,this._viewportWidth=n.width,this._viewportHeight=n.height*this.imgAspectRatio;var l=this._viewer.world.getItemAt(0);this.imgWidth=l.source.dimensions.x,this.imgHeight=l.source.dimensions.y,this.imgAspectRatio=this.imgWidth/this.imgHeight},_updateCanvas:function(){var l=this._viewer.viewport.getZoom(!0)*this._containerWidth,d=this._canvas.getContext("2d"),s=this._canvas.width/2,o=this._canvas.height/2,a=this._viewer.viewport.getRotation(),p=Math.PI/180,y=(this._viewportOrigin.x/this.imgWidth-this._viewportOrigin.x)/this._viewportWidth*this._containerWidth,w=(this._viewportOrigin.y/this.imgHeight-this._viewportOrigin.y)/this._viewportHeight*this._containerHeight;this.clearBeforeRedraw&&this.clear(),d.translate(s,o),d.rotate(a*p),d.translate(-s,-o),d.translate(y,w),d.scale(l,l),this.onRedraw(),d.setTransform(1,0,0,1,0,0)}}}();var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(e){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,l={},d={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function C(D){return D instanceof s?new s(D.type,C(D.content),D.alias):Array.isArray(D)?D.map(C):D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(C){return Object.prototype.toString.call(C).slice(8,-1)},objId:function(C){return C.__id||Object.defineProperty(C,"__id",{value:++n}),C.__id},clone:function C(D,N){var Z,X;switch(N=N||{},d.util.type(D)){case"Object":if(X=d.util.objId(D),N[X])return N[X];for(var se in N[X]=Z={},D)D.hasOwnProperty(se)&&(Z[se]=C(D[se],N));return Z;case"Array":return X=d.util.objId(D),N[X]?N[X]:(N[X]=Z=[],D.forEach(function(h,re){Z[re]=C(h,N)}),Z);default:return D}},getLanguage:function(C){for(;C;){var D=i.exec(C.className);if(D)return D[1].toLowerCase();C=C.parentElement}return"none"},setLanguage:function(C,D){C.className=C.className.replace(RegExp(i,"gi"),""),C.classList.add("language-"+D)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Z){var C=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Z.stack)||[])[1];if(C){var D=document.getElementsByTagName("script");for(var N in D)if(D[N].src==C)return D[N]}return null}},isActive:function(C,D,N){for(var Z="no-"+D;C;){var X=C.classList;if(X.contains(D))return!0;if(X.contains(Z))return!1;C=C.parentElement}return!!N}},languages:{plain:l,plaintext:l,text:l,txt:l,extend:function(C,D){var N=d.util.clone(d.languages[C]);for(var Z in D)N[Z]=D[Z];return N},insertBefore:function(C,D,N,Z){var X=(Z=Z||d.languages)[C],se={};for(var h in X)if(X.hasOwnProperty(h)){if(h==D)for(var re in N)N.hasOwnProperty(re)&&(se[re]=N[re]);N.hasOwnProperty(h)||(se[h]=X[h])}var ye=Z[C];return Z[C]=se,d.languages.DFS(d.languages,function(Oe,Re){Re===ye&&Oe!=C&&(this[Oe]=se)}),se},DFS:function C(D,N,Z,X){X=X||{};var se=d.util.objId;for(var h in D)if(D.hasOwnProperty(h)){N.call(D,h,D[h],Z||h);var re=D[h],ye=d.util.type(re);"Object"!==ye||X[se(re)]?"Array"===ye&&!X[se(re)]&&(X[se(re)]=!0,C(re,N,h,X)):(X[se(re)]=!0,C(re,N,null,X))}}},plugins:{},highlightAll:function(C,D){d.highlightAllUnder(document,C,D)},highlightAllUnder:function(C,D,N){var Z={callback:N,container:C,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};d.hooks.run("before-highlightall",Z),Z.elements=Array.prototype.slice.apply(Z.container.querySelectorAll(Z.selector)),d.hooks.run("before-all-elements-highlight",Z);for(var se,X=0;se=Z.elements[X++];)d.highlightElement(se,!0===D,Z.callback)},highlightElement:function(C,D,N){var Z=d.util.getLanguage(C),X=d.languages[Z];d.util.setLanguage(C,Z);var se=C.parentElement;se&&"pre"===se.nodeName.toLowerCase()&&d.util.setLanguage(se,Z);var re={element:C,language:Z,grammar:X,code:C.textContent};function ye(Re){re.highlightedCode=Re,d.hooks.run("before-insert",re),re.element.innerHTML=re.highlightedCode,d.hooks.run("after-highlight",re),d.hooks.run("complete",re),N&&N.call(re.element)}if(d.hooks.run("before-sanity-check",re),(se=re.element.parentElement)&&"pre"===se.nodeName.toLowerCase()&&!se.hasAttribute("tabindex")&&se.setAttribute("tabindex","0"),!re.code)return d.hooks.run("complete",re),void(N&&N.call(re.element));if(d.hooks.run("before-highlight",re),re.grammar)if(D&&e.Worker){var Oe=new Worker(d.filename);Oe.onmessage=function(Re){ye(Re.data)},Oe.postMessage(JSON.stringify({language:re.language,code:re.code,immediateClose:!0}))}else ye(d.highlight(re.code,re.grammar,re.language));else ye(d.util.encode(re.code))},highlight:function(C,D,N){var Z={code:C,grammar:D,language:N};if(d.hooks.run("before-tokenize",Z),!Z.grammar)throw new Error('The language "'+Z.language+'" has no grammar.');return Z.tokens=d.tokenize(Z.code,Z.grammar),d.hooks.run("after-tokenize",Z),s.stringify(d.util.encode(Z.tokens),Z.language)},tokenize:function(C,D){var N=D.rest;if(N){for(var Z in N)D[Z]=N[Z];delete D.rest}var X=new p;return y(X,X.head,C),a(C,X,D,X.head,0),function O(C){for(var D=[],N=C.head.next;N!==C.tail;)D.push(N.value),N=N.next;return D}(X)},hooks:{all:{},add:function(C,D){var N=d.hooks.all;N[C]=N[C]||[],N[C].push(D)},run:function(C,D){var N=d.hooks.all[C];if(N&&N.length)for(var X,Z=0;X=N[Z++];)X(D)}},Token:s};function s(C,D,N,Z){this.type=C,this.content=D,this.alias=N,this.length=0|(Z||"").length}function o(C,D,N,Z){C.lastIndex=D;var X=C.exec(N);if(X&&Z&&X[1]){var se=X[1].length;X.index+=se,X[0]=X[0].slice(se)}return X}function a(C,D,N,Z,X,se){for(var h in N)if(N.hasOwnProperty(h)&&N[h]){var re=N[h];re=Array.isArray(re)?re:[re];for(var ye=0;ye<re.length;++ye){if(se&&se.cause==h+","+ye)return;var Oe=re[ye],Re=Oe.inside,qe=!!Oe.lookbehind,Ie=!!Oe.greedy,nt=Oe.alias;if(Ie&&!Oe.pattern.global){var Nt=Oe.pattern.toString().match(/[imsuy]*$/)[0];Oe.pattern=RegExp(Oe.pattern.source,Nt+"g")}for(var wt=Oe.pattern||Oe,Ve=Z.next,at=X;Ve!==D.tail&&!(se&&at>=se.reach);at+=Ve.value.length,Ve=Ve.next){var _t=Ve.value;if(D.length>C.length)return;if(!(_t instanceof s)){var st,xt=1;if(Ie){if(!(st=o(wt,at,C,qe))||st.index>=C.length)break;var Tt=st.index,zt=st.index+st[0].length,Ee=at;for(Ee+=Ve.value.length;Tt>=Ee;)Ee+=(Ve=Ve.next).value.length;if(at=Ee-=Ve.value.length,Ve.value instanceof s)continue;for(var jt=Ve;jt!==D.tail&&(Ee<zt||"string"==typeof jt.value);jt=jt.next)xt++,Ee+=jt.value.length;xt--,_t=C.slice(at,Ee),st.index-=at}else if(!(st=o(wt,0,_t,qe)))continue;var It=st[0],Rt=_t.slice(0,Tt=st.index),Et=_t.slice(Tt+It.length),oi=at+_t.length;se&&oi>se.reach&&(se.reach=oi);var Ft=Ve.prev;if(Rt&&(Ft=y(D,Ft,Rt),at+=Rt.length),w(D,Ft,xt),Ve=y(D,Ft,new s(h,Re?d.tokenize(It,Re):It,nt,It)),Et&&y(D,Ve,Et),xt>1){var St={cause:h+","+ye,reach:oi};a(C,D,N,Ve.prev,at,St),se&&St.reach>se.reach&&(se.reach=St.reach)}}}}}}function p(){var C={value:null,prev:null,next:null},D={value:null,prev:C,next:null};C.next=D,this.head=C,this.tail=D,this.length=0}function y(C,D,N){var Z=D.next,X={value:N,prev:D,next:Z};return D.next=X,Z.prev=X,C.length++,X}function w(C,D,N){for(var Z=D.next,X=0;X<N&&Z!==C.tail;X++)Z=Z.next;D.next=Z,Z.prev=D,C.length-=X}if(e.Prism=d,s.stringify=function C(D,N){if("string"==typeof D)return D;if(Array.isArray(D)){var Z="";return D.forEach(function(ye){Z+=C(ye,N)}),Z}var X={type:D.type,content:C(D.content,N),tag:"span",classes:["token",D.type],attributes:{},language:N},se=D.alias;se&&(Array.isArray(se)?Array.prototype.push.apply(X.classes,se):X.classes.push(se)),d.hooks.run("wrap",X);var h="";for(var re in X.attributes)h+=" "+re+'="'+(X.attributes[re]||"").replace(/"/g,"&quot;")+'"';return"<"+X.tag+' class="'+X.classes.join(" ")+'"'+h+">"+X.content+"</"+X.tag+">"},!e.document)return e.addEventListener&&(d.disableWorkerMessageHandler||e.addEventListener("message",function(C){var D=JSON.parse(C.data),N=D.language,X=D.immediateClose;e.postMessage(d.highlight(D.code,d.languages[N],N)),X&&e.close()},!1)),d;var _=d.util.currentScript();function A(){d.manual||d.highlightAll()}if(_&&(d.filename=_.src,_.hasAttribute("data-manual")&&(d.manual=!0)),!d.manual){var E=document.readyState;"loading"===E||"interactive"===E&&_&&_.defer?document.addEventListener("DOMContentLoaded",A):window.requestAnimationFrame?window.requestAnimationFrame(A):window.setTimeout(A,16)}return d}(_self);"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(i,n){var l={};l["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},l.cdata=/^<!\[CDATA\[|\]\]>$/i;var d={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:l}};d["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var s={};s[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:d},Prism.languages.insertBefore("markup","cdata",s)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,i){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:Prism.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(e){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,function(){if(void 0!==Prism&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var l={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},d="data-src-status",s="loading",o="loaded",p="pre[data-src]:not(["+d+'="'+o+'"]):not(['+d+'="'+s+'"])';Prism.hooks.add("before-highlightall",function(_){_.selector+=", "+p}),Prism.hooks.add("before-sanity-check",function(_){var A=_.element;if(A.matches(p)){_.code="",A.setAttribute(d,s);var E=A.appendChild(document.createElement("CODE"));E.textContent="Loading\u2026";var C=A.getAttribute("data-src"),D=_.language;if("none"===D){var N=(/\.(\w+)$/.exec(C)||[,"none"])[1];D=l[N]||N}Prism.util.setLanguage(E,D),Prism.util.setLanguage(A,D);var Z=Prism.plugins.autoloader;Z&&Z.loadLanguages(D),function y(_,A,E){var C=new XMLHttpRequest;C.open("GET",_,!0),C.onreadystatechange=function(){4==C.readyState&&(C.status<400&&C.responseText?A(C.responseText):E(C.status>=400?function(_,A){return"\u2716 Error "+_+" while fetching file: "+A}(C.status,C.statusText):"\u2716 Error: File does not exist or is empty"))},C.send(null)}(C,function(X){A.setAttribute(d,o);var se=function w(_){var A=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(_||"");if(A){var E=Number(A[1]),D=A[3];return A[2]?D?[E,Number(D)]:[E,void 0]:[E,E]}}(A.getAttribute("data-range"));if(se){var h=X.split(/\r\n?|\n/g),re=se[0],ye=null==se[1]?h.length:se[1];re<0&&(re+=h.length),re=Math.max(0,Math.min(re-1,h.length)),ye<0&&(ye+=h.length),ye=Math.max(0,Math.min(ye,h.length)),X=h.slice(re,ye).join("\n"),A.hasAttribute("data-start")||A.setAttribute("data-start",String(re+1))}E.textContent=X,Prism.highlightElement(E)},function(X){A.setAttribute(d,"failed"),E.textContent=X})}}),Prism.plugins.fileHighlight={highlight:function(A){for(var D,E=(A||document).querySelectorAll(p),C=0;D=E[C++];)Prism.highlightElement(D)}};var O=!1;Prism.fileHighlight=function(){O||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),O=!0),Prism.plugins.fileHighlight.highlight.apply(this,arguments)}}}();